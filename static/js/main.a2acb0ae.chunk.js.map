{"version":3,"sources":["../../../src/utils/funnel.js","../../../src/utils/interpolate.js","../../../src/utils/validateHex.js","../../../src/utils/wrapAround.js","../../../src/import/hueToRelativeChannels.js","../../../src/constants.js","../../../src/solveFor/specificLumFromHue.js","../../../src/solveFor/maxSatForHueFromTuner.js","../../../src/solveFor/hueFromChannels.js","../../../src/solveFor/satFromChannels.js","../../../src/solveFor/lumFromChannels.js","../../../src/export/specToHexFixLimit.js","../../../src/export/specToChannelsFixLimit.js","../../../src/export/channelsToHex.js","../../../src/export/specToHex.js","../../../src/export/gradientsToHexArrays.js","../../../src/import/channelsToSpec.js","../../../src/import/hexToChannels.js","../../../src/import/hexToSpec.js","../../../src/scheme.js","../../../src/identify/nameHue.js","../../../src/preconfig/builtInTunerKit.js","../../../src/getOffset.js","../../../src/getStandout.js","../../../src/contrast.js","../../../src/preconfig/schemes.js","util/getRandomInt.js","util/numberedName.js","logic/manageHues.js","logic/manageColors.js","StyleDefinitions.js","util/useLocalStorageState.js","Tiles/task.js","Tiles/tile.js","Tiles/uiSample.js","Tiles/index.js","util/manageDragUi.js","Controls/css/interactive-transform.js","Controls/css/panel.js","Controls/css/button.js","Controls/css/check.js","Controls/css/interactive-label.js","Controls/css/dropdown.js","Controls/css/dropdown-classic.js","Controls/css/group.js","Controls/css/resist-click.js","Controls/css/slider.js","Controls/css/switch.js","Controls/css/text-field.js","Controls/Group.js","Controls/Icon/css.js","Controls/Icon/Icon.js","Controls/Label.js","Controls/Dropdown.js","Controls/TextField.js","Controls/Toggle/Button.js","Controls/controlStyles.js","Controls/Toggle/Key.js","Controls/Toggle/Switch.js","Controls/Toggle/index.js","Controls/Panel.js","Controls/Slider.js","PaletteModule/Swatch.js","PaletteModule/PaletteModule.js","PaletteModule/index.js","preconfig/calibrationSheets.js","HuesModule/ChromaticDiagram.js","HuesModule/HueControls.js","HuesModule/index.js","App.js","serviceWorker.js","index.js"],"names":["min","max","value","completionRatio","range","to","from","proto","draft","RegExp","this","r","string","final","exec","process","hex","miniHex","miniHexArray","idx","miniHexToHex","Error","wrapAround","hue","hueReduced","hueInteger","Math","hueDecimal","x","y","CHANNEL_SPECIFIC_LUM","R","G","B","hueToRelativeChannels","factorR","factorG","factorB","tuner","maxSat","hueWrapped","a","b","hueDoubleWrapped","tuningPointA","tuningPointB","hueA","hueB","$","sat","lum","prefer","relativeChannels","makeMinChannel","minLum","maxLum","maxSatForHueFromTuner","maxChannels","minChannels","makeMinChannels","trueSaturation","funnel","trueLuminosity","lumFromChannels","specificLum","specificLumFromHue","maxWhite","Object","white","channels","fix","limit","specToChannels","channel","channelHex","channelsToHex","specToHexFixLimit","interpolateChanges","rootSpec","currentStep","axes","changes","currentAxis","attribute","relative","rootValue","interpolate","axisIdx","gradientToHexArray","gradient","steps","hexArray","stepIdx","specToHex","hueFromChannels","satFromChannels","validated","validateHex","parseInt","hexToChannels","channelsToSpec","mixPalettes","palettes","hexes","ops","place","paletteIdx","stateKey","elementKey","Array","palettes_","palette","state","element","destination","origin","hexToSpec","color","opsEntries","key","percentSaturated","offset","lightAdjust","holdsEntries","holdsEntryIdx","subPaletteId","subPaletteOps","externalElements","baseElementsEntries","baseElementsIdx","baseElementKey","baseElementValue","id","states","base","elements","stateEntries","stateEntryIdx","stateKey_","stateOps","state_","elementKey_","stateKeys","stateKeysIdx","paletteToScssBlock","scssBlock","baseEntries","baseIdx","stateIdx","stateObj","elementEntries","elementIdx","paletteTemplate","name","rangeNames","none","polar","split","trine","square","noFilter","simulateCMYK","offsets","index","offsetValue","newValue","originalColorObject","gradients","hexArrays","gradientIdx","console","namingPointA","namingPointB","scheme","schemeEntries","newPalettes","scssObject","makeScssObject","trifactory","PaletteModule","bg","mg","shade","fg","contrast","holds","Control","hover","active","disabled","newLum","getRandomInt","floor","random","numberedName","selfIdx","registry","int","generatedName","sameName","entry","some","colors","setColors","hues","changeColor","change","newColors","targetIdx","content","targetColor","contentDerived","hueWillChange","colorHasLinkedHue","linkedToHue","hueIsNotLinked","hueIsLinked","hueToLink","find","angle","deriveCompleteChange","contentComplete","newHistory","history","newMarker","marker","newTimeline","timeline","fromHistory","contentInverse","contentKeys","keys","length","contentKey","newTimelineStep","undo","redo","splice","newColor","traverseTimeline","targetColorIdx","direction","markerFromDirection","randomColorData","DemoSelect","styled","nav","ColorLogicDemo","div","GradientRow","props","shadeRange","ControlCluster","gridArea","useLocalStorageState","defaultValue","serialize","JSON","stringify","deserialize","parse","useState","valueInLocalStorage","window","localStorage","getItem","setState","prevKeyRef","useRef","useEffect","prevKey","current","removeItem","setItem","isDragging","Container","Title","h3","isDraggingOver","Tile","structure","type","locked","draggableId","provided","draggableProps","ref","innerRef","dragHandleProps","droppableId","droppableProps","map","placeholder","terminals","subject","layout","TilesDemo","uiSample","ui","setUi","onDragEnd","result","source","home","columns","foreign","homeTaskIds","taskIds","newHome","foreignTaskIds","newForeign","newState","newTaskIds","arrayMove","newColumn","columnOrder","cssInteractiveTransform","css","panelCSS","buttonCSS","checkCSS","cssInteractiveLabel","dropdownCSS","cssGroup","resistClickCSS","sliderCSS","switchCSS","textFieldCSS","ControlGroup","children","gap","gridTemplate","gapContent","iconCSS","iconLetter","auto","check","close","divot","go","minus","plus","reset","right","Icon","letter","className","Label","text","defaultDimensions","height","width","Dropdown","label","handler","log","options","valueProvided","dimensions","cssExtra","indexOfValueProvided","option","indexOf","indexOfValue","autoWidth","focused","setFocused","isOpen","setIsOpen","enterIsHeld","setEnterIsHeld","incrementFocused","increment","newIndex","indexWrapped","onClick","onTouchEnd","tabIndex","onKeyDown","e","keyCode","preventDefault","onKeyUp","handleClick","noHandlerMessage","TextField","validate","frontMatter","undoButton","goButton","setValue","valueIsReady","setValueIsReady","onChange","attempt","target","attemptIsValid","valueIsValidDraft","attemptIsEmpty","validateDraft","newValueIsReady","validateFinal","innerPad","Button","toggleStateProvided","innerHeight","cssGridTemplate","templateName","z","getCssGridTemplate","htmlFor","checked","Key","icon","trackWidth","defaultLabel","optionA","optionB","ToggleFlip","setChecked","initialSwitchPosition","setInitialSwitchPosition","switchPosition","setSwitchPosition","actionIsDrag","setActionIsDrag","thumbWidth","labelText","labelPlace","labelA","labelB","thumbDisplace","handleSetInitialSwitchPosition","resolveEvent","resolvedSwitchPosition","onMouseDown","onTouchStart","onMouseUp","newPosition","Toggle","Panel","rangeWidth","numInputWidth","numberIfString","Number","Slider","step","shiftStep","numeric","liveUpdate","shiftIsHeld","setShiftIsHeld","autoRangeWidth","rangeRef","trueRangeWidth","offsetWidth","rangeWidthState","setRangeWidthState","rangeTotal","limitTotal","limitWithinRange","slidableSpace","trackProgress","trackDisplace","thumbProgress","handleSetValue","handleKeyDown","handleKeyUp","round","inputMode","importHexColor","colorIdx","deleteColor","undoChange","redoChange","preview","substr","inputHex","setInputHex","saveThisColor","importHex","adjustColorSpec","output","controlPalette","schemes","sliderDimensions","fieldWidth","gradientsToHexArrays","hexArrayIdx","hexIdx","Swatch","addColor","undefined","tenths","dynamicRange","hueRange","default","nameIsDerived","hueIsDerived","deriveHue","via","ChromaticDiagram","HueControls","hueIdx","changeHue","addHue","deleteHue","linkHueOptions","slice","saveThisHue","adjustDeriveHue","newDeriveHue","HUE_STRUCTURES","HuesModule","Application","builtInTunerKit","calibrationSheets","setHues","manageColors","applyChangesToColors","workingHues","newHues","targetHue","derivedContent","originalHue","nameIsDerivedUnchanged","nameRemainsDerived","nameBecomesDerived","nameHue","newHue","hueChangesDownstream","colorChangesDownstream","downstreamHue","push","downstreamColor","newLinkedToHue","newHueAngle","applyChangesToHues","changeIdx","randomAngle","manageHues","basename","exact","path","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"gXAAe,SAAS,EAAT,KAA6B,IAAXA,EAAW,KAANC,EAAM,KAC1C,OAAOC,MAAoBA,MAA3B,E,iDCDF,MAAe,SAAC,GAGV,QAFJC,uBAEI,MAFc,GAEd,MADJC,MAAQC,EACJ,KADQC,EACR,KAOJ,OANcA,EAAOH,GAAmBE,EAAxC,ICEF,EAAe,CACbE,MADa,eAEbC,MAFa,YAIX,OADU,IAAIC,OAAO,IAAIC,KAAf,MAAV,KACQC,SAAkBC,UAA1B,GAEFC,MANa,YAOX,OAAQD,cAAR,IAA+BA,UAEjCE,KATa,YAWX,OADU,IAAIL,OAAOC,KAArB,OACOC,QAAP,IAEFI,QAba,YAcX,IAAMC,EAAMN,KAAKI,KAAjB,GACA,OAAOE,EAAP,QACE,OAAQ,YACR,OAAQ,UAvBO,SAAAC,GACnB,IAAMC,EAAeD,QAArB,IAEA,MADoB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAjC,GACQ,KAAgB,SAAAE,GAAG,OAAID,EAAJ,MAAnB,KAAR,IAoBwBE,CAAZ,GACR,QAAS,MAAM,IAAIC,MAASL,EAAnB,oCCxBA,SAASM,EAAWpB,EAAO,GACxC,IADoD,IAAXF,EAAW,KAANC,EAAM,KAC9CC,GAAN,GAAoBA,GAAUD,EAAVC,EACpB,KAAMA,EAAN,GAAmBA,GAAUD,EAAVC,EACnB,SC2GF,MAAe,SAAAqB,GAEb,IAAMC,GADND,EAAMD,EAAWC,EAAK,CAAC,EAAvBA,OACA,GACME,EAAaC,WAAnB,GACMC,EAAaH,EAAnB,EACMI,EAAN,EACMC,EAAI,EAAV,EACA,UACE,OAAQ,MAAO,CAAC,EAAGD,EAAX,GACR,OAAQ,MAAO,CAACC,EAAG,EAAX,GACR,OAAQ,MAAO,CAAC,EAAG,EAAX,GACR,OAAQ,MAAO,CAAC,EAAGA,EAAX,GACR,OAAQ,MAAO,CAACD,EAAG,EAAX,GACR,OAAQ,MAAO,CAAC,EAAG,EAAX,GACR,QAAS,MAAM,IAAIP,MAAM,uBAAhB,KCrHAS,EAAuB,CAClCC,EADkC,GAElCC,EAFkC,GAGlCC,EAAG,ICPL,EAAe,SAAAV,GAAO,MACgBW,EADhB,GACbC,EADa,KACJC,EADI,KACKC,EADL,KASpB,OANaP,IAAb,EACaA,IAAb,EACaA,IAAb,GCNF,EAAe,SAACP,EAAKe,GAGnB,IAFA,IAAIC,EAAJ,IACMC,EAAalB,EAAWC,EAAK,CAAC,EAFP,MAGrBkB,GAAJ,EAAYC,EAAhB,EAAuBA,EAAIJ,EAA3B,OAAyCG,IAAKC,IAAK,CAGjD,IAAMC,GAFNF,EAAInB,EAAWmB,EAAG,CAAC,EAAGH,EAD2B,UAGxBG,EAAQnB,EAAWkB,EAAY,MAA/BC,WAHwB,EAI3CG,EAAeN,EAArB,GACMO,EAAeP,EAArB,GACMQ,EAAOL,IAAQnB,EAAWsB,EAAD,IAAmB,MAArCH,MAAoDG,EAAjE,IACMG,EAAOF,EAAb,IACA,IACGF,GAAD,QACCA,GAAD,GAFF,EAE2C,CAEzC,IAAIK,EAAKL,GAFgC,EAGzCK,GAHyC,EAIzCA,GAAKD,EAJoC,EAKzCC,GAAKH,MAAmBD,EALiB,IASzCL,EAHAS,GAAKJ,EAALI,KAOJ,UC5BF,EAAe,SAAC,GAAgB,IAC9B,EADgBjB,EAAc,EAAdA,EAAGC,EAAW,EAAXA,EAAGC,EAAQ,EAARA,EAUtB,OARGF,KAASC,GAAZ,IAAoBT,EAAM,IAAM,GAAKS,EAAD,IAAWD,EAA3BR,KACjBS,MAAUD,EAAb,IAAoBR,EAAM,IAAM,GAAKQ,EAAD,IAAWC,EAA3BT,KACjBS,KAASC,GAAZ,IAAoBV,EAAM,IAAM,GAAKU,EAAD,IAAWD,EAA3BT,KACjBU,MAAUD,EAAb,IAAoBT,EAAM,IAAM,GAAKS,EAAD,IAAWC,EAA3BV,KACjBU,KAASF,GAAZ,IAAoBR,EAAM,IAAM,GAAKQ,EAAD,IAAWE,EAA3BV,KACjBQ,MAAUE,EAAb,IAAoBV,EAAM,IAAM,GAAKU,EAAD,IAAWF,EAA3BR,KACjBQ,OAAWC,IAAd,IAAuBT,EARO,GAU9B,GCVF,EAAe,SAAC,GAAgB,IAAdQ,EAAc,EAAdA,EAAGC,EAAW,EAAXA,EAAGC,EAAQ,EAARA,EAGtB,OAFYP,gBAAoBA,aADF,ICEhC,EAAe,SAAC,GAAgB,IAAdK,EAAc,EAAdA,EAAGC,EAAW,EAAXA,EAAGC,EAAQ,EAARA,EAOtB,OALEH,UACAA,MADAA,IAEAA,MAJ4B,KCChC,EAAe,SAAC,GAAqC,MCKtC,SAAC,GAA6C,IAgB3D,EACA,EACA,EAlBgBP,EAA2C,EAA3CA,IAAK0B,EAAsC,EAAtCA,IAAKC,EAAiC,EAAjCA,IAAiC,IAA5BC,cAA4B,MAAnB,MAAmB,EAAZb,EAAY,EAAZA,MAOzCc,EAAmBlB,EAAzB,GACA,cACE,IAAMmB,EAAiB,SAAAlC,GAAG,OAAIO,WAAW0B,KAAf,IAC1B,MAAO,CACLrB,EAAGsB,EADE,GAELrB,EAAGqB,EAFE,GAGLpB,EAAGoB,EAAe,IAMtB,IAAIC,EAAJ,EACIC,EAAJ,EACIhB,EAASiB,EAAsBjC,EAAnC,GAEA,WAAG4B,EAAkB,CAGnB,IAAMM,EAAc,CAClB1B,GAFF2B,EAAcC,EADdC,EAAiBC,EAAOnC,WAAD,GAAwB,CAAC,EAAhDkC,QAGKF,MADe,EAElB1B,EAAG0B,QAFe,EAGlBzB,EAAGyB,QAAsBE,GAI3BE,EAAiBD,EAAOX,EAAK,CAF7BI,EAASS,EAATT,GACAC,EAASQ,EAATR,KAYF,WAAGJ,EAAkB,CACnBW,EAAiBD,EAAOX,EAAK,CAAC,EAA9BY,IACA,IAAME,EAAcC,EAApB,GACA1B,EAASb,WAEPA,WAAWoC,KACAA,EADAA,EACP,IACA,KAAO,EAAP,IAA8B,EAJpCvB,KAOAmB,EAAcC,EADdC,EAAiBlC,WAAjBkC,IAEAN,EAASS,EAATT,GASF,IAAMY,EAAY,IAAMxC,oBAAYyC,cAApC,IACMC,EAAQP,EACZnC,WADkB,KACNoC,EAAD,IACX,CAAC,EAFH,IAjE2D,EAqEvC,CAClB/B,EAAG2B,IADe,EAElB1B,EAAG0B,IAFe,EAGlBzB,EAAGyB,IAAgBU,GASrB,MAAO,CACLC,SAAU,CAAEtC,EAlF6C,IAkF1CC,EAlF0C,IAkFvCC,EAlFuC,KAmFzDqC,IAAK,CACHrB,IADG,EAEHC,IAAKY,GAEPS,MAAO,CACLtB,IAAK,CAAC,EADD,GAELC,IAAK,CAACC,YAAD,OD7FwBqB,CAAe,CAAEjD,IADC,EAAnCA,IACuC0B,IADJ,EAA9BA,IACuCC,IADT,EAAzBA,IACuCC,OADd,EAApBA,OAC0Cb,MADtB,EAAZA,QAC/B+B,EAD2C,WACjCC,EADiC,MAC5BC,EAD4B,QAOnD,MAAO,CAAEvD,IEVI,SAAAqD,GAAQ,UACjBF,OAAA,eAA4B,SAAAM,GAC9B,IAAIC,EAAaD,WAAjB,IAEA,OADA,IAAGC,WAAyBA,EAAa,EAAbA,GAC5B,KAHE,KADiB,IFMTC,CAAc,CAAE5C,EADRsC,EAF+B,EAGpBrC,EADXqC,EAF+B,EAGjBpC,EADdoC,EAF+B,IAOrCC,IAAP,EAAYC,UGRrB,EAAe,SAAC,GAAqC,IAAnChD,EAAmC,EAAnCA,IAAK0B,EAA8B,EAA9BA,IAAKC,EAAyB,EAAzBA,IAAKC,EAAoB,EAApBA,OAAQb,EAAY,EAAZA,MAEvC,OADgBsC,EAAkB,CAAErD,IAAF,EAAO0B,IAAP,EAAYC,IAAZ,EAAiBC,OAAjB,EAAyBb,UADR,KCCrD,SAASuC,EAAmBC,EAAUC,EAAaC,GAEjD,IADA,IAAMC,EAAN,GADuD,cAGrD,IAAMC,EAAcF,EAApB,GACQG,EAAwBD,EAJqB,UAIlCE,EAAaF,EAJqB,SAK/CG,EAAYP,EAAlB,GAoCM5E,EAAQoF,EAAY,CACxBnF,gBADwB,EAExBC,MAAO,CArCE,WACT,cAAc8E,EAAd,IACE,aACE,SACOG,EAAYH,EAAnB,GADqBA,EAAP,GAEhB,eACE,OAAOA,KAAeJ,EAAtB,IACF,QAAS,MAAM,IAAIzD,MACjB,gDACqB6D,EADrB,qBACqDA,EADrD,uHA6BI7E,GArBG,WACX,cAAc6E,EAAd,MACE,gBACE,OAAOJ,EAAP,GACF,aACE,SACOO,EAAYH,EAAnB,KADqBA,EAAP,KAEhB,eACE,OAAOA,OAAiBJ,EAAxB,IACF,QAAS,MAAM,IAAIzD,MACjB,kDACuB6D,EADvB,uBACyDA,EADzD,uKAWU5E,MAEhB2E,QA3CMM,EAAR,EAAqBA,EAAUP,EAA/B,OAA4CO,IAAW,EAA/CA,GA8CR,SAGF,SAASC,EAAmBV,EAAUW,EAAUnD,GAG9C,IAHqD,IAC7CoD,EAAwBD,EADqB,MACtCT,EAAiBS,EADqB,KAChCtC,EAAWsC,EADqB,OAE/CE,EAAN,GACQC,EAAR,EAAqBA,EAAUF,EAA/B,OAA6CE,IAAW,CACtD,IACMX,EAAUJ,EAAmB,EADfa,EAApB,GACA,GAKM1E,EAAM6E,EAAU,EAAD,QAGnB1C,OAHmB,EAInBb,WAEFqD,UAEF,SAGF,ICrEA,EAAe,SAAC,GAAgB,IAAd5D,EAAc,EAAdA,EAAGC,EAAW,EAAXA,EAAGC,EAAQ,EAARA,EAItB,MAAO,CAAEV,IAHGuE,EAAgB,CAAE/D,EAAF,EAAKC,EAAL,EAAQC,MAGtBgB,IAFF8C,EAAgB,CAAEhE,EAAF,EAAKC,EAAL,EAAQC,MAEjBiB,IADPa,EAAgB,CAAEhC,EAAF,EAAKC,EAAL,EAAQC,QCPtC,EAAe,SAAAjB,GACb,IAAMgF,EAAYC,UAAlB,GACMxB,EAAU,SAAAtD,GAAG,OAAI+E,SAASF,SAAkB7E,IAAlB6E,EAAD,GAAZ,KACnB,MAAO,CACLjE,EAAG0C,EADE,GAELzC,EAAGyC,EAFE,GAGLxC,EAAGwC,EAAQ,KCLf,EAAe,SAAAzD,GAAO,MACAmF,EADA,GACZpE,EADY,IACTC,EADS,IACNC,EADM,MAQMmE,EAAe,CAAErE,EAAF,EAAKC,EAAL,EAAQC,MACjD,MAAO,CAAEV,IATW,MASN0B,IATM,MASDC,IATC,QCCf,SAASmD,EAAY,GAKzB,IAJDC,EAIC,EAJDA,SACAC,EAGC,EAHDA,MACAC,EAEC,EAFDA,IAEC,IADDC,MAAQC,GACP,aAD2C,CAAC,EAAG,KAAM,MACrD,MADmBC,EACnB,KAD6BC,EAC7B,KACD,IAAIC,cAAD,IAAH,IAA+BP,SAAuB,MAAM,IAAIjF,MAAV,qCAEtD,IAAIyF,EAAY,GAAH,OAAb,GACMC,EAAUD,EAAhB,GACME,EAAQL,EACVI,SADkB,GAAtB,KAGME,EAAUL,EACZI,WADsB,GAA1B,KAGME,EAAcD,MAApB,EACME,EAASF,EAAUD,EAAzB,EAEA,IAAIG,GAAJ,IAAcZ,SAAoB,MAAM,IAAIlF,MAAV,iCAE9B8F,EAAJ,QAAkBA,QAAeC,EAAUb,EAAzBY,KAclB,IAbA,IAAIE,EAAK,KAASF,EAAlB,OAEMG,EAAanD,eAAnB,GAWQhD,EAAR,EAAiBA,EAAMmG,EAAvB,OAA0CnG,IAAO,OAC1BmG,EAD0B,GACxCC,EADwC,KACnCrH,EADmC,KAO/C,UACE,YAEE,iBACE,aACEmH,EAAQD,EAAUb,EAAlBc,IACA,MACF,aACEd,aACAc,EAAQD,EAARC,GACA,MACF,QAAS,MAAM,IAAIhG,MAAM,gEAAV,EAAN,KAEX,MACF,UACA,UACA,UACE,iBACE,aACEgG,OACA,MACF,eACEA,KAAanH,EAAMmH,EAAnBA,IACA,MACF,QAAS,MAAM,IAAIhG,MAAM,uEAAV,EAAN,KAEX,MACF,eACE,UACE,WAAagG,MAAYA,YAAZA,EAGX,MACF,WAAaA,MAAYA,cAAZA,IAGX,MACF,aAAeA,MAAYA,YAAZA,EAGb,MACF,QAAS,MAAM,IAAIhG,MAAM,6CAAV,EAAN,KAEXgG,eACA,MACF,YACA,YACA,YAAc,MACd,WACA,WAAa,MACb,UACA,WAAa,MACb,WACA,YACE,IAAMG,EAAmBH,MAAzB,IAIMI,GAFc,IAAO,EAAP,GADAxD,EAAmBoD,EAAvC,KACA,GAEeK,GADAH,gBAAf,KAIAF,UACGA,SAAiBA,MAApB,KAAmCA,OAAa,IAAbA,GACnCA,eACA,MACF,YAEE,IADA,IAAMM,EAAexD,eAArB,GACQyD,EAAR,EAA2BA,EAAgBD,EAA3C,OAAgEC,IAAiB,CAI/E,IAJ+E,MACzCD,EADyC,GACxEE,EADwE,KAC1DC,EAD0D,KAEzEC,EAAN,GACMC,EAAsB7D,eAAe4C,cAA3C,UACQkB,EAAR,EAA6BA,EAAkBD,EAA/C,OAA2EC,IAAmB,OACjDD,EADiD,GACrFE,EADqF,KACrEC,EADqE,KAE5FJ,EAAiB,MAAjBA,KAEFjB,OAAe,CACbsB,GADa,EAEbf,MAAOP,KAFM,MAGbuB,OAAQ,CAAEC,KAAM,CAAEF,GAAF,OAAcG,SAAUR,MAE1CjB,EAAYT,EAAY,CACtBC,SADsB,EAEtBC,MAFsB,EAGtBC,IAHsB,EAItBC,MAAO,CAACK,SAAD,eAGX,MACF,YACE,IAAM0B,EAAerE,eAArB,GACA,KAiBE,IAAI,IAAIsE,EAAR,EAA2BA,EAAgBD,EAA3C,OAAgEC,IAAiB,OACjDD,EADiD,GACxEE,EADwE,KAC7DC,EAD6D,KAIzEC,EAAS7B,SAAf,GACI6B,WAAJ,KAAiCA,kBACjC7B,4BAAqDV,EAAY,CAC/DC,SAD+D,EAE/DC,MAF+D,EAG/DC,IAH+D,EAI/DC,MAAO,CAACC,EAAY,EAAb,UA1BX,IAAI,IAAI+B,EAAR,EAA2BA,EAAgBD,EAA3C,OAAgEC,IAAiB,OACjDD,EADiD,GACxEE,EADwE,KAC7DC,EAD6D,KAG/E5B,YAA4B,CAC1BqB,GAD0B,EAE1BG,SAAU,IAEZxB,kBAAkCV,EAAY,CAC5CC,SAD4C,EAE5CC,MAF4C,EAG5CC,IAH4C,EAI5CC,MAAO,CAACC,EAAYgC,EAAW,QAkBnC,MACJ,QAGE,IAFA,IAAMG,EAAN,EACMC,EAAY3E,YAAY4C,EAA9B,QACQgC,EAAR,EAA0BA,EAAeD,EAAzC,OAA2DC,IAAgB,CACzE,IAAML,EAAYI,EAAlB,GACMF,EAAS7B,SAF0D,GAIzE6B,cAA+B,CAAER,GAAIS,GACrCD,oBAAqCvC,EAAY,CAC/CC,SAD+C,EAE/CC,MAF+C,EAG/CC,IAH+C,EAI/CC,MAAO,CAACC,EAAY,EAAb,MAKfQ,UACA,IAAWA,oBAlJoC,GAuJjD,OAAGD,GAAH,EAEE,EAGF,EAGF,SAAS+B,EAAmBjC,EAASzE,GAGnC,IAFA,IAAI2G,EAAJ,GACMC,EAAc/E,eAAe4C,cAAnC,UACQoC,EAAR,EAAqBA,EAAUD,EAA/B,OAAmDC,IAAW,OACrCD,EADqC,GACrD3B,EADqD,KAChDN,EADgD,KAE5DgC,GAAa,OAAJ,aAAyBpD,EAAU,EAAD,GAAMoB,EAAN,OAAqB3E,WAAhE2G,MAGF,IADA,IAAMT,EAAerE,eAAe4C,EAApC,QACQqC,EAAR,EAAsBA,EAAWZ,EAAjC,OAAsDY,IAAY,OACnCZ,EADmC,GACzD7B,EADyD,KAC/C0C,EAD+C,KAGhE,UACE,YACEJ,4CACA,MACF,aACEA,8BACA,MACF,eACEA,kCACA,MACF,QAAS,SAGX,IADA,IAAMK,EAAiBnF,eAAekF,EAAtC,UACQE,EAAR,EAAwBA,EAAaD,EAArC,OAA4DC,IAAc,OACjDD,EADiD,GACjE/B,EADiE,KAC5DN,EAD4D,KAExEgC,GAAa,SAAJ,aAA2BpD,EAAU,EAAD,GAAMoB,EAAN,OAAqB3E,WAAlE2G,MAEFA,WAEF,SA4BF,IAAMO,EAAkB,SAAAC,GAAI,MAAK,CAC/BrB,GAD+B,EAE/BC,OAAQ,CAAEC,KAAM,CAAEC,SAAU,OChQ9B,IAAMmB,EAAa,CACjB,CAAEnI,IAAF,GACEkI,KAAM,UACR,CAAElI,IAAF,GACEkI,KAAM,UACR,CAAElI,IAAF,GACEkI,KAAM,UACR,CAAElI,IAAF,GACEkI,KAAM,QACR,CAAElI,IAAF,IACEkI,KAAM,SACR,CAAElI,IAAF,IACEkI,KAAM,QACR,CAAElI,IAAF,IACEkI,KAAM,QACR,CAAElI,IAAF,IACEkI,KAAM,QACR,CAAElI,IAAF,IACEkI,KAAM,UACR,CAAElI,IAAF,IACEkI,KAAM,UACR,CAAElI,IAAF,IACEkI,KAAM,WACR,CAAElI,IAAF,IACEkI,KAAM,QACR,CAAElI,IAAF,IACEkI,KAAM,Q,0Cf5BoB,CAC5BE,KAD4B,GAE5BC,MAAO,CAFqB,KAG5BC,MAAO,CAAC,IAHoB,KAI5BC,MAAO,CAAC,IAJoB,KAK5BC,OAAQ,CAAC,GAAI,IAAK,M,kBgBLL,CACbC,SAAU,CACR,CAAE/G,IAAF,IAAY1B,IAAK,GACjB,CAAE0B,IAAF,IAAY1B,IAAK,MAEnB0I,aAAc,CACZ,CAAEhH,IAAF,IAAY1B,IAAK,IACjB,CAAE0B,IAAF,IAAY1B,IAAK,KACjB,CAAE0B,IAAF,IAAY1B,IAAK,KACjB,CAAE0B,IAAF,IAAY1B,IAAK,KACjB,CAAE0B,IAAF,IAAY1B,IAAK,KACjB,CAAE0B,IAAF,IAAY1B,IAAK,KACjB,CAAE0B,IAAF,IAAY1B,IAAK,KACjB,CAAE0B,IAAF,IAAY1B,IAAK,O,0CCVN,SAAC,GAOd,IAHI,IAHJP,EAGI,EAHJA,IACAsB,EAEI,EAFJA,MACA4H,EACI,EADJA,QAEMpF,EAAWsC,EAAjB,GACMnC,EAAN,GACQkF,EAAR,EAAmBA,EAAQD,EAA3B,OAA2CC,IAAS,OACfD,EADe,GAC1C/E,EAD0C,YAC/BiF,EAD+B,cAE5C/E,EAAYP,EAAlB,GACQ7B,EAAQ6B,EAHkC,IAI9CuF,OAAQ,EACZ,UACE,UACA,UACEA,EAAWhF,EAAXgF,EACA,MACF,UAEIA,EADCD,OAA+BA,IAAlC,EACa/E,EAAXgF,MAAwBD,GAAenH,OAAamH,GAAenH,EAAfmH,KAAbnH,GAAhB,IACLoC,GAAa+E,GAAenH,OAAa,KAAQmH,GAAenH,EAAvB,KAAbA,GAAvCoH,IACT,MACF,QACE,MAAM,IAAIhJ,MAAV,8DAEJ4D,OAQF,OANeY,EAAU,EAAD,QAGtB1C,OAHsB,MAItBb,Y,cChCW,SAAAtB,GAKb,OAJgBoG,EADI,OAEHlE,aAAjB,S,uBRuEa,SAACoH,EAAqBhI,GAKnC,IAL6C,IACrCiI,EAAcD,EADuB,UAGvCxF,EAAW,CAAEvD,IADO+I,EAFmB,IAGrBrH,IADEqH,EAFmB,IAGhBpH,IADHoH,EAFmB,KAIvCE,EAAN,GACQC,EAAR,EAAyBA,EAAcF,EAAvC,OAAyDE,IAAe,CACtE,IACM9E,EAAWH,EAAmBV,EADnByF,EAAjB,GACA,GACAC,UAEF,U,eSlFK,SAAsBxJ,GAK3B,OAJgBoG,EADgB,OAEflE,aAAjB,S,sJJ0Ba,SAAA3B,GACbmJ,yBAEA,IADA,IAAMlI,EAAalB,EAAWC,EAAK,CAAC,EAApC,MACQkB,GAAJ,EAAYC,EAAhB,EAAuBA,EAAIgH,EAA3B,OAA8CjH,IAAKC,IAAK,CAEtD,IAAMC,GADNF,EAAInB,EAAWmB,EAAG,CAAC,EAAGiH,EAAtBjH,UACyBA,EAAQnB,EAAWkB,EAAY,MAA/BC,WAAzB,EACMkI,EAAejB,EAArB,GACMkB,EAAelB,EAArB,GACM5G,EAAOL,IAAQnB,EAAWqJ,EAAD,IAAmB,MAArClI,MAAoDkI,EAAjE,IACM5H,EAAO6H,EAAb,IACA,IACGjI,GAAD,QACCA,GAAD,GAFF,EAOE,OAJA+H,qCACgBC,EADhBD,UAESE,EAFTF,4BAG2BC,EAH3BD,MAIOC,EAAP,O,6BDoNS,SAAoC,GAGjD,IAH2E,IAAxBpE,EAAwB,EAAxBA,MAAOsE,EAAiB,EAAjBA,OAAQvI,EAAS,EAATA,MAC5DwI,EAAgB3G,eAAtB,GACImC,EAAJ,GACQnF,EAAR,EAAiBA,EAAM2J,EAAvB,OAA6C3J,IAAO,OAC9B2J,EAD8B,GAC3CrB,EAD2C,KACrCjD,EADqC,KAE5CuE,EAAc1E,EAAY,CAC9BC,SAAU,CAACkD,EADmB,IAE9BjD,MAF8B,EAG9BC,QAEFF,EAAW,GAAH,SAARA,GAIF,OA3BF,SAAwBA,EAAUhE,GAEhC,IADA,IAAM0I,EAAN,GACQb,EAAR,EAAmBA,EAAQ7D,EAA3B,OAA4C6D,IAAS,CACnD,IAAMpD,EAAUT,EAAhB,GACA0E,EAAWjE,EAAXiE,IAAyBhC,EAAmBjC,EAA5CiE,GAEF,SAmBaC,CAAe3E,EAZ+C,I,UMpQ9D,CAAE4E,WAAY,CAC3BC,cAAe,CACb9D,MADa,EAEb+D,GAFa,GAGbC,GAAI,CAAEC,MAAO,IACbC,GAAI,CAAEC,SAAU,QAChBC,MAAO,CACLC,QAAS,CACP1E,MAAO,CACL2E,MADK,GAELC,OAFK,GAGLC,SAAU,IAEZT,GAAI,CACFE,MADE,GAEFtE,MAAO,CACLsB,KADK,GAELqD,MAAO,CAAEL,MAAO,IAChBM,OAAQ,CAAEN,MAAO,IACjBO,SAAU,CAAEP,MAAO,MAGvBD,GAAI,CACFC,MAAO,IAETC,GAAI,CACFC,SADE,OAEFxE,MAAO,CACL2E,MAAO,CAAEH,SAAU,UACnBI,OAAQ,CAAEJ,SAAU,UACpBK,SAAU,CAAEP,MAAO,W,eDnBxB,SAAsBtK,EAAKsB,GAChC,IAAMwC,EAAWsC,EAAjB,GACM0E,EAAShH,eAAf,IASA,OANee,EAAU,EAAD,MAEtB3C,IAFsB,EAGtBC,OAHsB,MAItBb,Y,mNElBW,SAASyJ,EAAa9L,GACnC,OAAOyB,KAAKsK,MAAMtK,KAAKuK,SAAWvK,KAAKsK,MAAM/L,ICHhC,SAASiM,EAAazC,EAAM0C,EAASC,GAIlD,IAHA,IAAqBC,EACjBC,EAAgB7C,EACd8C,EAAW,CAACC,EAAOrL,IAAQqL,EAAM/C,OAAS6C,GAAiBnL,IAAQgL,EACjEhC,EAAQ,EAAGiC,EAASK,KAAKF,GAAWpC,IAHvBkC,EAIUlC,EAA7BmC,EAJsB,UAAO7C,EAAP,YAAe4C,GAMvC,OAAOC,ECET,ICce,GAACI,EAAQC,EAAWrK,EAAOsK,KACxC,IAAMC,EAAcC,IAClB,IAAMC,EAAY,IAAIL,GACdM,EAAuBF,EAAvBE,UAAWC,EAAYH,EAAZG,QACbC,EAAcH,EAAUC,GACxBG,EAzBmB,EAACF,EAASC,EAAaN,KAClD,IAAMO,EAAiB,GACjBC,EAAgBH,EAAQ1L,IACxB8L,EAAoBH,EAAYI,YAChCC,GAAkBL,EAAYM,YACjCJ,GAAiBC,GAAqBE,IACvCJ,EAAeG,YAAc,MAE/B,IAAMG,EAAYR,EAAQK,YAS1B,OARGG,IAAcL,IACfD,EAAe5L,IAAMD,qBACnBsL,EAAKc,KAAKnM,GAAOA,EAAIkI,OAASgE,GAAWE,MACzC,CAAC,EAAG,OAG6B,OAAdF,IACJN,EAAeK,aAAc,GACzCL,GAQkBS,CAAqBX,EAASC,EAAaN,GAC5DiB,EAAe,2BAAQZ,GAAYE,GACnCW,EAAU,eAAQZ,EAAYa,SAChCC,EAAYF,EAAWG,OACrBC,EAAcJ,EAAWK,SAC/B,OAAOrB,EAAOsB,aACZ,IAAK,OAAQJ,GAAa,EAAG,MAC7B,IAAK,OAAQA,GAAa,EAAG,MAC7B,QAGE,IAFA,IAAMK,EAAiB,GACjBC,EAAcnK,OAAOoK,KAAKV,GACxB1D,EAAQ,EAAGA,EAAQmE,EAAYE,OAAQrE,IAAS,CACtD,IAAMsE,EAAaH,EAAYnE,GAC/BkE,EAAeI,GAAcvB,EAAYuB,GAE3C,IAAMC,EAAkB,CACtBC,KAAMN,EACNO,KAAK,2BAAM3B,GAAYE,IAEzBe,EAAYW,OAAO,EAAGb,EAAWU,GACjCV,EAAY,EAGhBF,EAAWK,SAAWD,EACtBJ,EAAWG,OAASD,EACpB,IAAMc,EAAQ,uCACT5B,GACAW,GAFS,IAGZE,QAASD,IAEXf,EAAU8B,OAAO7B,EAAW,EAAG8B,GAC/BnC,EAAUI,IAaNgC,EAAmB,CAACC,EAAgBC,KAAe,IAAD,EACzBvC,EAAOsC,GAAgBjB,QAA5CI,EAD8C,EAC9CA,SAAUF,EADoC,EACpCA,OACZiB,EAAqC,SAAdD,EAAuBhB,EAASA,EAAS,EAC1B,qBAAlCE,EAASe,IACnBrC,EAAY,CACVG,UAAWgC,EACX/B,QAASkB,EAASe,GAAqBD,GACvCb,YAAaa,KAmCjB,MAAO,CACLpC,EAjD2B5H,IAC3B,IAAI,IAAIkF,EAAQ,EAAGA,EAAQlF,EAAQuJ,OAAQrE,IAAS,CAClD,IAAM2C,EAAS7H,EAAQkF,GACvB0C,EAAYC,KAaGkC,GAAkBD,EAAiBC,EAAgB,QACnDA,GAAkBD,EAAiBC,EAAgB,QAErDzN,IACf,IAAM4N,EAAkB,CACtB5N,IAAKA,EAAIoM,MACT1K,IAAK8I,EAAa,KAClB7I,IAAKxB,KAAKuK,SACV9I,OAAQ,OAEFmB,EAAQM,4BAAkB,2BAAKuK,GAAN,IAAuB7M,WAAhDgC,IACFwK,EAAQ,uCACTK,GACA7K,GAFS,IAGZ8D,GAAI1G,KAAKuK,SACTuB,aAAa,EACbF,YAAa/L,EAAIkI,KACjBsE,QAAS,CACPE,OAAQ,EACRE,SAAU,IAEZ5D,UAAW,KAEPwC,EAAY,IAAIL,EAAQoC,GAC9BnC,EAAUI,IAEQiC,IAClB,IAAMjC,EAAY,IAAIL,GACtBK,EAAU8B,OAAOG,EAAgB,GACjCrC,EAAUI,M,goDC7GP,IAAMqC,EAAaC,IAAOC,IAAV,KAyBVC,GAFYF,IAAOG,IAAV,KAEQH,IAAOG,IAAV,MAcdC,EAAcJ,IAAOG,IAAV,IAIPE,GAASA,EAAMC,WAAN,eAEbC,EAAiBP,IAAOG,IAAV,IAGdE,GAASA,EAAMG,U,GAGAR,IAAOG,IAAV,KAISH,IAAOG,IAAV,KAGJH,IAAOG,IAAV,IAIRE,GAASA,EAAM1O,K,+BC5DhB,SAAS8O,EACtBvI,EACAwI,EAAe,IACf,UAAEC,EAAYC,KAAKC,UAAnB,YAA8BC,EAAcF,KAAKG,OAAU,IAC1D,IAAD,EAC0BC,mBAAS,KACjC,IAAMC,EAAsBC,OAAOC,aAAaC,QAAQlJ,GACxD,OAAG+I,EACMH,EAAYG,GAEU,oBAAjBP,EACVA,IACAA,IARN,mBACO/I,EADP,KACc0J,EADd,KAWMC,EAAaC,iBAAOrJ,GAW1B,OATAsJ,oBAAU,KACR,IAAMC,EAAUH,EAAWI,QACxBD,IAAYvJ,GACbgJ,OAAOC,aAAaQ,WAAWF,GAEjCH,EAAWI,QAAUxJ,EACrBgJ,OAAOC,aAAaS,QAAQ1J,EAAKyI,EAAUhJ,KAC1C,CAACO,EAAKyI,EAAWhJ,IAEb,CAACA,EAAO0J,G,gMC1BCrB,IAAOG,IAAV,IAKOE,GAAUA,EAAMwB,WAAa,YAAc,a,0jBCJjE,IAAMC,EAAY9B,IAAOG,IAAV,KAOT4B,EAAQ/B,IAAOgC,GAAV,KAKMhC,IAAOG,IAAV,IAKEE,GAAUA,EAAM4B,eAAiB,YAAc,SAKhD,SAASC,GAAK,UAC3BC,EAD2B,MAE3BrH,IACE,IACM/B,EAAyCoJ,EAAzCpJ,GAAuBqJ,GAAkBD,EAArCvC,UAAqCuC,EAA1BE,OAA0BF,EAAlBC,MAAMxE,EAAYuE,EAAZvE,QAErC,OAAOwE,GACL,IAAK,QAAS,OACZ,kBAAC,IAAD,CAAWE,YAAavJ,EAAI+B,MAAOA,GAChCyH,GACC,kBAAC,EAAD,iBACMA,EAASC,eADf,CAEEC,IAAKF,EAASG,WAEd,kBAACX,EAAUQ,EAASI,gBACjB5J,GAEH,kBAAC,IAAD,CACE6J,YAAa7J,EACb6G,UAAU,aACVwC,KAAK,MAEJG,GACC,kBAAC,EAAD,iBACMA,EAASM,eADf,CAEEJ,IAAKF,EAASG,WAEb9E,EAAQkF,IAAI,CAACX,EAAWrH,IACvB,kBAACoH,EAAD,CACEhK,IAAKiK,EAAUpJ,GACf+B,MAAOA,EACPqH,UAAWA,KAGdI,EAASQ,gBAQxB,IAAK,QAAS,OACZ,kBAAC,IAAD,CAAWT,YAAavJ,EAAI+B,MAAOA,GAChCyH,GACC,kBAAC,EAAD,iBACMA,EAASC,eADf,CAEEC,IAAKF,EAASG,WAEd,kBAACX,EAAUQ,EAASI,gBACjB5J,GAEF6E,EAAQkF,IAAI,CAACX,EAAWrH,IACvB,kBAACoH,EAAD,CACEhK,IAAKiK,EAAUpJ,GACf+B,MAAOA,EACPqH,UAAWA,KAGdI,EAASQ,cAKlB,IAAK,WAAY,OACf,kBAAC,IAAD,CAAWT,YAAavJ,EAAI+B,MAAOA,GAChCyH,GACC,kBAAC,EAAD,iBACMA,EAASC,eADf,CAEEC,IAAKF,EAASG,WAEd,kBAACX,EAAUQ,EAASI,gBACjB5J,KAOX,QAAS,MAAM,IAAI/G,MAAM,SC1Gd,OACbgR,UAAW,CACT,sBAAuB,CACrBjK,GAAI,sBACJkK,QAAS,gBAEX,sBAAuB,CACrBlK,GAAI,sBACJkK,QAAS,gBAEX,sBAAuB,CACrBlK,GAAI,sBACJkK,QAAS,iBAGbC,OAAQ,CACNnK,GAAI,SACJ6G,UAAW,IACXyC,QAAQ,EACRD,KAAM,OACNxE,QAAS,CACP,CAAE7E,GAAI,eACJqJ,KAAM,QACNxC,UAAW,IACXhC,QAAS,CACP,CAAE7E,GAAI,sBACJqJ,KAAM,YACR,CAAErJ,GAAI,eACJqJ,KAAM,QACNxE,QAAS,CACP,CAAE7E,GAAI,sBACJqJ,KAAM,YACR,CAAErJ,GAAI,sBACJqJ,KAAM,mB,yGCNtB,IAAMN,EAAY9B,IAAOG,IAAV,KAKR,SAASgD,IAAa,IC9BQxL,EAAO0J,ED8BhB,EACNZ,EAAqB,KAAM2C,GADrB,mBACnBC,EADmB,KACfC,EADe,KAEpBC,GChCoClC,EDgCPiC,EC4B5B,CA5D4B3L,EDgCJ0L,EC/BbG,IAAW,IACnB3L,EAA2C2L,EAA3C3L,YAAa4L,EAA8BD,EAA9BC,OAAQnB,EAAsBkB,EAAtBlB,YAAaF,EAASoB,EAATpB,KAE1C,GAAIvK,IAEFA,EAAY+K,cAAgBa,EAAOb,aACnC/K,EAAYiD,QAAU2I,EAAO3I,OAG/B,GAAY,WAATsH,EAAH,CAMA,IAAMsB,EAAO/L,EAAMgM,QAAQF,EAAOb,aAC5BgB,EAAUjM,EAAMgM,QAAQ9L,EAAY+K,aAE1C,GAAGc,IAASE,EAAZ,CAmBA,IAAMC,EAAcrM,MAAMvG,KAAKyS,EAAKI,SACpCD,EAAYrE,OAAOiE,EAAO3I,MAAO,GACjC,IAAMiJ,EAAO,2BACRL,GADQ,IAEXI,QAASD,IAELG,EAAiBxM,MAAMvG,KAAK2S,EAAQE,SAC1CE,EAAexE,OAAO3H,EAAYiD,MAAO,EAAGwH,GAC5C,IAAM2B,EAAU,2BACXL,GADW,IAEdE,QAASE,IAELE,EAAQ,2BACTvM,GADS,IAEZgM,QAAQ,2BACHhM,EAAMgM,SADJ,IAEL,CAACI,EAAQhL,IAAKgL,EACd,CAACE,EAAWlL,IAAKkL,MAGrB5C,EAAS6C,OAvCT,CACE,IAAMC,EAAaC,IACjBV,EAAKI,QAASL,EAAO3I,MAAOjD,EAAYiD,OAEpCuJ,EAAS,2BACVX,GADU,IAEbI,QAASK,IAELD,EAAQ,2BACTvM,GADS,IAEZgM,QAAQ,2BACHhM,EAAMgM,SADJ,IAEL,CAACU,EAAUtL,IAAKsL,MAGpBhD,EAAS6C,QAxBX,CACE,IAAMI,EAAcF,IAAUzM,EAAM2M,YAAab,EAAO3I,MAAOjD,EAAYiD,OAC3EuG,EAAS,2BAAK1J,GAAN,IAAa2M,qBDsBzB,OACE,YAAC,IAAD,CAAiBf,UAAWA,GAC1B,YAAC,IAAD,CACEX,YAAY,OACZhD,UAAU,aACVwC,KAAK,MAEJG,GACC,YAAC,EAAD,iBACMA,EAASM,eADf,CAEEJ,IAAKF,EAASG,WAEbW,EAAGH,OAAOtF,QAAQkF,IAAI,CAACX,EAAWrH,IACjC,YAACoH,EAAD,CACEhK,IAAKiK,EAAUpJ,GACf+B,MAAOA,EACPqH,UAAWA,KAGdI,EAASQ,e,8ZErDf,IAAMwB,EAA0BC,YAAH,K,s5CCA7B,IAAMC,EAAWD,YAAH,KAkDSA,YAAH,IACvBC,G,kgCCjDG,IAAMC,EAAYF,YAAH,IAClBC,EACAF,G,29CCFG,IAAMI,EAAWH,YAAH,IACjBC,EACAF,G,qrECJG,IAAMK,GAAsBJ,YAAH,M,iwCCIzB,IAAMK,GAAcL,YAAH,KAkCpBC,EACAF,EACAK,GAUMF,G,m8BCjDwBF,YAAH,KAC3BC,G,yFCFG,IAAMK,GAAWN,YAAH,M,wSCAd,IAAMO,GAAiBP,YAAH,M,wlHCKpB,IAAMQ,GAAYR,YAAH,KAClBC,EACAG,GACAL,EACAQ,GA6IEL,G,02CCpJC,IAAMO,GAAYT,YAAH,KAClBC,EACAG,I,0mCCCG,IAAMM,GAAeV,YAAH,KACrBC,EACAF,EACAK,GACAG,GA2CIL,G,gXClDO,SAASS,IAAa,SACnCC,EADmC,IAEnCC,EAFmC,aAGnCC,IAEA,IAAMC,EAA4B,kBAARF,EACtBb,YADe,KAECa,EAAI,GACPA,EAAI,IAEjBb,YALe,KAMNa,GAGb,OACE,mBACEb,IAAKA,YAAF,KACCM,GACAS,EACeD,IAGlBF,G,gPCxBA,IAAMI,GAAUhB,YAAH,M,sHCEpB,IAAMiB,GAAa,CACjBC,KAAM,IACNC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,GAAI,IACJC,MAAO,IACPC,KAAM,IACNzG,KAAM,IACN0G,MAAO,IACPC,MAAO,IACP5G,KAAM,KAGO,SAAS6G,IAAK,MAAEtV,EAAF,SAAS2P,EAAW3P,IAC/C,IAAMuV,EAASX,GAAW5U,GAC1B,OACE,mBACEwV,UAAS,eAAUxV,GACnB2T,IAAKA,YAAF,KACCgB,GACWhF,IAEf4F,GCxBS,SAASE,IAAM,KAC5BC,EAD4B,MAE5BnP,IAEA,OACE,mBAAKiP,UAAS,oCAEVjP,GAAS,GAFC,WAKZ,yBACGmP,I,43BCNT,IAAMC,GACN,CAAEC,OAAQ,GACRC,MAAO,MAEM,SAASC,IAAS,MAC/BC,EAAQ,QADuB,QAE/BC,EAAUxL,QAAQyL,IAAR,0CAA+CF,IAF1B,QAG/BG,EAH+B,SAI/BvK,EAA8B,IAAnBuK,EAAQ5H,OAJY,cAK/B6H,EAL+B,WAM/BC,EAN+B,SAO/BC,IAEA,IAIMC,EAJe,EAACtW,EAAOkW,KAC3B,IAAMK,EAASL,EAAQ1I,KAAK+I,GAAUA,EAAOvW,QAAUA,GACvD,OAAOkW,EAAQM,QAAQD,IAEIE,CAAaN,EAAeD,GALxD,6BAO8BP,IAAsBS,GAA7CR,EAPP,EAOOA,OAAQC,EAPf,EAOeA,MACVa,EAAYb,EAAK,UAAMA,EAAN,MAAkB,OARxC,EAS6B1F,mBAAS,CAAEnQ,MAAOmW,EAAelM,MAAOqM,IATrE,mBASMK,EATN,KASeC,EATf,OAU2BzG,oBAAS,GAVpC,mBAUM0G,EAVN,KAUcC,EAVd,OAWqC3G,oBAAS,GAX9C,mBAWM4G,EAXN,KAWmBC,EAXnB,KAaDrG,oBAAU,KAERiG,EAAW,CAAE5W,MAAOmW,EAAelM,MADrBqM,KAEb,CAACH,EAAeG,EAAsBJ,IAEzC,IAKMe,EAAmBC,IACvB,IAAMC,EAAWR,EAAQ1M,MAAQiN,EAC3BE,EAAehW,qBAAW+V,EAAU,CAAC,EAAGjB,EAAQ5H,SAC9CtO,EAAUkW,EAAQkB,GAAlBpX,MACR4W,EAAW,CAAE5W,QAAOiK,MAAOmN,KA8B7B,OACE,mBACE5B,UAAS,yCAEL7J,EAAW,WAAa,GAFnB,YAITgI,IAAKA,YAAF,KACCK,GACAqC,EAEUT,EACAA,EACCiB,EAAS,EAAI,GAGrBA,GAAD,uBAGOhB,EAAK,UAAMA,EAAQ,GAAd,MAAuB,OAC3BD,EAGDc,EACEG,EAAS,IAAO,EAEZA,EAASjB,EAASe,EAAQ1M,MAAQ,EAErC4M,EAASjB,EAASM,EAAQ5H,OAASsH,EAC/BA,EACJc,EAGEA,EACFG,EAAS,EAAIjB,EAASe,EAAQ1M,MAE3B4L,EAAK,UAAMA,EAAQ,GAAd,MAAuB,OACvBD,EACIiB,EAAS,OAAS,SAO9C,mBAAKrB,UAAU,gBAEXU,EAAQ,GAAKA,EAAU,CAAC,CAAEH,MAAO,QACjC9D,IAAI,CAACsE,EAAQtV,IACb,mBAAKoG,IAAG,qBAAgBpG,IAAQsV,EAAOR,SAI3C,mBACEP,UAAU,UACV6B,QAAS1L,EAAW,KAAO,IAAMmL,GAAWD,GAC5CS,WAAY3L,EAAW,KAAO,IAAMmL,GAAWD,KAEjD,mBACEU,SAAU5L,EAAW,KAAO,IAC5B6L,UAvFgBC,IACpB,OAAOA,EAAEC,SACP,KAAK,EACL,KAAK,GAAOb,GAAQC,GAAU,GAAQ,MACtC,KAAK,GAAIW,EAAEE,iBAAkBV,EAAiB,GAAI,MAClD,KAAK,GAAIQ,EAAEE,iBAAkBV,GAAkB,GAAI,MACnD,KAAK,GAAIQ,EAAEE,iBAAkBX,GAAe,GAAO,MACnD,KAAK,GAAIA,GAAe,KAiFtBY,QA7EcH,IAClB,OAAOA,EAAEC,SACP,KAAK,GACL,KAAK,GACHD,EAAEE,iBACEd,GAAQb,EAAQW,EAAQ3W,OAC5B,MACF,KAAK,GACL,KAAK,GACHgX,GAAe,GACZH,GAAQb,EAAQW,EAAQ3W,OAC3B8W,GAAWD,KAmEXrB,UAAS,wCAEL7J,EAAW,WAAa,GAFnB,uBAGLoL,EAAc,SAAW,GAHpB,cAKTM,QAAS1L,EAAW,KAAO,IAAMmL,GAAWD,IAE5C,YAACvB,GAAD,CAAMtV,MAAM,UACX+V,GAAS,YAACN,GAAD,CACRC,KAAMK,EAAML,MAAQK,EACpBxP,MAAOwP,EAAMxP,OAAS,UAExB,mBAAKiP,UAAU,sBACb,mBAAKA,UAAU,gBAEXU,EAAQ,GAAKA,EAAU,CAAC,CAAEH,MAAO,QACjC9D,IAAI,CAACsE,EAAQtV,IACb,mBACEuU,UAAWqB,GAAU5V,IAAQ0V,EAAQ1M,MAAQ,eAAiB,SAC9D5C,IAAKpG,EACLjB,MAAOiB,EACPoW,QAAS,IAzHHpW,KAAQ,IAClBjB,EAAUkW,EAAQjV,GAAlBjB,MACRgW,EAAQhW,IAuHmB6X,CAAY5W,IAC3BsV,EAAOR,Y,4gBCzJvB,IAAM+B,GAAmB9X,GAASwK,QAAQyL,IAAI,gBAAiBjW,EAAO,8BAEhE2V,GACN,CAAEC,OAAQ,GACRC,MAAO,KAEM,SAASkC,IAAU,cAChC5B,EADgC,SAEhC6B,EAAW,GAFqB,QAGhChC,EAAU8B,GAHsB,MAIhC/B,EAAQ,QAJwB,YAKhCkC,EALgC,SAMhCtI,EAAW,QANqB,WAOhCyG,EAPgC,SAQhCC,EARgC,WAShC6B,EATgC,SAUhCC,EAVgC,SAWhCxM,IACE,IAAD,EACyBwE,mBAASgG,GADlC,mBACMnW,EADN,KACaoY,EADb,OAEuCjI,oBAAS,GAFhD,mBAEMkI,EAFN,KAEoBC,EAFpB,OAGqCnI,oBAAS,GAH9C,mBAGM4G,EAHN,KAGmBC,EAHnB,kCAK8BrB,IAAsBS,GAA7CR,EALP,EAKOA,OAAQC,EALf,EAKeA,MAEhBlF,oBAAU,KAAQyH,EAASjC,IAAkB,CAACA,IAiC9C,OACE,mBACEX,UAAS,yCAELuB,EAAc,SAAW,GAFpB,qBAGLpL,EAAW,WAAa,GAHnB,YAKTgI,IAAKA,YAAF,KACCU,GACAgC,EACW1G,EACHiG,EACDC,EAMKD,EAAS,EACVA,EAAS,EAEE5V,IAAUmW,EAAgB,EAAIP,EAAS,IAQhEqC,GAAe,mBAAKzC,UAAU,gBAC5ByC,GAEFlC,GAAS,YAACN,GAAD,CACRC,KAAMK,EAAML,MAAQK,EACpBxP,MAAOwP,EAAMxP,OAAS,eAExB,qBACEgL,KAAK,OACLvR,MAAOA,EACPuY,SA3DiBd,IACrB,IAAMe,EAAUf,EAAEgB,OAAOzY,MACnB0Y,EAbc1Y,KACpB,IAAM2Y,GAAoBX,EAAS1X,OAC/B0X,EAAS1X,MAAMN,GAEb4Y,EAAkC,IAAjB5Y,EAAMsO,OAC7B,OAAQqK,GAAqBC,GAQNC,CAAcL,GAClCE,GAAgBN,EAASX,EAAEgB,OAAOzY,OACrC,IACM8Y,EATc9Y,KAASgY,EAASrX,OACpCqX,EAASrX,MAAMX,GAQO+Y,CADPL,EAAiBF,EAAUxY,GAE5CsY,EAAgBQ,IAsDZtB,UApDgBC,IACH,KAAdA,EAAEC,SAAgBV,GAAe,IAoDhCY,QAlDcH,IACD,KAAdA,EAAEC,UACHlN,QAAQyL,IAAIwB,EAAEgB,OAAOzY,OAClBqY,GAAcrC,EAAQyB,EAAEgB,OAAOzY,OAClCgX,GAAe,KA+CbrL,SAAUA,IAEZ,mBAAK6J,UAAU,WACZ0C,GAAc,sBACb3G,KAAK,SACLiE,UAAU,gBACV6B,QAAS,IAAMe,EAASjC,GACxBxK,SAAUA,GACX,YAAC2J,GAAD,CAAMtV,MAAM,UAEZmY,GAAY,sBACX5G,KAAK,SACL8F,QAxDkB,KAAWgB,GAAcrC,EAAQhW,IAyDnD2L,SAAUA,GACX,YAAC2J,GAAD,CAAMtV,MAAM,U,whECnHrB,IAAM2V,GACN,CAAEC,OAAQ,GACRC,MAAO,KACPmD,SAAU,IAEG,SAASC,IAAO,GAC7B/Q,EAD6B,MAE7B6N,EAAQ,QAFqB,oBAG7BmD,EAH6B,QAI7BlD,EAJ6B,OAK7B3D,EAL6B,WAM7B+D,EAN6B,SAO7BC,IACE,IAAD,6BACwCV,IAAsBS,GAAvDR,EADP,EACOA,OAAQC,EADf,EACeA,MAAOmD,EADtB,EACsBA,SACjBtC,EAAYb,EAAK,UAAMA,EAAN,MAAkB,OACnCsD,EAAcvD,EAASoD,EACvBI,ECrB0B,EAACC,EAAc1X,EAAGD,EAAG4X,KACrD,OAAOD,GACL,IAAK,SAAU,OAAO1F,YAAP,KACmChS,EAChCA,EAAUD,EAAUC,GAEtC,IAAK,iBAAkB,OAAOgS,YAAP,KACuChS,EAC5CA,EAAUD,EAAUC,EAAU2X,GAEhD,IAAK,YAAa,OAAO3F,YAAP,MAMlB,IAAK,aAAc,OAAOA,YAAP,KAC+BhS,EACZA,GAEtC,IAAK,cACL,QAAS,OAAOgS,YAAP,KACyChS,EAChCA,KDFI4X,CAAmBlH,EAAD,UAAYuD,EAAZ,OAE1C,OACE,qBACE4D,QAAStR,EACTsN,UAAU,cACV7B,IAAKA,YAAF,KACCG,EACAuC,EACA+C,EACQxD,EACAc,EAMEd,EACAA,EAKSuD,EAAe,EAIxBvD,EACAc,EAGAyC,EACAA,EAGAA,EACAA,EACmB,IAAfA,IAMlB,qBACEjR,GAAIA,EACJqJ,KAAK,WACLkI,QAASP,EACTX,SAAUvC,IAEZ,mBAAKR,UAAU,SAASO,GACxB,mBAAKP,UAAU,QACf,YAACF,GAAD,CAAMtV,MAAM,W,0oBEnElB,IAAM2V,GACN,CAAEC,OAAQ,IAEK,SAAS8D,IAAI,GAC1BxR,EAD0B,KAE1ByR,EAF0B,MAG1B5D,EAAQ,QAHkB,oBAI1BmD,EAJ0B,QAK1BlD,EAL0B,SAM1BrK,EAN0B,WAO1ByK,EAP0B,SAQ1BzG,EAAW,MARe,SAS1B0G,IACE,IACMT,EADP,2BACuBD,IAAsBS,GAAtCR,OAER,OACE,qBACE4D,QAAStR,EACTsN,UAAS,yCAEL7J,EAAW,WAAa,GAFnB,YAITgI,IAAKA,YAAF,KACCG,EACAuC,EACAtC,GACWpE,EACHiG,EAEEA,EACAA,EAKSA,EAAU,EAKnBA,EACAA,EAGc,GAAVA,IAMlB,qBACE1N,GAAIA,EACJqJ,KAAK,WACLkI,QAASP,EACTX,SAAUvC,EACVrK,SAAUA,IAEZ,mBAAK6J,UAAU,QACf,YAACF,GAAD,CAAMtV,MAAO2Z,IACZ5D,GAAS,YAACN,GAAD,CACRC,KAAMK,EAAML,MAAQK,EACpBxP,MAAOwP,EAAMxP,OAAS,W,20CC/D9B,IAAMoP,GACN,CAAEC,OAAQ,GACRoD,SAAU,EACVY,WAAY,IAERC,GAAe,CACnBtT,MAAO,QACPmP,KAAM,QACNoE,QAAS,MACTC,QAAS,MAGI,SAASC,IAAW,GACjC9R,EADiC,KAEjCwN,EAFiC,MAGjCK,EAHiC,oBAIjCmD,EAJiC,QAKjClD,EALiC,SAMjCK,EANiC,WAOjCD,EAPiC,SAQjCzG,EAAW,SARsB,SASjChE,IACE,IAAD,EAC6BwE,mBAAS+I,GADtC,mBACMO,EADN,KACeQ,EADf,OAEyD9J,mBAAS+I,EAAsB,IAAM,GAF9F,mBAEMgB,EAFN,KAE6BC,EAF7B,OAG2ChK,mBAAS+I,EAAsB,IAAM,GAHhF,mBAGMkB,EAHN,KAGsBC,EAHtB,OAIuClK,oBAAS,GAJhD,mBAIMmK,EAJN,KAIoBC,EAJpB,kCAWQ5E,IAAsBS,GAJ7BR,EAPD,EAOCA,OACAoD,EARD,EAQCA,SACAY,EATD,EASCA,WACAY,EAVD,EAUCA,WAVD,6BAiBQX,IAAiB9D,GAJlB0E,EAbP,EAaC/E,KACOgF,EAdR,EAcCnU,MACSoU,EAfV,EAeCb,QACSc,EAhBV,EAgBCb,QAEIZ,EAAcvD,EAAoB,EAAXoD,EACvB6B,EAAgB7B,EAAoCoB,EAAiB,KAAzCR,EAAahE,GAE/CjF,oBAAU,KACR0J,EAAkBnB,EAAsB,IAAM,GAC9Ce,EAAWf,IACV,CAACA,IAEJ,IAAM4B,EAAiC,KACrCX,EAAyBC,IAOrBW,EAAetD,IACnB,IAAMuD,EAAyBV,EAC3BF,EAAiB,GAAK,IAAM,EAC5BF,EAAwB,GAAK,EAAI,IACrCG,EAAkBW,GACfd,IAA0Bc,GAAwBhF,EAAQyB,GAC7D8C,GAAgB,IAGlB,OACE,mBACE/E,UAAS,yCAEL7J,EAAW,WAAa,GAFnB,YAITgI,IAAKA,YAAF,KACYhE,EAKkCiG,EACnBgE,IAQ7BlE,GAAQ,qBAAO8D,QAAStR,GACtBwN,GAGH,mBACE6B,SAAS,IACT0D,YAAatP,EAAW,KAAOmP,EAC/BI,aAAcvP,EAAW,KAAOmP,EAChCK,UAAWxP,EAAW,KAAOoP,EAC7BzD,WAAY3L,EAAW,KAAOoP,EAC9BpH,IAAKA,YAAF,KACCS,GACAiC,EAEmCT,EACnBgE,EAENhE,EACAgE,EAGAT,EACAS,EAEET,EACAqB,GAAcrB,EAGdA,EACAqB,GAAcrB,EAIhBvD,EACAgE,EAEEY,GAAcrB,EACdA,EACAH,EACK6B,IAKpB9E,GAAS,YAACN,GAAD,CACRC,KAAM+E,GAAa1E,EACnBxP,MAAOmU,GAAc,UAEvB,YAACjF,GAAD,CACEC,KAAM+D,EAAUmB,EAASD,EACzBpU,MAAOkT,EAAU,QAAU,SAE7B,qBACElI,KAAK,WACLgG,SAAS,KACTrP,GAAIA,EACJuR,QAASA,EACTlB,SAAUvC,EACVrK,SAAUA,IAEZ,qBACE4L,SAAS,KACThG,KAAK,QACLvR,MAAOoa,EACP7B,SAnGwBd,IAC9B,IAAM2D,EAAc3D,EAAEgB,OAAOzY,MAC1Bob,IAAgBlB,GAA0BI,GAAcC,GAAgB,GAC3EF,EAAkBe,IAiGZtb,IAAK,EACLC,IAAK,IACL4L,SAAUA,IAEZ,mBAAK6J,UAAU,UACb,mBAAKA,UAAU,aC7JV,SAAS6F,IAAO,KAC7B9J,EAD6B,GAE7BrJ,EAAK1G,KAAKuK,SAFmB,KAG7B4N,EAH6B,SAI7BhO,EAJ6B,MAK7BoK,EAL6B,oBAM7BmD,EAN6B,QAO7BlD,EAP6B,WAQ7BI,EAR6B,OAS7B/D,EAT6B,SAU7B1C,EAV6B,SAW7B0G,IAEA,OAAO9E,GACL,IAAK,MAAO,OACV,kBAACmI,GAAD,CACExR,GAAIA,EACJyR,KAAMA,EACNhO,SAAUA,EACVoK,MAAOA,EACPmD,oBAAqBA,EACrBlD,QAASA,EACTI,WAAYA,EACZ/D,OAAQA,EACR1C,SAAUA,EACV0G,SAAUA,IAGd,IAAK,SAAU,OACb,kBAAC,GAAD,CACEnO,GAAIA,EACJyD,SAAUA,EACVoK,MAAOA,EACPmD,oBAAqBA,EACrBlD,QAASA,EACTI,WAAYA,EACZ/D,OAAQA,EACR1C,SAAUA,EACV0G,SAAUA,IAGd,QAAS,OACP,kBAAC4C,GAAD,CACE/Q,GAAIA,EACJyD,SAAUA,EACVoK,MAAOA,EACPmD,oBAAqBA,EACrBlD,QAASA,EACTI,WAAYA,EACZ/D,OAAQA,EACR1C,SAAUA,EACV0G,SAAUA,K,2ZCjDlB,IAAMV,GACN,CAAEC,OAAQ,IACRC,MAAO,MAEM,SAASyF,IAAM,SAC5B/G,EAD4B,QAE5ByB,EAF4B,KAG5BN,EAH4B,MAI5BK,EAJ4B,SAK5BM,EAL4B,SAM5B1G,EAN4B,WAO5ByG,EAP4B,SAQ5BzK,IACE,IAAD,6BAC8BgK,IAAsBS,GAA7CR,EADP,EACOA,OAAQC,EADf,EACeA,MACVa,EAAYb,EAAK,UAAMA,EAAN,MAAkB,OAEzC,OACE,sBACEtE,KAAK,SACLiE,UAAU,cACV6B,QAASrB,EACTrK,SAAUA,EACVgI,IAAKA,YAAF,KACCC,EACAF,EACAK,GACAsC,EACW1G,EACHiG,EACDc,EAMGd,EACAA,IAIbrB,EACAmB,GAAQ,mBAAKF,UAAU,QAAQO,GAC/BA,GACC,YAACN,GAAD,CACEC,KAAMK,EAAML,MAAQK,EACpBxP,MAAOwP,EAAMxP,OAAS,W,igDC5ChC,IAAMoP,GACN,CAAEC,OAAQ,GACRoD,SAAU,EACVuC,WAAY,KACZf,WAAY,GACZgB,cAAe,IAEXC,GAAiBzb,GACD,kBAAVA,EAA2B0b,OAAO1b,GACrCA,EAGM,SAAS2b,IAAO,MAC7B5F,EAD6B,cAE7BI,EAF6B,SAG7BxK,EAH6B,QAI7BqK,EAJ6B,KAK7B4F,EAAO,EALsB,UAM7BC,EAAmB,GAAPD,EANiB,MAO7B1b,EAP6B,MAQ7BmE,EAAQnE,EARqB,WAS7BkW,EAT6B,SAU7BzG,EAAW,SAVkB,SAW7B0G,EAX6B,QAY7ByF,EAZ6B,WAa7BC,IACE,IAAD,IACyB5L,mBAASxM,iBAAOwS,EAAe9R,IADxD,mBACMrE,EADN,KACaoY,EADb,OAEqCjI,oBAAS,GAF9C,mBAEM4G,EAFN,KAEmBC,EAFnB,OAGqC7G,oBAAS,GAH9C,mBAGM6L,EAHN,KAGmBC,EAHnB,kCAWQtG,IAAsBS,GAL7BR,EAND,EAMCA,OACAoD,EAPD,EAOCA,SACAuC,EARD,EAQCA,WACAf,EATD,EASCA,WACAgB,EAVD,EAUCA,cAEIU,EAAiBX,EAAU,UAAMA,EAAN,MAAuB,OAClDY,EAAWzL,iBAAO,MAClB0L,EAAc,UAAGD,EAAStL,eAAZ,aAAG,EAAkBwL,YAdxC,EAe6ClM,mBAASiM,GAftD,mBAeME,EAfN,KAeuBC,EAfvB,KAiBKC,EAAatc,EAAM,GAAKA,EAAM,GAC9Buc,EAAapY,EAAM,GAAKA,EAAM,GAC9BqY,EAAmBD,EAAaD,EAChCrD,EAAcvD,EAAoB,EAAXoD,EACvB2D,EAAgBL,EAAkB9B,EAClCZ,EAAaY,EAAamC,EAAgBD,EAC1CE,EAAgBvY,EAAM,GAAKmY,EAC3BK,EAAgBP,EAAkBM,EAClCE,GAAiB9c,EAAQqE,EAAM,KAAOoY,GAAc,GACpD5B,EAAgBiC,EAAgBH,EAAgBD,EAEtD/L,oBACE,KAAQyH,EAASzU,iBAAOwS,EAAe9R,KACvC,CAAC8R,EAAe9R,IAGlBsM,oBACE,kBAAM4L,EAAkB,UAACJ,EAAStL,eAAV,aAAC,EAAkBwL,cAC3C,CAACD,IAGH,IAAMW,GAAiBtF,IACrBW,EAASX,EAAEgB,OAAOzY,OACf+b,GAAY/F,EAAQ0F,OAAOjE,EAAEgB,OAAOzY,SAEnCgd,GAAgBvF,IACpB,OAAOA,EAAEC,SACP,KAAK,GAAIV,GAAe,GAAO,MAC/B,KAAK,GAAIiF,GAAe,GAAO,MAC/B,KAAK,GACL,KAAK,GACH7D,EAASqD,GAAezb,IAAUgc,EAAcH,EAAYD,IAC5DnE,EAAEE,iBACF,MACF,KAAK,GACL,KAAK,GACHS,EAASqD,GAAezb,IAAUgc,EAAcH,EAAYD,IAC5DnE,EAAEE,mBAKFsF,GAAcxF,IAClB,OAAOA,EAAEC,SACP,KAAK,GAAIV,GAAe,GAAQhB,EAAQyF,GAAezb,IAAS,MAChE,KAAK,GAAIic,GAAe,KAS5B,OACE,mBACEd,UAAW,KAAOxP,GAAYqK,EAAQyF,GAAezb,IACrDsX,WAAY,KAAO3L,GAAYqK,EAAQyF,GAAezb,IACtD2T,IAAKA,YAAF,KACCQ,GACAkC,EACemE,EACJ7K,EACA4L,EAAa,EAAI,EAGuCmB,EAC/B,IAAhBE,EACKE,EAA2CJ,EAExD9C,EACKiD,EACLjH,EAEEA,EACA4E,EAGA5E,EAKFsG,EACA/C,EACAH,EAEEY,EACKiD,EACL1D,EAEEqB,EACArB,EACK0B,EAEHL,EAQRgB,EACArC,EAGAA,EACAA,GAGd3D,UAAS,yCAELuB,EAAc,SAAW,GAFpB,qBAGLpL,EAAW,WAAa,GAHnB,aAMT,sBACE4F,KAAK,SACLgG,SAAS,KACT5L,SAAU3L,IAAUqE,EAAM,IAAMsH,EAChC0L,QAAS,IAAMrB,EAAQyF,GAAezb,GAAS6b,IAE/C,YAACvG,GAAD,CAAMtV,MAAM,WAEd,mBAAKwV,UAAU,iBACb,mBAAKA,UAAU,QAAQ5D,IAAKuK,GAC1B,mBAAK3G,UAAU,SACb,mBAAKA,UAAU,SACZO,GAAS,YAACN,GAAD,CACRC,KAAMK,EAAML,MAAQK,EACpBxP,MAAOwP,EAAMxP,OAAS,aAK9B,qBACEgL,KAAK,QACLgG,UAAW,EACXvX,MAAOA,EACP2L,SAAUA,EACV4M,SAAUwE,GACVvF,UAAWwF,GACXpF,QAASqF,GACTnd,IAAK0B,KAAK0b,MAAM7Y,EAAM,IACtBtE,IAAKyB,KAAK0b,MAAM7Y,EAAM,IACtBuX,KAAMA,KAGV,sBACErK,KAAK,SACLgG,SAAS,KACT5L,SAAU3L,IAAUqE,EAAM,IAAMsH,EAChC0L,QAAS,IAAMrB,EAAQyF,GAAezb,GAAS6b,IAE/C,YAACvG,GAAD,CAAMtV,MAAM,UAEb8b,GACC,qBACEvK,KAAK,SACL4L,UAAU,UACVxR,SAAUA,EACV3L,MAAOwB,KAAK0b,MAAMzB,GAAezb,IACjCuY,SAAUwE,GACVvF,UAAWwF,GACXpF,QAASqF,M,uVCtNJ,SACbnc,MACAsc,oBAEA,mBACE/F,QAAS,IAAM+F,EAAetc,GAC9B6S,IAAKA,YAAF,KAIa7S,IAOhBA,G,0ECUW,SAASmK,IAAc,KACpCyB,EADoC,MAEpCtK,EAFoC,MAGpC+E,EAHoC,SAIpCkW,EAJoC,YAKpCC,EALoC,YAMpC3Q,EANoC,WAOpC4Q,EAPoC,WAQpCC,IACE,IACMnc,EAAoD8F,EAApD9F,IAAK0B,EAA+CoE,EAA/CpE,IAAKC,EAA0CmE,EAA1CnE,IAAKC,EAAqCkE,EAArClE,OAAQqK,EAA6BnG,EAA7BmG,YAAaF,EAAgBjG,EAAhBiG,YACtCqQ,EAAU/Y,4BAAkB,2BAAKyC,GAAN,IAAa/E,WACxCtB,EAAM6E,oBAAU,2BAAKwB,GAAN,IAAa/E,WAHjC,EAI+B+N,mBAASrP,EAAI4c,OAAO,EAAG,IAJtD,mBAIMC,EAJN,KAIgBC,EAJhB,KAMDjN,oBAAU,KACRiN,EAAYjY,oBAAU,2BAAKwB,GAAN,IAAa/E,WAASsb,OAAO,EAAG,KACpD,CAACvW,EAAO/E,IAEX,IAAMyb,EAAgB9Q,GAAWJ,EAAY,CAAEG,UAAWuQ,EAAUtQ,YAE9D+Q,EAAY9d,IAChB,IAAMc,EAAMiF,cAAYlF,QAAZ,WAAwBb,IADX,EAECkH,oBAAUpG,GAA5BO,EAFiB,EAEjBA,IAAK0B,EAFY,EAEZA,IAAKC,EAFO,EAEPA,IAClB6a,EAAc,CAAExc,MAAK0B,MAAKC,MAAKsK,aAAa,KAGxCyQ,EAAkB,CAACC,EAAQ/Y,KAC/B,IAAIjF,EAAQge,EACQ,kBAAVhe,IAAoBA,EAAQgG,SAASgY,EAAQ,KACtC,QAAd/Y,IAAqBjF,GAAS,KACjC,IAAM+M,EAAU,GAChBA,EAAQ9H,GAAajF,EACrBwK,QAAQyL,IAAIoH,EAAUtQ,GACtB8Q,EAAc,eAAK9Q,KAYfkR,EAAiBtK,YAAH,KAAShJ,iBAAO,CAClCtE,MAAO,CAACvF,GACR6J,OAAQuT,UAAQlT,WAChB5I,UACCoJ,SAEG2S,EAAmB,CACvBvI,OAAQ,IAGV,OACE,oCACE,kBAACtB,GAAD,CACEE,IAAK,EACLC,aAAa,yFAIb,kBAAC6G,GAAD,CACEtF,QAAU,IAAMuH,EAAWF,GAC3B1R,SAAUxE,EAAM0G,QAAQE,SAAW5G,EAAM0G,QAAQI,SAASK,OAC1DqB,SAAS,OACT0G,SAAU4H,EACV7H,WAAY,CAAER,OAAQ,GAAIC,MAAO,KAClC,kBAACP,GAAD,CAAMtV,MAAM,UACb,kBAACsb,GAAD,CACEtF,QAAU,IAAMwH,EAAWH,GAC3B1R,SAAmC,IAAzBxE,EAAM0G,QAAQE,OACxB4B,SAAS,OACT0G,SAAU4H,EACV7H,WAAY,CAAER,OAAQ,GAAIC,MAAO,KAClC,kBAACP,GAAD,CAAMtV,MAAM,UACb,kBAACsb,GAAD,CACEtF,QAAS,IAAMsH,EAAYD,GAC3BjH,WAAY,CAAER,OAAQ,GAAIC,MAAO,IACjClG,SAAS,QACT0G,SAAU4H,GACX,kBAAC3I,GAAD,CAAMtV,MAAM,YAEf,kBAAC+X,GAAD,CACE5B,cAAewH,EACf3F,SAAUjS,cACViQ,QAAS8H,EACT7F,YAAY,IACZ7B,WAAY,CAAEgI,WAAY,KAC1B/H,SAAU4H,EACV9F,UAAQ,EACRD,YAAU,IAEZ,kBAAC5D,GAAD,CACEE,IAAK,CAAC,EAAG,IACTC,aAAa,2JAOb,kBAACkH,GAAD,CACE5F,MAAM,MACNC,QAAShW,GAAS+d,EAAgB/d,EAAO,OACzCmW,cAAe9U,EACfsK,SAAU2B,EACVpN,MAAO,CAAC,EAAG,KACXkW,WAAY+H,EACZxO,SAAS,MACT0G,SAAU4H,EACVnC,SAAO,IAET,kBAACpM,EAAD,CAAgBC,SAAS,UACvB,kBAACmG,GAAD,CACEC,MAAM,SACNI,cAAe/I,EACf4I,QA3EchW,GAAS6d,EAAc,CAAEzQ,YAAapN,IA4EpDoW,WAAY,CAAEP,MAAO,KACrBK,QAAS,CACP,CAAElW,MAAO,KAAM+V,MAAO,SACnBrJ,EAAKuF,IAAI5Q,IAAG,CACVrB,MAAOqB,EAAIkI,KAAMwM,MAAO1U,EAAIkI,SAEnC8M,SAAU4H,IAEZ,kBAAC5C,GAAD,CACE9J,KAAK,MACLoI,KAAK,OACLvD,WAAY,CAAER,OAAQ,GAAIgE,WAAY,IACtC5D,QA1FgB,IAAM6H,EAAc,CAAEvQ,aAAcA,IA2FpD3B,SAA0B,OAAhByB,EACV8L,oBAAqB5L,EACrB+I,SAAU4H,KAGd,kBAACtC,GAAD,CACEG,SAAO,EACP/F,MAAM,aACNC,QAAShW,GAAS+d,EAAgB/d,EAAO,OACzCmW,cAAepT,EACf7C,MAAO,CAAC,EAAG,KACXmE,MAAOoZ,EAAQpZ,MAAMtB,IACrBqT,WAAY+H,EACZxO,SAAS,MACT0G,SAAU4H,IAEZ,kBAAC5C,GAAD,CACEnT,GAAE,uBAAkBmV,EAAlB,SACF9L,KAAK,SACLwE,MAAO,CAAEL,KAAM,SAAUoE,QAAS,aAAcC,QAAS,cACzD3D,WAAY,CAAER,OAAQ,GAAIgE,WAAY,IACtC5D,QArHa,KAEnB6H,EAAc,CAAE5a,OADa,QAAXA,EAAmB,MAAQ,SAqHvCiW,oBAAgC,QAAXjW,EACrBoT,SAAU4H,IAEZ,kBAACtC,GAAD,CACE5F,MAAM,aACNC,QAAShW,GAAS+d,EAAgB/d,EAAO,OACzCmW,cAAsB,IAANnT,EAChB9C,MAAO,CAAC,EAAG,KACXmE,MAAOoZ,EAAQpZ,MAAMrB,IAAIiP,IAAIjP,GAAa,IAANA,GACpCoT,WAAY+H,EACZxO,SAAS,MACT0G,SAAU4H,EACVnC,SAAO,KAGVuC,+BAAqBlX,EAAO/E,GAAO6P,IAAI,CAACxM,EAAU6Y,IACjD,kBAAC/O,EAAD,CACElI,IAAG,gBAAWgW,EAAX,qBAAgCiB,GACnC7O,WAAyB,IAAb4N,GAEX5X,EAASwM,IAAI,CAACnR,EAAKyd,IAClB,kBAACC,GAAD,CACE1d,IAAKA,EACLsc,eAAgBU,EAChBzW,IAAG,gBAAWgW,EAAX,gBAA2BiB,EAA3B,gBAA8CC,S,4SC3MhD,SAAStT,IAAc,KACpCyB,EADoC,MAEpCtK,EAFoC,MAGpC+E,EAHoC,SAIpCkW,EAJoC,SAKpCoB,EALoC,YAMpCnB,EANoC,YAOpC3Q,EAPoC,WAQpC4Q,EARoC,WASpCC,IAGA,IAAM1c,EAAMqG,EAAQxB,oBAAU,2BAAKwB,GAAN,IAAa/E,WAAW,KACrD,OACE,uBACEiV,QAASlQ,EAAQ,KAAO,IAAMsX,EAAS/R,EAAK,IAC5C8I,UAAU,gBACV7B,IAAKA,YAAF,KACCxM,EAAQ,GAAKyM,EACbzM,EAAQ,GAAH,uEAKOrG,EACS,MAGTqG,EAAQ,IAAS,WAGtBuX,IAAVvX,EACI,YAED,YAAC8D,GAAD,CACEyB,KAAMA,EACNtK,MAAOA,EACP+E,MAAOA,EACPkW,SAAUA,EACVC,YAAaA,EACb3Q,YAAaA,EACb4Q,WAAYA,EACZC,WAAYA,KChDxB,IAAMmB,GAAS,CAAC,EAAG,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAC1DC,GAAe,CAAC,EAAG,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,IAAM,GAAK,IAAM,KAE5EC,GAAW,CAACtc,EAAG+W,KAAJ,CACfxU,KAAM,CACJ,CACEG,UAAW,MACX7E,KAAMmC,EACNpC,GAAImZ,GAEN,CACErU,UAAW,MACX7E,KAAM,IACND,GAAI,MAGRqF,MAAOmZ,GACP1b,OAAQ,QAEJwM,GAAapO,IAAG,CACpByD,KAAM,CACJ,CACEG,UAAW,MACX7E,KAAMiB,EACNlB,GAAIkB,GAEN,CACE4D,UAAW,MACX7E,KAAM,IACND,GAAI,KAEN,CACE8E,UAAW,MACX7E,KAAM,EACND,GAAI,IAGRqF,MAAOoZ,GACP3b,OAAQ,QAGK,IACb6b,QAAS,CACPpS,KAAM,CACJ,CAAExE,GAAI,GACJqB,KAAM,SACNkE,MAAO,IACPsR,eAAe,EACfC,cAAc,EACdC,UAAW,MACb,CAAE/W,GAAI,GACJqB,KAAM,OACNkE,MAAO,GACPsR,eAAe,EACfC,cAAc,EACdC,UAAW,CACT7e,KAAM,SACN8e,IAAK,QACL/e,GAAI,KAGVqM,OAAQ,CACN,CAAEtE,GAAI,IACJoF,aAAa,EACbF,YAAa,SACb/L,IAAK,IACL0B,IAAK,IACLC,IAAK,GACLC,OAAQ,MACR4K,QAAS,CACPE,OAAQ,EACRE,SAAU,IAEZ5D,UAAW,CACT,CAAE7E,MAAOmZ,GACP1b,OAAQ,MACR6B,KAAM,CACJ,CAAEG,UAAW,MACXC,UAAU,EACV9E,MAAO,GACPD,GAAI,MAEV,CAAEqF,MAAOmZ,GACP1b,OAAQ,MACR6B,KAAM,CACJ,CAAEG,UAAW,MACXC,UAAU,EACV9E,MAAO,GACPD,GAAI,MAEV,CAAEqF,MAAOmZ,GACP1b,OAAQ,MACR6B,KAAM,CACJ,CAAEG,UAAW,MACX7E,KAAM,EACND,GAAI,KAEV,CAAEqF,MAAOmZ,GACP1b,OAAQ,MACR6B,KAAM,CACJ,CAAEG,UAAW,MACX9E,GAAI,IACJC,KAAM,OAGhB,CAAE8H,GAAI,IACJoF,aAAa,EACbF,YAAa,KACb/L,IAAK,IACL0B,IAAK,EACLC,IAAK,EACL6K,QAAS,CACPE,OAAQ,EACRE,SAAU,IAEZ5D,UAAW,CACTwU,GAAS,EAAG,IACZA,GAAS,GAAI,IACbA,GAAS,GAAI,KACbA,GAAS,GAAI,KACbA,GAAS,IAAK,KACdA,GAAS,IAAK,KACdA,GAAS,IAAK,KACdA,GAAS,IAAK,KACdA,GAAS,IAAK,KACdA,GAAS,IAAK,KACdA,GAAS,IAAK,KACdA,GAAS,IAAK,OAElB,CAAE3W,GAAI,IACJoF,aAAa,EACbF,YAAa,KACb/L,IAAK,EACL0B,IAAK,EACLC,IAAK,EACL6K,QAAS,CACPE,OAAQ,EACRE,SAAU,IAEZ5D,UAAW,CACToF,GAAW,IACXA,GAAW,IACXA,GAAW,IACXA,GAAW,IACXA,GAAW,KACXA,GAAW,KACXA,GAAW,KACXA,GAAW,KACXA,GAAW,KACXA,GAAW,KACXA,GAAW,KACXA,GAAW,U,o7BCnJN,SAAS0P,IAAiB,KAAEzS,EAAF,MAAQtK,IAC/C,OACE,mBACEuR,IAAKA,YAAF,OAQFjH,EAAKuF,IAAI5Q,GACR,mBACEsS,IAAKA,YAAF,KAQoBtS,EAAIoM,MAYH9H,oBAAU,CAAEtE,IAAKA,EAAIoM,MAAO1K,IAAK,IAAKC,IAAK,EAAGC,OAAQ,MAAOb,WAGrFiF,IAAG,sBAAiBhG,EAAI6G,GAArB,YAA2B7G,EAAI2d,eAElC,mBAAKxJ,UAAU,W,kOClCV,SAAS4J,IAAY,IAClC/d,EADkC,KAElCqL,EAFkC,OAGlC2S,EAHkC,UAIlCC,EAJkC,OAKlCC,EALkC,UAMlCC,EANkC,MAOlCpd,IACE,IAAD,YACOmH,EAAwDlI,EAAxDkI,KAAMkE,EAAkDpM,EAAlDoM,MAAOwR,EAA2C5d,EAA3C4d,UAAWD,EAAgC3d,EAAhC2d,aAAcD,EAAkB1d,EAAlB0d,cACxCU,EAAiB,IAAI/S,GAAMgT,MAAM,EAAGL,GAEpCrH,EAAW,CACfrX,MAAO6X,IACH9L,EAAKH,KAAKlL,GAAOA,EAAIkI,OAASiP,IAEb,IAAnBA,EAAQlK,QAENqR,EAAc5S,GAAWuS,EAAU,CAAExS,UAAWuS,EAAQtS,YAoBxD6S,EAAkB7S,IACtB,IAAM8S,EAAY,2BAAQZ,GAAclS,GACxC4S,EAAY,CAAEV,UAAWY,KAG3B,OACE,YAACvL,GAAD,CACEE,IAAK,EACLC,aAAa,kIAIZlL,EAEG,8BACE,mBACElC,IAAG,cAASgY,GACZ1L,IAAKA,YAAF,KAIehO,oBAChB,CAAEtE,IAAKoM,EAAO1K,IAAK,IAAKC,IAAK,EAAGC,OAAQ,MAAOb,aAGnD,YAACiZ,GAAD,CACErF,QA9BgB,KAC1B2J,EAAY,CAAEZ,eAAgB1d,EAAI0d,iBA8BxB7F,oBAAqB6F,EACrBpP,SAAS,MACT4B,KAAK,MACLoI,KAAK,OACL5D,MAAM,gBAER,YAACgC,GAAD,CACEhC,MAAM,OACNI,cAAe5M,EACfyO,SAAUA,EACVhC,QAASzM,GAAQoW,EAAY,CAAEpW,SAC/BoC,SAAUoT,EACV5G,UAAQ,EACRD,YAAU,IAEZ,YAACmD,GAAD,CACE1P,SAAqB,IAAX0T,EACV9N,KAAK,MACLwE,MAAO,CAAEL,KAAM,cACfU,WAAY,CAAER,OAAQ,GAAIgE,WAAY,IACtCjK,SAAS,MACTqG,QAlEe,KACzB,IAAI6J,EAAY,eAAQZ,GACP,OAAdA,IACDY,EAAe,CACbzf,KAAMsM,EAAK,GAAGnD,KACd2V,IAAKjb,OAAOoK,KAAKyR,kBAAgB,GACjC3f,GAAI,IAGRwf,EAAY,CACVX,cAAeA,EACfC,UAAWY,KAwDH3G,oBAAqB8F,EACrBrF,KAAK,SAEP,YAACjK,EAAD,CAAgBC,SAAS,SACvB,YAACmG,GAAD,CACEC,MAAM,cACNI,cAAa,UAAE9U,EAAI4d,iBAAN,aAAE,EAAe7e,KAC9BgW,WAAY,CAAEP,MAAO,KACrBG,QAAS5V,GAAQwf,EAAgB,CAAExf,SACnCuL,UAAWqT,EACX9I,QAASuJ,EAAexN,IAAI5Q,IAAG,CAC1BrB,MAAOqB,EAAIkI,KAAMwM,MAAO1U,EAAIkI,UAGnC,YAACuM,GAAD,CACEC,MAAM,aACNI,cAAa,UAAE9U,EAAI4d,iBAAN,aAAE,EAAeC,IAC9B9I,WAAY,CAAEP,MAAO,KACrBG,QAASkJ,GAAOU,EAAgB,CAAEV,QAClCvT,UAAWqT,EACX9I,SAAS,UAAA7U,EAAI4d,iBAAJ,eAAe7e,MACpB6D,OAAOoK,KAAKyR,kBAAgBJ,MAAM,GAAGzN,IAAIX,IAAS,CAChDtR,MAAOsR,EAAWyE,MAAOzE,KAE3B,KAGN,YAACwE,GAAD,CACEC,MAAM,YACNI,cAAa,UAAE9U,EAAI4d,iBAAN,aAAE,EAAe9e,GAC9BiW,WAAY,CAAEP,MAAO,KACrBG,QAAS7V,GAAMyf,EAAgB,CAAEzf,OACjCwL,UAAWqT,EACX9I,SAAS,UAAA7U,EAAI4d,iBAAJ,eAAeC,KACpBY,iBAAc,UAACze,EAAI4d,iBAAL,aAAC,EAAeC,KAAKjN,IAAI,CAACX,EAAWrQ,KAAZ,CACrCjB,MAAOiB,EAAK8U,MAAM,KAAD,OAAQzE,EAAR,WAEnB,MAIR,YAACqK,GAAD,CACE5F,MAAM,MACNC,QAASvI,GAASkS,EAAY,CAAElS,UAChC9B,SAAUqT,EACV7I,cAAe/U,qBAAWqM,EAAO,CAAC,EAAG,MACrCvN,MAAO,CAAC,EAAG,KACX4b,SAAO,IAET,YAACR,GAAD,CACEtF,QAAU,IAAMwJ,EAAUH,GAC1BjJ,WAAY,CAAER,OAAQ,GAAIC,MAAO,IACjClG,SAAS,SACToG,MAAM,cACP,YAACT,GAAD,CAAMtV,MAAM,YAGf,YAACsb,GAAD,CACEtF,QAASuJ,EACTnJ,WAAY,CAAER,OAAQ,IACtBjG,SAAS,SACToG,MAAO,CAAEL,KAAM,UAAWnP,MAAO,SAEjC,YAAC+O,GAAD,CAAMtV,MAAM,W,kuBCvJT,SAAS+f,IAAW,KACjCrT,EADiC,UAEjC4S,EAFiC,OAGjCC,EAHiC,UAIjCC,EAJiC,MAKjCpd,IAEA,OACE,uBACEuR,IAAKA,YAAF,OA6BH,YAACwL,GAAD,CAAkBzS,KAAMA,EAAMtK,MAAOA,IACpC,IAAIsK,EAAM,IAAIuF,IAAI,CAAC5Q,EAAKge,IAEvB,YAACD,GAAD,CACE/X,IAAG,8BAAkBhG,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAKkI,MAC1BlI,IAAKA,EACLqL,KAAMA,EACN2S,OAAQA,EACRC,UAAWA,EACXC,OAAQA,EACRC,UAAWA,EACXpd,MAAOA,MChCF,SAAS4d,KACtB,IAAM5d,EAAQ6d,kBAAgBlW,aADM,EAEZ6F,EACtB,OACAsQ,GAAkBpB,QAAQpS,MAJQ,mBAE7BA,EAF6B,KAEvByT,EAFuB,OAMRvQ,EAC1B,SACAsQ,GAAkBpB,QAAQtS,QARQ,mBAM7BA,EAN6B,KAMrBC,EANqB,OAkBhC2T,EAAa5T,EAAQC,EAAWrK,EAAOsK,GAlBP,mBAYlCC,EAZkC,KAalC0T,EAbkC,KAclC9C,EAdkC,KAelCC,EAfkC,KAgBlCiB,EAhBkC,KAiBlCnB,EAjBkC,OzCbvB,EAAC5Q,EAAMyT,EAAS3T,EAAQ6T,KACrC,IAAMf,EAAY,CAAC1S,EAAQ0T,KACzB,IAAIC,EAAU,IAAKD,GAAe5T,GAC1BI,EAAuBF,EAAvBE,UAAWC,EAAYH,EAAZG,QACbyT,EAAYD,EAAQzT,GACpB2T,EAPgB,GAQtB,GAAG1T,EAAQkS,UAAW,CAAC,IAAD,EACMlS,EAAQkS,UAA1B7e,EADY,EACZA,KAAM8e,EADM,EACNA,IAAK/e,EADC,EACDA,GACnBqK,QAAQyL,IAAI7V,EAAM8e,EAAK/e,GACvB,IAAMugB,EAAcH,EAAQ/S,KAAKnM,GAAOA,EAAIkI,OAASnJ,GAC/CkR,EAAYwO,iBAAeZ,GAC3BzR,EAAQiT,EAAYjT,MAAQ6D,EAAU3N,iBAAOxD,EAAI,CAAC,EAAGmR,EAAUhD,OAAS,KAC9EmS,EAAehT,MAAQA,GAIqB,IAAzBV,EAAQiS,eAE3ByB,EAAehT,MAAQrM,qBACrB2L,EAAQU,OAASgT,EAAehT,OAAS+S,EAAU/S,MACnD,CAAC,EAAG,OAnBiC,IAqBjCsR,EAAkByB,EAAlBzB,cACF4B,EAA0D,qBAA1B5T,EAAQgS,cACxC6B,EAAqB7B,GAAiB4B,EACtCE,EAAqB9T,EAAQgS,eAChC6B,GAAsBC,KACvBJ,EAAelX,KAAOyC,EAAa8U,kBAAQ1f,qBACzC2L,EAAQU,OAASgT,EAAehT,OAAS+S,EAAU/S,MACnD,CAAC,EAAG,OAENX,EAAWJ,GACXlC,QAAQyL,IAAI,iBAAkBwK,IAEhC,IAAMM,EAAM,uCAAQP,GAAczT,GAAY0T,GAC9CF,EAAQ5R,OAAO7B,EAAW,EAAGiU,GAU7B,IAFA,IAAMC,EAAuB,GACvBC,EAAyB,GACvB5B,EAAS,EAAGA,EAAS3S,EAAK4B,OAAQ+Q,IAAU,CAAC,IAAD,EAC5Che,EAAMqL,EAAK2S,GACjB,IAAG,UAAAhe,EAAI4d,iBAAJ,eAAe7e,QAASogB,EAAUjX,OAA6B,IAArBlI,EAAI2d,aAAuB,CACtE,IAAMkC,EAAa,eAAQ7f,GAC3BmJ,QAAQyL,IAAI,gBAAiBiL,EAAc3X,KAAM,iBAFqB,IAG9D0V,EAAciC,EAAdjC,UACRA,EAAU7e,KAAO2gB,EAAOxX,KACxByX,EAAqBG,KAAK,CACxBrU,UAAWuS,EACXtS,QAAS,CAAEkS,gBAIjB,IAAI,IAAI5B,EAAW,EAAGA,EAAW7Q,EAAO8B,OAAQ+O,IAAY,CAC1D,IAAMlW,EAAQqF,EAAO6Q,GACrB,GAAGlW,EAAMiG,cAAgBoT,EAAUjX,KAAM,CACvC,IAAIwD,OAAO,EACX,GAAG5F,EAAMmG,YAAa,CACpB,IAAM8T,EAAe,eAAQja,GAC7BqD,QAAQyL,IAAI,qBAAsBmL,EAAgBre,IAAK,UAAWqe,EAAgBpe,IAAK,iBACvF,IAAMqe,EAAiBN,EAAOxX,KACxB+X,EAAcP,EAAOtT,MAC3BV,EAAU,CACRK,YAAaiU,EACbhgB,IAAKD,qBAAWkgB,EAAa,CAAC,EAAG,YAGnCvU,EAAU,CAAEK,YAAa,MAE3B6T,EAAuBE,KAAK,CAC1BrU,UAAWuQ,EACXtQ,aAUN,GANAvC,QAAQyL,IAAI,8BAA+B+K,GAC3CxW,QAAQyL,IAAI,gCAAiCgL,GAE1CD,EAAqB,KAAIT,EAAUgB,EAAmBP,EAAsBT,IAC5EU,EAAuB,IAAIZ,EAAqBY,GAEhDX,EAAa,OAAOC,EAEnBD,GAAaH,EAAQI,GACzB/V,QAAQyL,IAAI,iBAAkBsK,IAG1BgB,EAAqB,CAACxc,EAASub,KACnC9V,QAAQyL,IAAI,aAAclR,GAC1B,IAAIwb,EAAU,IAAKD,GAAe5T,GAClClC,QAAQyL,IAAI,aAAcsK,GAC1B,IAAI,IAAIiB,EAAY,EAAGA,EAAYzc,EAAQuJ,OAAQkT,IAAa,CAC9D,IAAM5U,EAAS7H,EAAQyc,GAGvB,GAFAjB,EAAUjB,EAAU1S,EAAQ2T,GAEzBD,GAAekB,IAAczc,EAAQuJ,OAAS,EAAG,OAAOiS,EAEvDD,GAAaH,EAAQI,KAsD7B,MAAQ,CACNjB,EACAiC,EArDa,KACb,IAAME,EAAc5V,EAAa,KAC3BkV,EAAS,CACb7Y,GAAI1G,KAAKuK,SACTgT,eAAe,EACfC,cAAc,EACdC,UAAW,KACX1V,KAAMyC,EAAa8U,kBAAQW,GAAc/U,EAAK4B,OAAQ5B,GACtDe,MAAOgU,GAEHlB,EAAU,IAAI7T,EAAMqU,GAC1BZ,EAAQI,IAEQ,CAACzT,EAAWwT,KAK5B,IAJA,IAAIC,EAAU,IAAKD,GAAe5T,GAC5B8T,EAAY9T,EAAKI,GACjBkU,EAAuB,GACvBC,EAAyB,GACvB5B,EAAS,EAAGA,EAAS3S,EAAK4B,OAAQ+Q,IAAU,CAAC,IAAD,EAC5Che,EAAMqL,EAAK2S,IACd,UAAAhe,EAAI4d,iBAAJ,eAAe7e,QAASogB,EAAUjX,MACnCyX,EAAqBG,KAAK,CACxBrU,UAAWuS,EACXtS,QAAS,CACPU,MAAOrM,qBAAWC,EAAIoM,MAAO,CAAC,EAAG,MACjCuR,cAAc,EACdC,UAAW,QAKnB,IAAI,IAAI5B,EAAW,EAAGA,EAAW7Q,EAAO8B,OAAQ+O,IAAY,CAC1D,IAAMlW,EAAQqF,EAAO6Q,GACrB,GAAGlW,EAAMmG,aAAenG,EAAMiG,cAAgBoT,EAAUjX,KAAM,CAC5D,IAAM6X,EAAe,eAAQja,GAC7BqD,QAAQyL,IAAI,qBAAsBmL,EAAgBre,IAAK,UAAWqe,EAAgBpe,IAAK,iBACvFie,EAAuBE,KAAK,CAC1BrU,UAAWuQ,EACXtQ,QAAS,CACPO,aAAa,EACbF,YAAa,SAMlB4T,EAAqB,KAAIT,EAAUgB,EAAmBP,EAAsBT,IAC5EU,EAAuB,IAAIZ,EAAqBY,GACnDV,EAAQ5R,OAAO7B,EAAW,GAC1BqT,EAAQI,MyCzHiDmB,CACzDhV,EACAyT,EACA3T,EACA6T,GAxBkC,mBAoB7Bf,EApB6B,KAoBlBiC,EApBkB,KAoBEhC,EApBF,KAoBUC,EApBV,KA2BpC,OACE,kBAAC,IAAD,CAAQmC,SAAQ,WAAM9gB,gBACpB,kBAACqO,EAAD,KACE,4BACE,4BACE,kBAAC,IAAD,CAAM/O,GAAG,IAAT,UAEF,4BACE,kBAAC,IAAD,CAAMA,GAAG,UAAT,YAIN,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOyhB,OAAK,EAACC,KAAK,IAChB,kBAAC,EAAD,CAAWrV,OAAQA,EAAQC,UAAWA,EAAWrK,MAAOA,KAE1D,kBAAC,IAAD,CAAOyf,KAAK,UACV,kBAACxS,EAAD,KACE,kBAAC,GAAD,CACE3C,KAAMA,EACN4S,UAAWA,EACXC,OAAQA,EACRC,UAAWA,EACX+B,mBAAoBA,EACpBnf,MAAOA,IAER,IAAIoK,OAAQkS,GAAWzM,IAAI,CAAC9K,EAAOkW,IAClC,kBAAC,GAAD,CACEhW,IAAG,gBAAWgW,GACd3Q,KAAMA,EACNtK,MAAOA,EACP+E,MAAOA,EACPkW,SAAUA,EACVoB,SAAUA,EACVnB,YAAaA,EACb3Q,YAAaA,EACb4Q,WAAYA,EACZC,WAAYA,SC5ERsE,QACW,cAA7BzR,OAAO0R,SAASC,UAEe,UAA7B3R,OAAO0R,SAASC,UAEhB3R,OAAO0R,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SDyH5C,kBAAmBC,WACpBA,UAAUC,cAAcC,MAAMC,KAAKC,IACjCA,EAAaC,iB","file":"static/js/main.a2acb0ae.chunk.js","sourcesContent":["export default function (value, [min, max]) {\n  return value > max ? max : value < min ? min : value\n}\n","export default ({\n  completionRatio = 0.5,\n  range: [to, from],\n}) => {\n  const value = from + completionRatio * (to - from)\n  /*\n  console.log('||| to', to, 'from', from)\n  console.log(\"||| completionRatio\", completionRatio)\n  console.log(\"||| value\", value)\n  */\n  return value\n}\n","const miniHexToHex = miniHex => {\n  const miniHexArray = miniHex.split('')\n  const hexTemplate = [0, 0, 1, 1, 2, 2]\n  return (hexTemplate.map(idx => miniHexArray[idx]).join(''))\n}\n\nexport default {\n  proto: '[a-fA-F0-9]+',\n  draft(string) {\n    const r = new RegExp(`^${this.proto}$`)\n    return (r.test(string) && string.length <= 6)\n  },\n  final(string) {\n    return (string.length === 3 || string.length === 6)\n  },\n  exec(string) {\n    const r = new RegExp(this.proto)\n    return r.exec(string)[0]\n  },\n  process(input) {\n    const hex = this.exec(input)\n    switch(hex.length) {\n      case 6: return (`#${hex}`)\n      case 3: return (`#${miniHexToHex(hex)}`)\n      default: throw new Error(`${hex} does not contain a valid hex`)\n    }\n  },\n}\n","export default function wrapAround(value, [min, max]) {\n  while(value >= max) value -= (max - min)\n  while(value < min) value += (max - min)\n  return value\n}\n","import { wrapAround } from '../utils'\n/**\n * Gives us the relative values of the channels,\n * irrespective of the white light beneath them.\n * @param {number} hue - in degrees. Gets safely wrapped around first thing.\n *\n * DgiRed    0 ->   0\n *\n * Sunlgt   50 ->  50\n *\n * DgiYlw   60 ->  60\n *\n * Citron   70 ->  70\n *\n * Turqse  510 -> 150\n *\n * @const {number} hueReduced - hue 0-359.9 is now a floating point 0-5.999.\n *\n * DgiRed    0 ->   0  ~  0.000\n *\n * Sunlgt   50 -> 5/6  ~  0.833\n *\n * DgiYlw   60 ->   1  ~  1.000\n *\n * Citron   70 -> 7/6  ~  1.167\n *\n * Turqse  150 -> 5/2  ~  2.500\n *\n * @const {number} hueInteger - from 1-6. Tells us what color region we are in.\n *\n * DgiRed  0.000 -> 0\n *                : red-into-yellow region\n *\n * Sunlgt  0.833 -> 0\n *                : red-into-yellow region\n *\n * DgiYlw  1.000 -> 1\n *                : yellow-into-green region\n *\n * Citron  1.167 -> 1\n *                : yellow-into-green region\n *\n * Turqse  2.500 -> 2\n *                : green-into-cyan region\n *\n * hueInteger is the 'whole number' piece of hueReduced.\n * FYI, the six color regions are bounded by red, yellow, green, cyan, blue, magenta.\n *\n * @const {number} hueDecimal - tells where we are in this region.\n *\n * DgiRed  0.000 -> 0.000\n *                : at the very beginning\n *\n * Sunlgt  0.833 -> 0.833\n *                : near the end\n *\n * DgiYlw  1.000 -> 0.000\n *                : at the very beginning\n *\n * Citron  1.167 -> 0.167\n *                : near the beginning\n *\n * Turqse  2.500 -> 0.500\n *                : at the halfway point\n *\n * hueDecimal is the 'fraction' piece of hueReduced.\n * we are going to use this number to determine the value of the in-between channel.\n *\n * @const {number} x - used in primary-secondary transitions like Red into Yellow\n * @const {number} y - used in secondary-primary transitions like Yellow into Green\n   * To understand the function of x and y, take the difference between\n   *\n   * Sunlgt (hue 50),\n   * Citron (hue 70),\n   * DgiYlw (hue 60),\n   *\n   * as an instructive case. These colors are all basically yellow.\n   *\n   * Sunlgt is hue 50, which puts it near the end of the red-into-yellow region.\n     *\n     * This means its Red channel is full, and its Green channel is almost full.\n     * The fullness of its Green channel is directly proportional to its\n     * hueDecimal, the distance from the beginning of this region: 0.833\n     *\n   * Citron is hue 70, which puts it near the beginning of the yellow-into-green region.\n     *\n     * This means its Red channel is ALMOST FULL, and its Green channel is FULL.\n     * So the fullness of its Red channel is INVERSELY porportional to its\n     * hueDecimal, the distance from the beginning of this region: 1 - 0.167 = 0.833\n     *\n   * DgiYlw is hue 60, which puts it at the very beginning of the yellow-into-green region.\n     *\n     * This means its Red Channel and its Green channel must both be full.\n     * Like Citron, the fullness of DgiYlw's Red channel is inversely proporional to its\n     * hueDecimal, which is 0. Therefore DgiYlw's Red channel has a fullness of 1.\n   *\n * @returns array of values reflecting the spread between channels\n *\n * DgiRed  case 0:  [   R ===== 1       G = x = 0.000   B ===== 0      ]\n *\n * Sunlgt  case 0:  [   R ===== 1       G = x = 0.833   B ===== 0      ]\n *\n * DgiYlw  case 1:  [   R = y = 1.000   G ===== 1       B ===== 0      ]\n *\n * Citron  case 1:  [   R = y = 0.833   G ===== 1       B ===== 0      ]\n *\n * Turqse  case 2:  [   R ===== 0       G ===== 1       B = x = 0.500  ]\n *\n * here we see detailed breakdowns of the function's final output for our running examples.\n */\nexport default hue => {\n  hue = wrapAround(hue, [0, 360])\n  const hueReduced = hue / 60\n  const hueInteger = Math.floor(hueReduced)\n  const hueDecimal = hueReduced - hueInteger\n  const x = hueDecimal\n  const y = 1 - hueDecimal\n  switch(hueInteger) {\n    case 0: return [1, x, 0]\n    case 1: return [y, 1, 0]\n    case 2: return [0, 1, x]\n    case 3: return [0, y, 1]\n    case 4: return [x, 0, 1]\n    case 5: return [1, 0, y]\n    default: throw new Error(`invalid hue served: ${hue}`)\n  }\n}\n","export const HUE_STRUCTURES = {\n  none: [],\n  polar: [180],\n  split: [150, 210],\n  trine: [120, 240],\n  square: [90, 180, 270],\n}\nexport const CHANNEL_SPECIFIC_LUM = {\n  R: 0.3,\n  G: 0.5,\n  B: 0.2,\n}\n/*\nconst I'M_WONDERING_IF_THIS_IS_NOT_VERY_ACCURATE = {\n  R: 0.2126,\n  G: 0.7152,\n  B: 0.0722,\n}\n*/\n","import { CHANNEL_SPECIFIC_LUM } from \"../constants\"\nimport hueToRelativeChannels from \"../import/hueToRelativeChannels\"\n\nexport default hue => {\n  const [factorR, factorG, factorB] = hueToRelativeChannels(hue)\n\n  const lumR = CHANNEL_SPECIFIC_LUM.R * factorR\n  const lumG = CHANNEL_SPECIFIC_LUM.G * factorG\n  const lumB = CHANNEL_SPECIFIC_LUM.B * factorB\n\n  const specificLum = lumR + lumG + lumB\n\n  return specificLum\n}\n","import { wrapAround } from \"../utils\"\n\nexport default (hue, tuner) => { // 430\n  let maxSat = 255\n  const hueWrapped = wrapAround(hue, [0, 360]) // 70\n  for(let a = -1, b = 0; b < tuner.length; a++, b++) {\n    a = wrapAround(a, [0, tuner.length])\n    // console.log('||| a =', a, 'b =', b)\n    const hueDoubleWrapped = a > b ? wrapAround(hueWrapped, [-180, 180]) : undefined // undef\n    const tuningPointA = tuner[a]\n    const tuningPointB = tuner[b]\n    const hueA = a > b ? wrapAround(tuningPointA.hue, [-180, 180]) : tuningPointA.hue\n    const hueB = tuningPointB.hue\n    if(\n      (hueDoubleWrapped || hueWrapped) >= hueA &&\n      (hueDoubleWrapped || hueWrapped) < hueB) {\n      // console.log('||| hue', hue, 'is between', tuningPointA.hue, 'and', tuningPointB.hue)\n      let $ = (hueDoubleWrapped || hueWrapped) // 70\n      $ -= hueA // 70 - 50 = 20 //\n      $ /= hueB - hueA // 20 / (120 - 50) = 2/7\n      $ *= tuningPointB.sat - tuningPointA.sat // -128 * 2 / 7 = -256 / 7 ~= -37\n      $ += tuningPointA.sat\n      Math.round($)\n      // console.log('||| _', _)\n      maxSat = $\n    }\n  }\n  // console.log('--- maxSat', maxSat)\n  return maxSat\n}\n","export default ({ R, G, B }) => {\n  let hue\n  if(R > G && G >= B) hue = 60 * (0 + (G - B) / (R - B))\n  if(G >= R && R > B) hue = 60 * (2 - (R - B) / (G - B))\n  if(G > B && B >= R) hue = 60 * (2 + (B - R) / (G - R))\n  if(B >= G && G > R) hue = 60 * (4 - (G - R) / (B - R))\n  if(B > R && R >= G) hue = 60 * (4 + (R - G) / (B - G))\n  if(R >= B && B > G) hue = 60 * (6 - (B - G) / (R - G))\n  if(R === G && G === B) hue = 0\n  // console.log('||| found hue', hue)\n  return hue\n}\n","export default ({ R, G, B }) => {\n  const sat = Math.max(R, G, B) - Math.min(R, G, B)\n  // console.log('||| found sat', sat)\n  return sat\n}\n","import { CHANNEL_SPECIFIC_LUM } from '../constants'\n\nexport default ({ R, G, B }) => {\n  const lum = (\n    CHANNEL_SPECIFIC_LUM.R * R / 255 +\n    CHANNEL_SPECIFIC_LUM.G * G / 255 +\n    CHANNEL_SPECIFIC_LUM.B * B / 255\n  )\n  // console.log('||| found lum', lum)\n  return lum\n}\n","import specToChannels from \"./specToChannelsFixLimit\"\nimport channelsToHex from \"./channelsToHex\"\n\nexport default ({ hue, sat, lum, prefer, tuner }) => {\n  const { channels, fix, limit } = specToChannels({ hue, sat, lum, prefer, tuner })\n  const { R, G, B } = channels\n  const hex = channelsToHex({ R, G, B })\n\n  // console.log('--- newHex', hex)\n\n  return { hex, fix, limit }\n}\n","import hueToRelativeChannels from '../import/hueToRelativeChannels'\nimport {\n  lumFromChannels,\n  specificLumFromHue,\n  maxSatForHueFromTuner,\n} from '../solveFor'\nimport funnel from '../utils/funnel'\n\nexport default ({ hue, sat, lum, prefer = 'sat', tuner }) => {\n  /*\n  console.log('||| hue', hue)\n  console.log('||| sat', sat)\n  console.log('||| lum', lum)\n  console.log('||| prefer', prefer)\n  */\n  const relativeChannels = hueToRelativeChannels(hue)\n  function makeMinChannels(trueSaturation) {\n    const makeMinChannel = idx => Math.round(relativeChannels[idx] * trueSaturation)\n    return {\n      R: makeMinChannel(0),\n      G: makeMinChannel(1),\n      B: makeMinChannel(2),\n    }\n  }\n  let trueSaturation\n  let trueLuminosity\n  let minChannels\n  let minLum = 0\n  let maxLum = 1\n  let maxSat = maxSatForHueFromTuner(hue, tuner)\n\n  if(prefer === 'sat') {\n    trueSaturation = funnel(Math.min(sat, maxSat), [0, 255])\n    minChannels = makeMinChannels(trueSaturation)\n    const maxChannels = {\n      R: minChannels.R + 255 - trueSaturation,\n      G: minChannels.G + 255 - trueSaturation,\n      B: minChannels.B + 255 - trueSaturation,\n    }\n    minLum = lumFromChannels(minChannels)\n    maxLum = lumFromChannels(maxChannels)\n    trueLuminosity = funnel(lum, [minLum, maxLum])\n    /*\n    console.log('||| trueSaturation', trueSaturation)\n    console.log('||| idealLum', lum)\n    console.log('||| minChannels', minChannels)\n    console.log('||| minLum', minLum)\n    console.log('||| maxChannels', maxChannels)\n    console.log('||| maxLum', maxLum)\n    console.log('||| trueLuminosity', trueLuminosity)\n    */\n  }\n  if(prefer === 'lum') {\n    trueLuminosity = funnel(lum, [0, 1])\n    const specificLum = specificLumFromHue(hue)\n    maxSat = Math.min(\n      maxSat,\n      Math.round(trueLuminosity <= specificLum\n        ? 255 * (trueLuminosity / specificLum)\n        : 255 * (1 - trueLuminosity) / (1 - specificLum))\n    )\n    trueSaturation = Math.min(sat, maxSat)\n    minChannels = makeMinChannels(trueSaturation)\n    minLum = lumFromChannels(minChannels)\n    /*\n    console.log('||| trueLuminosity', trueLuminosity)\n    console.log('||| lumAtSat255', lumAtSat255)\n    console.log('||| maxSat', maxSat)\n    console.log('||| trueSaturation', trueSaturation)\n    console.log('||| minChannels', minChannels)\n    */\n  }\n  const maxWhite = (255 - Math.max(...Object.values(minChannels)))\n  const white = funnel(\n    Math.round((trueLuminosity - minLum) * 255),\n    [0, maxWhite]\n  )\n  const { R, G, B } = {\n    R: minChannels.R + white,\n    G: minChannels.G + white,\n    B: minChannels.B + white,\n  }\n  /*\n  console.log('||| maxWhite', maxWhite)\n  console.log('||| white', white)\n  console.log('||| R', R)\n  console.log('||| G', G)\n  console.log('||| B', B)\n  */\n  return {\n    channels: { R, G, B },\n    fix: {\n      sat: trueSaturation,\n      lum: trueLuminosity,\n    },\n    limit: {\n      sat: [0, maxSat],\n      lum: [prefer === 'lum' ? 0 : minLum, maxLum],\n    },\n  }\n}\n","export default channels =>\n  `#${Object.values(channels).map(channel => {\n    let channelHex = channel.toString(16)\n    if(channelHex.length === 1) channelHex = 0 + channelHex\n    return channelHex\n  }).join('')}`\n","import specToHexFixLimit from \"./specToHexFixLimit\"\n\nexport default ({ hue, sat, lum, prefer, tuner }) => {\n  const { hex } = specToHexFixLimit({ hue, sat, lum, prefer, tuner })\n  return hex\n}\n","import { specToHex } from '.' // eslint-disable-line\nimport { interpolate } from '../utils'\n\nfunction interpolateChanges(rootSpec, currentStep, axes) {\n  const changes = {}\n  for(let axisIdx = 0; axisIdx < axes.length; axisIdx++) {\n    const currentAxis = axes[axisIdx]\n    const { attribute, relative } = currentAxis\n    const rootValue = rootSpec[attribute]\n    const to = () => {\n      switch(typeof currentAxis.to) {\n        case 'number':\n          if(!relative) return currentAxis.to\n          return rootValue + currentAxis.to\n        case 'function':\n          return currentAxis.to(rootSpec[attribute])\n        default: throw new Error((\n          `gradient axis type error:\\n` +\n          `currentAxis.to is ${currentAxis.to} (type: ${typeof currentAxis.to})\\n` +\n          `type must be\\n` +\n          `* 'number'    (for absolute values) or\\n` +\n          `* 'function'  (for values relative to the root value).`\n        ))\n      }\n    }\n    const from = () => {\n      switch(typeof currentAxis.from) {\n        case 'undefined':\n          return rootSpec[attribute]\n        case 'number':\n          if(!relative) return currentAxis.from\n          return rootValue + currentAxis.from\n        case 'function':\n          return currentAxis.from(rootSpec[attribute])\n        default: throw new Error((\n          `gradient axis type error:\\n` +\n          `currentAxis.from is ${currentAxis.from} (type: ${typeof currentAxis.from})\\n` +\n          `type must be\\n` +\n          `* 'undefined' (to default to the root value)\\n` +\n          `* 'number'    (for absolute values) or\\n` +\n          `* 'function'  (for values relative to the root value).`\n        ))\n      }\n    }\n    const value = interpolate({\n      completionRatio: currentStep,\n      range: [to(), from()],\n    })\n    changes[attribute] = value\n  }\n  // console.log('>>> changes', changes)\n  return changes\n}\n\nfunction gradientToHexArray(rootSpec, gradient, tuner) {\n  const { steps, axes, prefer } = gradient\n  const hexArray = []\n  for(let stepIdx = 0; stepIdx < steps.length; stepIdx++) {\n    const currentStep = steps[stepIdx]\n    const changes = interpolateChanges(\n      rootSpec,\n      currentStep,\n      axes,\n    )\n    const hex = specToHex({\n      ...rootSpec,\n      ...changes,\n      prefer,\n      tuner,\n    })\n    hexArray.push(hex)\n  }\n  return hexArray\n}\n\nexport default (originalColorObject, tuner) => {\n  const { gradients } = originalColorObject\n  const { hue, sat, lum } = originalColorObject\n  const rootSpec = { hue, sat, lum }\n  const hexArrays = []\n  for(let gradientIdx = 0; gradientIdx < gradients.length; gradientIdx++) {\n    const gradient = gradients[gradientIdx]\n    const hexArray = gradientToHexArray(rootSpec, gradient, tuner)\n    hexArrays.push(hexArray)\n  }\n  return hexArrays\n}\n","import {\n  hueFromChannels,\n  satFromChannels,\n  lumFromChannels,\n} from \"../solveFor\"\n\nexport default ({ R, G, B }) => {\n  const hue = hueFromChannels({ R, G, B })\n  const sat = satFromChannels({ R, G, B })\n  const lum = lumFromChannels({ R, G, B })\n  return { hue, sat, lum }\n}\n","import { validateHex } from \"../utils\"\n\nexport default hex => {\n  const validated = validateHex.process(hex)\n  const channel = idx => parseInt(validated.substr((idx * 2 + 1), 2), 16)\n  return {\n    R: channel(0),\n    G: channel(1),\n    B: channel(2),\n  }\n}\n","import hexToChannels from \"./hexToChannels\"\nimport channelsToSpec from \"./channelsToSpec\"\n\nexport default hex => {\n  const { R, G, B } = hexToChannels(hex)\n  /*\n  console.log('+++ input hex', hex)\n  console.log('||| R', R)\n  console.log('||| G', G)\n  console.log('||| B', B)\n  */\n  const { hue, sat, lum } = channelsToSpec({ R, G, B })\n  return { hue, sat, lum }\n}\n","import { specToHex } from './export'\nimport { hexToSpec } from './import'\nimport { specificLumFromHue } from './solveFor'\n\nexport function mixPalettes({\n  palettes,\n  hexes,\n  ops,\n  place: [paletteIdx, stateKey, elementKey] = [0, null, null],\n}) {\n  if(!Array.isArray(palettes) || palettes.length === 0) throw new Error('Must provide at least one palette')\n\n  let palettes_ = [...palettes]\n  const palette = palettes_[paletteIdx]\n  const state = stateKey\n    ? palette.states[stateKey]\n    : null\n  const element = elementKey\n    ? state.elements[elementKey]\n    : null\n  const destination = element || state || palette\n  const origin = element ? state : palette\n\n  if(!origin && hexes.length === 0) throw new Error('Must provide at least one hex')\n\n  if(!origin.color) origin.color = hexToSpec(hexes[0])\n  let color  = { ...origin.color }\n\n  const opsEntries = Object.entries(ops)\n  /*\n  console.log(\"--- from\", { ...origin }.id, 'to', { ...destination }.id,\n    `[${paletteIdx}, ${stateKey}, ${elementKey}]`,\n  )\n  console.log(\"    ||| origin\", origin)\n  console.log(\"    ||| hexes\", hexes)\n  console.log(\"    ||| color\", color)\n  console.log(\"    ||| ops\", ops)\n  console.log(\"    ||| palette\", [...palette])\n  */\n  for(let idx = 0; idx < opsEntries.length; idx++) {\n    const [key, value] = opsEntries[idx]\n    /*\n    console.log(\"    > color\", ...color)\n    console.log('     ', key)\n    console.log('     ', value)\n    */\n    switch(key) {\n      case 'color': // change colors\n        // capture currentColor in palette\n        switch(typeof value) {\n          case 'number':\n            color = hexToSpec(hexes[value])\n            break\n          case 'string':\n            hexes.unshift(value)\n            color = hexToSpec(value)\n            break\n          default: throw new Error(`'color' accepts types 'string' or 'number'; got type '${typeof value}'`)\n        }\n        break\n      case 'hue':\n      case 'sat':\n      case 'lum':\n        switch(typeof value) {\n          case 'number':\n            color[key] = value\n            break\n          case 'function':\n            color[key] = value(color[key])\n            break\n          default: throw new Error(`hue, sat, lum accept types 'number' or 'function'; got type '${typeof value}'`)\n        }\n        break\n      case 'contrast':\n        switch(value) {\n          case 'hard': color.lum = color.lum > 0.67\n            ? 0\n            : 1\n            break\n          case 'soft': color.lum = color.lum > 0.67\n            ? 0.05\n            : 0.95\n            break\n          case 'harden': color.lum = color.lum > 0.67\n            ? 0\n            : 1\n            break\n          default: throw new Error(`'contrast' accepts 'hard' or 'soft'; got '${value}'`)\n        }\n        color.prefer = 'lum'\n        break\n      case 'split':\n      case 'trine':\n      case 'tetra': break\n      case 'warm':\n      case 'cool': break\n      case 'amp':\n      case 'mute': break\n      case 'tint':\n      case 'shade':\n        const percentSaturated = color.sat / 255\n        const specificLum = specificLumFromHue(color.hue)\n        const lightAdjust = 0.5 * (1 - percentSaturated) + specificLum * percentSaturated\n        const charge = key === 'tint' ? 100 : -100\n        const offset = lightAdjust * value / charge\n        // console.log('lightAdjust', lightAdjust)\n        // console.log('offset', offset)\n        color.lum += offset\n        if(color.lum < 0 || color.lum > 1) color.lum -= 2.5 * offset\n        color.prefer = 'lum'\n        break\n      case 'holds':\n        const holdsEntries = Object.entries(value)\n        for(let holdsEntryIdx = 0; holdsEntryIdx < holdsEntries.length; holdsEntryIdx++) {\n          const [subPaletteId, subPaletteOps] = holdsEntries[holdsEntryIdx]\n          const externalElements = {}\n          const baseElementsEntries = Object.entries(palette.states.base.elements)\n          for(let baseElementsIdx = 0; baseElementsIdx < baseElementsEntries.length; baseElementsIdx++) {\n            const [baseElementKey, baseElementValue] = baseElementsEntries[baseElementsIdx]\n            externalElements[`ex-${baseElementKey}`] = baseElementValue\n          }\n          palettes_.push({\n            id: subPaletteId,\n            color: palettes_[0].color,\n            states: { base: { id: 'base', elements: externalElements } },\n          })\n          palettes_ = mixPalettes({\n            palettes: palettes_,\n            hexes,\n            ops: subPaletteOps,\n            place: [palettes_.length - 1, null, null],\n          })\n        }\n        break\n      case 'state':\n        const stateEntries = Object.entries(value)\n        if(!element) {\n          for(let stateEntryIdx = 0; stateEntryIdx < stateEntries.length; stateEntryIdx++) {\n            const [stateKey_, stateOps] = stateEntries[stateEntryIdx]\n            // console.log('    ||| stateEntry', stateKey_, stateOps)\n            palette.states[stateKey_] = {\n              id: stateKey_,\n              elements: {},\n            }\n            palette.states[stateKey_].color = mixPalettes({\n              palettes,\n              hexes,\n              ops: stateOps,\n              place: [paletteIdx, stateKey_, null],\n            })\n            // console.log('      ', palette.states[stateKey_].hex)\n          }\n        } else {\n          for(let stateEntryIdx = 0; stateEntryIdx < stateEntries.length; stateEntryIdx++) {\n            const [stateKey_, stateOps] = stateEntries[stateEntryIdx]\n            // console.log('    ||| >>> stateEntry', stateKey_, stateOps)\n            // console.log('    ||| >>> elementKey', elementKey)\n            const state_ = palette.states[stateKey_]\n            if(!state_.elements[elementKey]) state_.elements[elementKey] = {}\n            palette.states[stateKey_].elements[elementKey].hex = mixPalettes({\n              palettes,\n              hexes,\n              ops: stateOps,\n              place: [paletteIdx, stateKey_, elementKey],\n            })\n          }\n        } break\n      default:\n        const elementKey_ = key\n        const stateKeys = Object.keys(palette.states)\n        for(let stateKeysIdx = 0; stateKeysIdx < stateKeys.length; stateKeysIdx++) {\n          const stateKey_ = stateKeys[stateKeysIdx]\n          const state_ = palette.states[stateKey_]\n          // console.log('    ||| state_', state_)\n          state_.elements[elementKey_] = { id: elementKey_ }\n          state_.elements[elementKey_].color = mixPalettes({\n            palettes,\n            hexes,\n            ops: value,\n            place: [paletteIdx, stateKey_, elementKey_],\n          })\n        }\n    }\n    // hex = specToHex({ ...color, tuner })\n    destination.color = color\n    if(!state) destination.states.base.color = color\n\n    // console.log(\"    < color\", color, color)\n    // console.log(\"      set\", { ...destination }.id)\n  }\n  if(element || state) {\n    // console.log('---', destination.id, 'color', color)\n    return color\n  }\n  // console.log('--- returning palettes_', palettes_)\n  return palettes_\n}\n\nfunction paletteToScssBlock(palette, tuner) {\n  let scssBlock = ''\n  const baseEntries = Object.entries(palette.states.base.elements)\n  for(let baseIdx = 0; baseIdx < baseEntries.length; baseIdx++) {\n    const [key, element] = baseEntries[baseIdx]\n    scssBlock += `  --${key}-color: ${specToHex({ ...element.color, tuner })};\\n`\n  }\n  const stateEntries = Object.entries(palette.states)\n  for(let stateIdx = 0; stateIdx < stateEntries.length; stateIdx++) {\n    const [stateKey, stateObj] = stateEntries[stateIdx]\n    // console.log('stateKey', stateKey)\n    switch(stateKey) {\n      case 'hover':\n        scssBlock += `  &:hover, &:focus, &:focus-within {\\n`\n        break\n      case 'active':\n        scssBlock += `  &:active, &.active {\\n`\n        break\n      case 'disabled':\n        scssBlock += `  &:disabled, &.disabled {\\n`\n        break\n      default: continue\n    }\n    const elementEntries = Object.entries(stateObj.elements)\n    for(let elementIdx = 0; elementIdx < elementEntries.length; elementIdx++) {\n      const [key, element] = elementEntries[elementIdx]\n      scssBlock += `    --${key}-color: ${specToHex({ ...element.color, tuner })};\\n`\n    }\n    scssBlock += '  }\\n'\n  }\n  return scssBlock\n}\n\nfunction paletteToScssClassRule(palette, tuner) {\n  let scssRule = `.${palette.id} {\\n`\n  scssRule += paletteToScssBlock(palette, tuner)\n  scssRule += '}\\n'\n  return scssRule\n}\nexport function compileScssSheet(palettes, tuner) {\n  let scssSheet = ''\n  for(let idx = 0; idx < palettes.length; idx++) {\n    const palette = palettes[idx]\n    const scssRule = paletteToScssClassRule(palette, tuner)\n    scssSheet += `${scssRule}`\n  }\n  return scssSheet\n}\n\nfunction makeScssObject(palettes, tuner) {\n  const scssObject = {}\n  for(let index = 0; index < palettes.length; index++) {\n    const palette = palettes[index]\n    scssObject[palette.id] = paletteToScssBlock(palette, tuner)\n  }\n  return scssObject\n}\n\nconst paletteTemplate = name => ({\n  id: name,\n  states: { base: { elements: {} } },\n})\nexport default function makeColorPalettesFromHexes({ hexes, scheme, tuner }) {\n  const schemeEntries = Object.entries(scheme)\n  let palettes = []\n  for(let idx = 0; idx < schemeEntries.length; idx++) {\n    const [name, ops] = schemeEntries[idx]\n    const newPalettes = mixPalettes({\n      palettes: [paletteTemplate(name)],\n      hexes,\n      ops,\n    })\n    palettes = [...palettes, ...newPalettes]\n  }\n  const scss = makeScssObject(palettes, tuner)\n  // console.log(scss)\n  return scss\n}\n","import { wrapAround } from \"../utils\"\n\nconst rangeNames = [\n  { hue: 20,\n    name: 'orange' },\n  { hue: 45,\n    name: 'yellow' },\n  { hue: 61,\n    name: 'citron' },\n  { hue: 80,\n    name: 'lime' },\n  { hue: 100,\n    name: 'green' },\n  { hue: 150,\n    name: 'teal' },\n  { hue: 180,\n    name: 'cyan' },\n  { hue: 200,\n    name: 'blue' },\n  { hue: 240,\n    name: 'indigo' },\n  { hue: 270,\n    name: 'violet' },\n  { hue: 290,\n    name: 'magenta' },\n  { hue: 330,\n    name: 'pink' },\n  { hue: 350,\n    name: 'red' },\n]\n\nexport default hue => {\n  console.log('||| hue', hue)\n  const hueWrapped = wrapAround(hue, [0, 360])\n  for(let a = -1, b = 0; b < rangeNames.length; a++, b++) {\n    a = wrapAround(a, [0, rangeNames.length])\n    const hueDoubleWrapped = a > b ? wrapAround(hueWrapped, [-180, 180]) : undefined\n    const namingPointA = rangeNames[a]\n    const namingPointB = rangeNames[b]\n    const hueA = a > b ? wrapAround(namingPointA.hue, [-180, 180]) : namingPointA.hue\n    const hueB = namingPointB.hue\n    if(\n      (hueDoubleWrapped || hueWrapped) >= hueA &&\n      (hueDoubleWrapped || hueWrapped) < hueB) {\n      console.log('||| hue', hue,\n        'is between', namingPointA.hue,\n        'and', namingPointB.hue,\n        'therefore it is named', namingPointA.name)\n      return namingPointA.name\n    }\n  }\n}\n","export default {\n  noFilter: [\n    { sat: 255, hue: 0 },\n    { sat: 255, hue: 360 },\n  ],\n  simulateCMYK: [\n    { sat: 255, hue: 55 },\n    { sat: 127, hue: 120 },\n    { sat: 255, hue: 200 },\n    { sat: 255, hue: 205 },\n    { sat: 170, hue: 240 },\n    { sat: 230, hue: 270 },\n    { sat: 210, hue: 300 },\n    { sat: 255, hue: 320 },\n  ],\n}\n","import hexToSpec from './import/hexToSpec'\nimport specToHex from './export/specToHex'\n\nexport default ({\n  hex,\n  tuner,\n  offsets,\n}) => {\n  const rootSpec = hexToSpec(hex)\n  const changes = {}\n  for(let index = 0; index < offsets.length; index++) {\n    const { attribute, offsetValue } = offsets[index]\n    const rootValue = rootSpec[attribute]\n    const { sat } = rootSpec\n    let newValue\n    switch(attribute) {\n      case 'hue':\n      case 'sat':\n        newValue = rootValue + offsetValue\n        break\n      case 'lum':\n        if(offsetValue + rootValue < 0 || offsetValue + rootValue > 1) {\n          newValue = rootValue - (offsetValue - (sat >= 170 ? offsetValue * (sat - 170) / 85 : 0)) * 1.67\n        } else { newValue = rootValue + (offsetValue - (sat >= 170 ? 0.333 * offsetValue * (sat - 170) / 85 : 0)) }\n        break\n      default:\n        throw new Error('Received spec attribute other than \"hue,\" \"sat,\" or \"lum.\"')\n    }\n    changes[attribute] = newValue\n  }\n  const newHex = specToHex({\n    ...rootSpec,\n    ...changes,\n    prefer: 'lum',\n    tuner,\n  })\n  return newHex\n}\n","import hexToSpec from './import/hexToSpec'\n\nexport default hex => {\n  const { lum } = hexToSpec(hex)\n  const standOut = lum > 0.666\n    ? 'black'\n    : 'white'\n  return standOut\n}\n\n// input: red\n// hard standout: white","import { specToHex } from './export'\nimport { hexToSpec } from './import'\n\nexport function hardContrast(hex) {\n  const { lum } = hexToSpec(hex)\n  const contrast = lum > 0.666\n    ? 'black'\n    : 'white'\n  return contrast\n}\n\nexport function softContrast(hex, tuner) {\n  const rootSpec = hexToSpec(hex)\n  const newLum = rootSpec.lum > 0.666\n    ? 0.05\n    : 0.95\n  const newHex = specToHex({\n    ...rootSpec,\n    lum: newLum,\n    prefer: 'lum',\n    tuner,\n  })\n  return newHex\n}\n\n// input: red\n// hard standout: white\n","export default { trifactory: {\n  PaletteModule: {\n    color: 0,\n    bg: { },\n    mg: { shade: 10 },\n    fg: { contrast: 'soft' },\n    holds: {\n      Control: {\n        state: {\n          hover: { },\n          active: { },\n          disabled: { },\n        },\n        bg: {\n          shade: 24,\n          state: {\n            base: {},\n            hover: { shade: 18 },\n            active: { shade: 32 },\n            disabled: { shade: 32 },\n          },\n        },\n        mg: {\n          shade: 48,\n        },\n        fg: {\n          contrast: 'soft',\n          state: {\n            hover: { contrast: 'harden' },\n            active: { contrast: 'harden' },\n            disabled: { shade: 20 },\n          },\n        },\n      },\n    },\n  },\n} }\n\n// Example:\n/* ```\n[\n  [<component-name>, {\n    'rootColor': [],\n    'variables': [],\n    'children': [<recurse>]\n  }],\n  []\n]\n\n// transforms: shade, tint, contrast, sat, lum, hue\n\n```\n*/\nexport const trifactory = {\n  PaletteModule: {\n    contextColor: [\n      { resetColor: '#fee' }, { shade: 20 },\n    ],\n    /*\n    // NOTE: These state changes are localized to the current\n    // object, and have no impact on children.\n    states: {\n      hover: [{tint: 10}, {shade: 22}],\n    },\n    */\n    // NOTE: these variables get included into each child\n    // as ex-<variable-name>\n    variables: {\n      bg: [],\n      mg: [{ resetColor: 1 }, { shade: 10 }],\n      fg: [{ contrast: 'soft' }],\n    },\n    children: {\n      Control: {\n        // NOTE: All these colors start with the contextColor\n        // and not with the ex-color from parent\n        states: {\n          base: {},\n          hover: [{ tint: 12 }],\n          active: [{ shade: 18 }],\n        },\n        variables: {\n          bg: [{ shade: 24 }],\n          mg: [{ shade: 48 }],\n          fg: {\n            // NOTE: All these colors start with a context of the\n            // existing state of the parent.\n            states: {\n              base: [{ shade: 24 }, { contrast: 'soft' }],\n              hover: [{ shade: 24 }, { contrast: 'soft' }],\n              active: [{ shade: 24 }, { contrast: 'hard' }],\n            },\n          },\n        },\n      },\n    },\n  },\n}\n\n// color scheme  ->           = CSS stylesheet\n// color palette -> component = CSS scope\n// color element -> role      = CSS variable\n// color state   ->             CSS pseudo-class\n\n// factored ops -> nested hex lists -> compiled form (CSS)\n// scheme       -> palette set      -> package\n\n// ops\n// _ PaletteName   // use\n// _ transformation\n// _ input > state\n// _ el\n\n/* scheme\n\n*/\n\n// palettes\nexport const palettes = [\n  {\n    id: 'PaletteName',\n    hex: '#f00',\n    states: [\n      {\n        id: 'base',\n        hex: '#f00',\n        elements: [\n          { id: 'bg',\n            hex: '#f00' },\n          { id: 'mg',\n            hex: '#f00' },\n          { id: 'fg',\n            hex: '#f00' },\n        ],\n      },\n      {\n        id: 'hover',\n        hex: '#f00',\n        elements: [\n          { id: 'bg',\n            hex: '#f00' },\n          { id: 'mg',\n            hex: '#f00' },\n          { id: 'fg',\n            hex: '#f00' },\n        ],\n      },\n    ],\n  },\n]\n\n/*\nconst colorSchema = {\n  exfg: colorContext.softContrast,\n  exbg: hex,\n  fg: {\n    base: colorContext.softContrast,\n    hover: colorContext.softContrast,\n    active: colorContext.hardContrast,\n    disable: a,\n  },\n  mg: [20, 15, 25].map(n => shade(n)),\n  bg: [10, 5, 15].map(n => shade(n)),\n}\n\nconst stylesheet = `\na\n`\n*/\n","// developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\n\nexport default function getRandomInt(max) {\n  return Math.floor(Math.random() * Math.floor(max))\n}\n","export default function numberedName(name, selfIdx, registry) {\n  const nameTemplate = int => `${name}_${int}`\n  let generatedName = name\n  const sameName = (entry, idx) => entry.name === generatedName && idx !== selfIdx\n  for(let index = 2; registry.some(sameName); index++) {\n    generatedName = nameTemplate(index)\n  }\n  return generatedName\n}\n","import {\n  HUE_STRUCTURES,\n  wrapAround,\n  nameHue,\n  funnel,\n} from 'luum'\nimport getRandomInt from '../util/getRandomInt'\nimport numberedName from '../util/numberedName'\n\nconst getDerivedContent = () => ({})\n\nexport default (hues, setHues, colors, applyChangesToColors) => {\n  const changeHue = (change, workingHues) => {\n    let newHues = [...(workingHues || hues)]\n    const { targetIdx, content } = change\n    const targetHue = newHues[targetIdx]\n    const derivedContent = getDerivedContent()\n    if(content.deriveHue) {\n      const { from, via, to } = content.deriveHue\n      console.log(from, via, to)\n      const originalHue = newHues.find(hue => hue.name === from)\n      const structure = HUE_STRUCTURES[via]\n      const angle = originalHue.angle + structure[funnel(to, [0, structure.length - 1])]\n      derivedContent.angle = angle\n    // console.log('||| originalHue', originalHue)\n    // console.log('||| angle', angle)\n    }\n    const unlinkingHue = content.hueIsDerived === false\n    if(unlinkingHue) {\n      derivedContent.angle = wrapAround(\n        content.angle || derivedContent.angle || targetHue.angle,\n        [0, 360])\n    }\n    const { nameIsDerived } = targetHue\n    const nameIsDerivedUnchanged = typeof content.nameIsDerived === 'undefined'\n    const nameRemainsDerived = nameIsDerived && nameIsDerivedUnchanged\n    const nameBecomesDerived = content.nameIsDerived\n    if(nameRemainsDerived || nameBecomesDerived) {\n      derivedContent.name = numberedName(nameHue(wrapAround(\n        content.angle || derivedContent.angle || targetHue.angle,\n        [0, 360])\n      ),\n      targetIdx, hues)\n      console.log('derivedContent', derivedContent)\n    }\n    const newHue = { ...targetHue, ...content, ...derivedContent }\n    newHues.splice(targetIdx, 1, newHue)\n    /*\n  console.log('||| targetHue', { ...targetHue })\n  console.log('||| content', { ...content })\n  console.log('||| derivedContent', { ...derivedContent })\n  console.log('||| newHue', { ...newHue })\n  console.log('||| newHues', [...newHues])\n  */\n    const hueChangesDownstream = []\n    const colorChangesDownstream = []\n    for(let hueIdx = 0; hueIdx < hues.length; hueIdx++) {\n      const hue = hues[hueIdx]\n      if(hue.deriveHue?.from === targetHue.name && hue.hueIsDerived === true) {\n        const downstreamHue = { ...hue }\n        console.log('~~~ hue named', downstreamHue.name, 'is downstream')\n        const { deriveHue } = downstreamHue\n        deriveHue.from = newHue.name\n        hueChangesDownstream.push({\n          targetIdx: hueIdx,\n          content: { deriveHue },\n        })\n      }\n    }\n    for(let colorIdx = 0; colorIdx < colors.length; colorIdx++) {\n      const color = colors[colorIdx]\n      if(color.linkedToHue === targetHue.name) {\n        let content\n        if(color.hueIsLinked) {\n          const downstreamColor = { ...color }\n          console.log('~~~ color with sat', downstreamColor.sat, 'and lum', downstreamColor.lum, 'is downstream')\n          const newLinkedToHue = newHue.name\n          const newHueAngle = newHue.angle\n          content = {\n            linkedToHue: newLinkedToHue,\n            hue: wrapAround(newHueAngle, [0, 360]),\n          }\n        } else {\n          content = { linkedToHue: null }\n        }\n        colorChangesDownstream.push({\n          targetIdx: colorIdx,\n          content,\n        })\n      }\n    }\n    console.log('    hueChangesDownstream', ...hueChangesDownstream)\n    console.log('    colorChangesDownstream', ...colorChangesDownstream)\n    // invoke side tasks with lists of changes\n    if(hueChangesDownstream[0]) newHues = applyChangesToHues(hueChangesDownstream, newHues)\n    if(colorChangesDownstream[0]) applyChangesToColors(colorChangesDownstream)\n    // if this is a side task, return work in progress\n    if(workingHues) return newHues\n    // if this is not a side task, finish main task\n    if(!workingHues) setHues(newHues)\n    console.log('    newHues', ...newHues)\n  }\n\n  const applyChangesToHues = (changes, workingHues) => {\n    console.log('changes', ...changes)\n    let newHues = [...(workingHues || hues)]\n    console.log('newHues', ...newHues)\n    for(let changeIdx = 0; changeIdx < changes.length; changeIdx++) {\n      const change = changes[changeIdx]\n      newHues = changeHue(change, newHues)\n      // if this is the last of the sidetasks, report back to main task\n      if(workingHues && changeIdx === changes.length - 1) return newHues\n      // if this is not a side task, finish main task\n      if(!workingHues) setHues(newHues)\n    }\n  }\n  const addHue = () => {\n    const randomAngle = getRandomInt(360)\n    const newHue = {\n      id: Math.random(),\n      nameIsDerived: true,\n      hueIsDerived: false,\n      deriveHue: null,\n      name: numberedName(nameHue(randomAngle), hues.length, hues),\n      angle: randomAngle,\n    }\n    const newHues = [...hues, newHue]\n    setHues(newHues)\n  }\n  const deleteHue = (targetIdx, workingHues) => {\n    let newHues = [...(workingHues || hues)]\n    const targetHue = hues[targetIdx]\n    const hueChangesDownstream = []\n    const colorChangesDownstream = []\n    for(let hueIdx = 0; hueIdx < hues.length; hueIdx++) {\n      const hue = hues[hueIdx]\n      if(hue.deriveHue?.from === targetHue.name) {\n        hueChangesDownstream.push({\n          targetIdx: hueIdx,\n          content: {\n            angle: wrapAround(hue.angle, [0, 360]),\n            hueIsDerived: false,\n            deriveHue: null,\n          },\n        })\n      }\n    }\n    for(let colorIdx = 0; colorIdx < colors.length; colorIdx++) {\n      const color = colors[colorIdx]\n      if(color.hueIsLinked && color.linkedToHue === targetHue.name) {\n        const downstreamColor = { ...color }\n        console.log('~~~ color with sat', downstreamColor.sat, 'and lum', downstreamColor.lum, 'is downstream')\n        colorChangesDownstream.push({\n          targetIdx: colorIdx,\n          content: {\n            hueIsLinked: false,\n            linkedToHue: null,\n          },\n        })\n      }\n    }\n    // console.log('    hueChangesDownstream', ...hueChangesDownstream)\n    if(hueChangesDownstream[0]) newHues = applyChangesToHues(hueChangesDownstream, newHues)\n    if(colorChangesDownstream[0]) applyChangesToColors(colorChangesDownstream)\n    newHues.splice(targetIdx, 1)\n    setHues(newHues)\n  }\n  return ([\n    changeHue,\n    applyChangesToHues,\n    addHue,\n    deleteHue,\n  ])\n}\n","import { specToHexFixLimit, wrapAround } from 'luum'\nimport getRandomInt from '../util/getRandomInt'\n\nconst deriveCompleteChange = (content, targetColor, hues) => {\n  const contentDerived = {}\n  const hueWillChange = content.hue\n  const colorHasLinkedHue = targetColor.linkedToHue\n  const hueIsNotLinked = !targetColor.hueIsLinked\n  if(hueWillChange && colorHasLinkedHue && hueIsNotLinked) {\n    contentDerived.linkedToHue = null\n  }\n  const hueToLink = content.linkedToHue\n  if(hueToLink && !hueWillChange) {\n    contentDerived.hue = wrapAround(\n      hues.find(hue => hue.name === hueToLink).angle,\n      [0, 360]\n    )\n  }\n  const willLinkToNull = hueToLink === null\n  if(willLinkToNull) contentDerived.hueIsLinked = false\n  return contentDerived\n}\n\nexport default (colors, setColors, tuner, hues) => {\n  const changeColor = change => {\n    const newColors = [...colors]\n    const { targetIdx, content } = change\n    const targetColor = newColors[targetIdx]\n    const contentDerived = deriveCompleteChange(content, targetColor, hues)\n    const contentComplete = { ...content, ...contentDerived }\n    const newHistory = { ...targetColor.history }\n    let newMarker = newHistory.marker\n    const newTimeline = newHistory.timeline\n    switch(change.fromHistory) {\n      case 'undo': newMarker += 1; break\n      case 'redo': newMarker -= 1; break\n      default:\n        const contentInverse = {}\n        const contentKeys = Object.keys(contentComplete)\n        for(let index = 0; index < contentKeys.length; index++) {\n          const contentKey = contentKeys[index]\n          contentInverse[contentKey] = targetColor[contentKey]\n        }\n        const newTimelineStep = {\n          undo: contentInverse,\n          redo: { ...content, ...contentDerived },\n        }\n        newTimeline.splice(0, newMarker, newTimelineStep)\n        newMarker = 0\n      // console.log('||| newMarker', newMarker)\n    }\n    newHistory.timeline = newTimeline\n    newHistory.marker = newMarker\n    const newColor = {\n      ...targetColor,\n      ...contentComplete,\n      history: newHistory,\n    }\n    newColors.splice(targetIdx, 1, newColor)\n    setColors(newColors)\n    /*\n  console.log('change.fromHistory', change.fromHistory)\n  console.log('newHistory', newHistory)\n  console.log('timeline', ...newTimeline)\n  */\n  }\n  const applyChangesToColors = changes => {\n    for(let index = 0; index < changes.length; index++) {\n      const change = changes[index]\n      changeColor(change)\n    }\n  }\n  const traverseTimeline = (targetColorIdx, direction) => {\n    const { timeline, marker } = colors[targetColorIdx].history\n    const markerFromDirection =  direction === 'undo' ? marker : marker - 1\n    if(typeof timeline[markerFromDirection] === 'undefined') return\n    changeColor({\n      targetIdx: targetColorIdx,\n      content: timeline[markerFromDirection][direction],\n      fromHistory: direction,\n    })\n  }\n  const undoChange = targetColorIdx => traverseTimeline(targetColorIdx, 'undo')\n  const redoChange = targetColorIdx => traverseTimeline(targetColorIdx, 'redo')\n\n  const addColor = hue => {\n    const randomColorData = {\n      hue: hue.angle,\n      sat: getRandomInt(256),\n      lum: Math.random(),\n      prefer: 'sat',\n    }\n    const { fix } = specToHexFixLimit({ ...randomColorData, tuner })\n    const newColor = {\n      ...randomColorData,\n      ...fix,\n      id: Math.random(),\n      hueIsLinked: true,\n      linkedToHue: hue.name,\n      history: {\n        marker: 0,\n        timeline: [],\n      },\n      gradients: [],\n    }\n    const newColors = [...colors, newColor]\n    setColors(newColors)\n  }\n  const deleteColor = targetColorIdx => {\n    const newColors = [...colors]\n    newColors.splice(targetColorIdx, 1)\n    setColors(newColors)\n  }\n\n  return [\n    changeColor,\n    applyChangesToColors,\n    undoChange,\n    redoChange,\n    addColor,\n    deleteColor,\n  ]\n}\n","import styled from 'styled-components'\n\nexport const DemoSelect = styled.nav`\nul { \n  list-style-type: none;\n  display: flex;\n  margin-block-start: 0;\n  margin-block-end: 0;\n  margin-inline-start: 0;\n  margin-inline-end: 0;\n  padding-inline-start: 0;\n  > li {\n    padding: 10px;\n    color: white;\n    a {\n      text-decoration: solid underline white 1px;\n      text-underline-offset: .5px;\n      &:active, &:visited { \n        color: white;\n      } \n    } \n  }\n}\n`\n\nexport const TilesDemo = styled.div``\n\nexport const ColorLogicDemo = styled.div`\nbackground-color: #111;\ntext-align: center;\nmin-height: calc(100vh - 10vw + 40px);\nwidth: 100vw;\npadding: calc(5vw - 20px) 0;\n> section { \n  width: 90vw;\n  padding: 20px;\n  margin: auto;\n  > * + * { margin-top: 10px; }\n}\n> section + section { margin-top: calc(5vw - 20px); }\n`\nexport const GradientRow = styled.div`\ndisplay: inline-flex;\nwidth: 100%;\nheight: 100px;\nmargin-bottom: ${props => props.shadeRange ? `-10px` : `0px`}\n`\nexport const ControlCluster = styled.div`\ndisplay: flex;\nflex-grow: 0;\ngrid-area: ${props => props.gridArea};\n> * + * { margin-left: 2px }\n`\nexport const ControlStrip = styled.div`\ndisplay: flex;\n> * + * { margin-left:10px }\n`\nexport const ControlStripSpacer = styled.div`\nflex-grow: 1;\n`\nexport const PreviewArea = styled.div`\nheight: 100px;\nmargin-bottom: 20px;\n> button {\n  background: ${props => props.hex};\n  height: 100px;\n  width: 100px;\n  border-radius: 100%;\n  border: 2px solid white;\n  cursor: pointer;\n}\n`\n","// from kent c dodds epic react\n\nimport { useEffect, useRef, useState } from \"react\"\n\nexport default function useLocalStorageState(\n  key,\n  defaultValue = '',\n  { serialize = JSON.stringify, deserialize = JSON.parse } = {}\n) {\n  const [state, setState] = useState(() => {\n    const valueInLocalStorage = window.localStorage.getItem(key)\n    if(valueInLocalStorage) {\n      return deserialize(valueInLocalStorage)\n    }\n    return typeof defaultValue === 'function'\n      ? defaultValue()\n      : defaultValue\n  })\n\n  const prevKeyRef = useRef(key)\n\n  useEffect(() => {\n    const prevKey = prevKeyRef.current\n    if(prevKey !== key) {\n      window.localStorage.removeItem(prevKey)\n    }\n    prevKeyRef.current = key\n    window.localStorage.setItem(key, serialize(state))\n  }, [key, serialize, state])\n\n  return [state, setState]\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Draggable } from 'react-beautiful-dnd'\n\nconst Container = styled.div`\n  border: 1px solid lightgrey;\n  border-radius: 2px;\n  padding: 8px;\n  margin-bottom: 8px;\n  background-color: ${props => (props.isDragging ? '#00ff00ee' : '#ffffffee')};\n`\nexport default function Task({\n  index,\n  task,\n}) {\n  return (\n    <Draggable draggableId={task.id} index={index}>\n      {(provided, snapshot) => (\n        <Container\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n          ref={provided.innerRef}\n          isDragging={snapshot.isDragging}\n        >\n          {task.content}\n        </Container>\n      )}\n    </Draggable>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Droppable, Draggable } from 'react-beautiful-dnd'\nimport Task from './task'\n\nconst Container = styled.div`\n  margin: 8px;\n  border: 1px solid lightgrey;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: column;\n`\nconst Title = styled.h3`\n  color: white;\n  font-weight: 200;\n  padding: 8px;\n`\nconst Tasklist = styled.div`\n  padding: 8px;\n  transition-property: background height;\n  transition-duration: 0.2s;\n  transition-timing-function: ease;\n  background: ${props => (props.isDraggingOver ? '#00ffff99' : 'white')};\n  flex-grow: 1;\n  min-height: 100px;\n`\n\nexport default function Tile({\n  structure,\n  index,\n}) {\n  const { id, direction, locked, type, content } = structure\n\n  switch(type) {\n    case 'strip': return (\n      <Draggable draggableId={id} index={index}>\n        {provided => (\n          <Container\n            {...provided.draggableProps}\n            ref={provided.innerRef}\n          >\n            <Title {...provided.dragHandleProps}>\n              {id}\n            </Title>\n            <Droppable\n              droppableId={id}\n              direction=\"horizontal\"\n              type=\"ui\"\n            >\n              {provided => (\n                <Container\n                  {...provided.droppableProps}\n                  ref={provided.innerRef}\n                >\n                  {content.map((structure, index) => (\n                    <Tile\n                      key={structure.id}\n                      index={index}\n                      structure={structure}\n                    />\n                  ))}\n                  {provided.placeholder}\n                </Container>\n              )}\n            </Droppable>\n          </Container>\n        )}\n      </Draggable>\n    )\n    case 'stack': return (\n      <Draggable draggableId={id} index={index}>\n        {provided => (\n          <Container\n            {...provided.draggableProps}\n            ref={provided.innerRef}\n          >\n            <Title {...provided.dragHandleProps}>\n              {id}\n            </Title>\n            {content.map((structure, index) => (\n              <Tile\n                key={structure.id}\n                index={index}\n                structure={structure}\n              />\n            ))}\n            {provided.placeholder}\n          </Container>\n        )}\n      </Draggable>\n    )\n    case 'terminal': return (\n      <Draggable draggableId={id} index={index}>\n        {provided => (\n          <Container\n            {...provided.draggableProps}\n            ref={provided.innerRef}\n          >\n            <Title {...provided.dragHandleProps}>\n              {id}\n            </Title>\n          </Container>\n        )}\n      </Draggable>\n    )\n\n    default: throw new Error('oops')\n  }\n/*\n  return (\n    <Draggable draggableId={id} index={index}>\n      {provided => (\n        <Container\n          {...provided.draggableProps}\n          ref={provided.innerRef}\n        >\n          <Title {...provided.dragHandleProps}>\n            {content}\n          </Title>\n          <Droppable droppableId={id} type=\"ui\">\n            {(provided, snapshot) => (\n              <Tasklist\n                ref={provided.innerRef}\n                {...provided.droppableProps}\n                isDraggingOver={snapshot.isDraggingOver}\n              >\n                {childTiles.map((childTile, index) =>\n                  <Tile\n                    key={childTile.id}\n                    tile={childTile}\n                    childTiles={childTile.tileIds}\n                    index={index}\n                  />)}\n                {provided.placeholder}\n              </Tasklist>\n            )}\n          </Droppable>\n        </Container>\n      )}\n    </Draggable>\n  )\n  */\n}\n","export default {\n  terminals: {\n    '<color_editor_id_1>': {\n      id: '<color_editor_id_1>',\n      subject: '<color_id_1>',\n    },\n    '<color_editor_id_2>': {\n      id: '<color_editor_id_2>',\n      subject: '<color_id_5>',\n    },\n    '<color_editor_id_3>': {\n      id: '<color_editor_id_3>',\n      subject: '<color_id_6>',\n    },\n  },\n  layout: {\n    id: '<root>',\n    direction: 'x',\n    locked: true,\n    type: 'root',\n    content: [\n      { id: '<strip_id_1>',\n        type: 'strip',\n        direction: 'x',\n        content: [\n          { id: '<color_editor_id_1>',\n            type: 'terminal' },\n          { id: '<stack_id_1>',\n            type: 'stack',\n            content: [\n              { id: '<color_editor_id_2>',\n                type: 'terminal' },\n              { id: '<color_editor_id_3>',\n                type: 'terminal' },\n            ] },\n        ] },\n    ],\n  },\n}\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd'\nimport styled from 'styled-components'\nimport manageDragUi from '../util/manageDragUi'\nimport useLocalStorageState from '../util/useLocalStorageState'\nimport Tile from './tile'\nimport uiSample from './uiSample'\n\n/*\nconst SortableContainer = sortableContainer(({ children }) => (\n  <ul css={css`\n    display: flex;\n    width: 100%;\n    list-style-type: none;\n    margin-block-start: 0;\n    margin-block-end: 0;\n    margin-inline-start: 0;\n    margin-inline-end: 0;\n    padding-inline-start: 0;\n    flex-wrap: wrap;\n  `}\n  >{children}\n  </ul>)\n)\n*/\n\nconst Container = styled.div`\n  display: flex;\n  width: 100%;\n`\n\nexport function TilesDemo() {\n  const [ui, setUi] = useLocalStorageState('ui', uiSample)\n  const onDragEnd = manageDragUi(ui, setUi)\n\n  return (\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Droppable\n        droppableId=\"root\"\n        direction=\"horizontal\"\n        type=\"ui\"\n      >\n        {provided => (\n          <Container\n            {...provided.droppableProps}\n            ref={provided.innerRef}\n          >\n            {ui.layout.content.map((structure, index) => (\n              <Tile\n                key={structure.id}\n                index={index}\n                structure={structure}\n              />\n            ))}\n            {provided.placeholder}\n          </Container>\n        )}\n      </Droppable>\n    </DragDropContext>\n  )\n}\n","import arrayMove from 'array-move'\n\nexport default function manageDragUi(state, setState) {\n  const onDragEnd = result => {\n    const { destination, source, draggableId, type } = result\n\n    if(!destination) return\n    if(\n      destination.droppableId === source.droppableId &&\n      destination.index === source.index\n    ) return\n\n    if(type === 'column') {\n      const columnOrder = arrayMove(state.columnOrder, source.index, destination.index)\n      setState({ ...state, columnOrder })\n      return\n    }\n\n    const home = state.columns[source.droppableId]\n    const foreign = state.columns[destination.droppableId]\n\n    if(home === foreign) {\n      const newTaskIds = arrayMove(\n        home.taskIds, source.index, destination.index\n      )\n      const newColumn = {\n        ...home,\n        taskIds: newTaskIds,\n      }\n      const newState = {\n        ...state,\n        columns: {\n          ...state.columns,\n          [newColumn.id]: newColumn,\n        },\n      }\n      setState(newState)\n      return\n    }\n\n    const homeTaskIds = Array.from(home.taskIds)\n    homeTaskIds.splice(source.index, 1)\n    const newHome = {\n      ...home,\n      taskIds: homeTaskIds,\n    }\n    const foreignTaskIds = Array.from(foreign.taskIds)\n    foreignTaskIds.splice(destination.index, 0, draggableId)\n    const newForeign = {\n      ...foreign,\n      taskIds: foreignTaskIds,\n    }\n    const newState = {\n      ...state,\n      columns: {\n        ...state.columns,\n        [newHome.id]: newHome,\n        [newForeign.id]: newForeign,\n      },\n    }\n    setState(newState)\n  }\n  return [state, onDragEnd]\n}\n\nconst tilesSamples = {\n  tiles: {\n    'tile-1': {\n      id: 'tile-1',\n      content: 'Take out the garbage',\n      tileIds: [],\n    },\n    'tile-2': {\n      id: 'tile-2',\n      content: 'Watch my favorite show',\n      tileIds: [],\n    },\n    'tile-3': {\n      id: 'tile-3',\n      content: 'Charge phone',\n      tileIds: ['tile-4'],\n    },\n    'tile-4': {\n      id: 'tile-4',\n      content: 'Cook dinner',\n      tileIds: [],\n    },\n  },\n  // Facilitate reordering of the columns\n  tileOrder: ['tile-1', 'tile-2', 'tile-3'],\n}\n","import { css } from '@emotion/core'\n\nexport const cssInteractiveTransform = css`\n  &:hover,\n  &.focus,\n  &:focus,\n  &:focus-within {\n    transform: scale(1.02);\n  }\n  &.active,\n  &:active {\n    transform: scale(0.98);\n  }\n  &.disabled,\n  &:disabled {\n    &:hover,\n    &.focus,\n    &:focus,\n    &:focus-within {\n    transform: none;\n    }\n    &:active, \n    &.active {\n      transform: none;\n    }\n  }\n`\n","import { css } from '@emotion/core'\n\nexport const panelCSS = css`\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  text-decoration: none;\n  border: 0;\n  padding: 0;\n  user-select: none;\n  cursor: pointer;\n  color: var(--fg-color);\n  background-color: var(--bg-color);\n  position: relative;\n  display: inline-flex;\n  font-weight: 500;\n  font-size: 16px;\n  box-shadow: 0 0 1px rgba(0, 0, 0, 0);\n  transition: box-shadow transform background-color;\n  transition-duration: 0.1s;\n  transition-timing-function: ease-in;\n  transform-origin: center center;\n  &:hover,\n  &.focus,\n  &:focus,\n  &:focus-within {\n    box-shadow: 0 0px 0px 2px var(--fg-color);\n    outline: none;\n    z-index: 1000;\n  }\n  &:active, \n  &.active {\n    transition-duration: 0.03s;\n  }\n  &.disabled,\n  &:disabled {\n    color: var(--bg-color);\n    cursor: not-allowed;\n    background: none;\n    &:hover,\n    &.focus,\n    &:focus,\n    &:focus-within {\n    box-shadow: none; // 0 0px 0px 2px var(--bg-color);\n    outline: none;\n    }\n  }\n  .text {\n    margin-left: 0;\n    margin-right: 12px;\n    line-height: 1em;\n  }\n`\nexport const cssCorePanel90 = css`\n  ${panelCSS}\n  transform: rotate(-90deg);\n  &:hover, \n  &.focus,\n  &:focus,\n  &:focus-within {\n    transform: rotate(-90deg) scale(1.02);\n  }\n  &:active, \n  &.active {\n    transform: rotate(-90deg)scale(0.98);\n  }\n`\n","import { css } from '@emotion/core'\nimport { cssInteractiveTransform } from './interactive-transform'\nimport { panelCSS } from './panel'\n\nexport const buttonCSS = css` \n  ${panelCSS};\n  ${cssInteractiveTransform};\n  display: flex;\n  justify-content: center;\n  appearance: none;\n  background: var(--ex-bg-color);\n  color: var(--fg-color);\n  outline: none;\n  border: none;\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: -1px;\n    right: -1px;\n    width: calc(100% + 2px);\n    height: calc(100% + 2px);\n    box-sizing: border-box;\n    transition-property: border;\n    transition-duration: .05s;\n    transition-timing-function: ease-out;\n  }\n  &:disabled {\n    background: var(--bg-color);\n    opacity: 50%;\n    &:hover,\n    &.focus,\n    &:focus,\n    &:focus-within {\n      background: var(--bg-color);\n      color: var(--fg-color);\n    }\n  }\n  &:hover,\n  &.focus,\n  &:focus,\n  &:focus-within {\n    box-shadow: none;\n    color: var(--bg-color);\n    background: var(--fg-color);\n  } \n  &.active,\n  &:active {\n    transform: none;\n    &::after {\n      border: 3px solid var(--bg-color);\n    }\n  }\n`\n","import { css } from '@emotion/core'\nimport { cssInteractiveTransform } from './interactive-transform'\nimport { panelCSS } from './panel'\n\nexport const checkCSS = css` \n  ${panelCSS};\n  ${cssInteractiveTransform};\n  display: grid;\n  align-items: center;\n  justify-items: center;\n  input[type=checkbox] { // hide the box itself\n    cursor: pointer;\n    grid-area: status;\n    opacity: 0;\n    margin: 0px;\n    &:disabled {\n      cursor: not-allowed;\n      pointer-events: none;\n      ~ .icon {\n        color: var(--fg-color);\n        opacity: 0.3;\n        &:hover { color: var(--fg-color); }\n      }\n      ~ .box { opacity: 0.2; }\n      &.active, &:active, &:checked {\n        ~ .icon {\n          color: var(--fg-color);\n          opacity: 0.3;\n        }\n      }\n      &.active, &:active {\n        ~ .box {\n          border-width: 0px;\n        }\n      }\n    }\n    &:checked {\n      ~ .icon {\n        color: var(--bg-color);\n        &.check {\n          transform: scale(1);\n          opacity: 1;\n        }\n      }\n    }\n  }\n  .box, .icon, .title { \n    pointer-events: none;\n  }\n  .box, .icon { \n    grid-area: status;\n  }\n  .title {\n    grid-area: label;\n    display: inline-flex;\n    align-items: center;\n    white-space: nowrap;\n  }\n  .box {\n    background-color: var(--ex-bg-color);\n    border-color: var(--fg-color);\n    border-style: solid;\n    border-width: 0px;\n    box-sizing: border-box;\n    transition: border-width 0.05s;\n  }\n  .icon.check {\n    opacity: 0;\n    transform: scale(0.75);\n    transform-origin: center;\n    transition: transform 0.1s;\n }\n`\n","import { css } from '@emotion/core'\n\nexport const cssInteractiveLabel = css`\noverflow: visible;\n.label-wrap {\n  pointer-events: none;\n  display: flex;\n  height: 20px;\n  width: 100%;\n  position: absolute;\n  justify-content: center;\n  align-content: center;\n  opacity: 0;\n  transition: transform 0.15s ease-in, opacity 0.05s .1s;\n  z-index: 100;\n  label {\n    display: flex;\n    justify-content: center;\n    position: absolute;\n    height: 20px;\n    padding: 0 5px;\n    background-color: var(--fg-color);\n    color: var(--bg-color);\n    font-size: 16px;\n    font-weight: 500;\n    white-space: nowrap;\n    &::before {\n      content: \"\";\n      z-index: -1;\n      height: 5px;\n      width: 5px;\n      position: absolute;\n      bottom: -8px;\n      width: 0; \n      height: 0; \n      border-left: 10px solid transparent;\n      border-right: 10px solid transparent;\n      border-top: 10px solid var(--fg-color);\n    }\n  }\n  &.above {\n    transform: perspective(500px) rotateX(30deg) translateY(2px);\n    top: -32px;\n  }\n  &.above-left {\n    transform: perspective(500px) rotateX(30deg) translateY(2px);\n    top: -30px;\n    justify-content: flex-start;\n    label:before {\n      left: -5px;\n      bottom: -5px;\n      transform: perspective(500px) rotateZ(90deg)\n    }\n  }\n  &.right {\n    transform: perspective(500px) rotateY(10deg) translateX(2px);\n    transform-origin: calc(0% - 5px) 50%;\n    right: calc(-100% - 10px);\n    justify-content: flex-start;\n    label:before {\n      left: -12px;\n      bottom: 5px;\n      transform: rotateZ(90deg);\n    }\n  }\n  &.left {\n    transform: perspective(500px) rotateY(-10deg) translateX(-2px);\n    transform-origin: calc(100% + 5px) 50%;\n    left: calc(-100% - 10px);\n    justify-content: flex-end;\n    label:before {\n      right: -12px;\n      bottom: 5px;\n      transform: rotateZ(270deg);\n    }\n  }\n}\n&:hover,\n&.focus,\n&:focus,\n&:focus-within {\n  .label-wrap {\n    opacity: 1;\n    transition: transform 0.15s ease-in, opacity 0.1s .05s;\n    &.above, &.above-left {\n      transform: perspective(500px) translateY(0px);\n    }\n    &.right, &.left {\n      transform: perspective(500px) translateX(0px);\n    }\n  }\n}\n`\n","import { css } from '@emotion/core'\nimport { buttonCSS } from './button'\nimport { cssInteractiveLabel } from './interactive-label'\nimport { cssInteractiveTransform } from './interactive-transform'\nimport { panelCSS } from './panel'\n\nexport const dropdownCSS = css`\noverflow: visible;\ndisplay: flex;\n* {\n  transition-property: all;\n  transition-duration: .1s;\n  transition-timing-function: ease-in;\n}\n.icon {\n  pointer-events: none;\n  z-index: 1002;\n  font-size: 13.5px; \n  font-variation-settings: 'wght' 300;\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  height: 100%;\n}\n> .blocker {\n    z-index: 10;\n    position: absolute;\n    width: 100vw;\n    height: 100vh;\n    top: 0px;\n    left: 0px;\n}\n> .spaceholder {\n  user-select: none;\n  padding-left: 10px;\n  padding-right: 36px;\n  text-align: left;\n  overflow: hidden; pointer-events: none; opacity: 0;\n  }\n> .select {\n  ${panelCSS};\n  ${cssInteractiveTransform};\n  ${cssInteractiveLabel}\n  background: none;\n  display: inline-flex;\n  position: absolute;\n  > .option-list-window {\n    position: relative;\n    overflow: hidden;\n    > .option-list {\n      position: relative;\n      > .option {\n        ${buttonCSS};\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        padding-left: 10px;\n        padding-right: 36px;\n        background-color: var(--bg-color);\n        white-space: nowrap;\n        //opacity: .88;\n      }\n    }\n  }\n  &::-ms-expand {\n    display: none;\n  }\n\n}\n`\n","import { css } from '@emotion/core'\nimport { panelCSS } from './panel'\n\nexport const dropdownClassicCSS = css`\n  ${panelCSS};\n  > select {\n    cursor: pointer;\n    margin-left: 10px;\n    color: var(--fg-color);\n    width: 150px;\n    font-size: 16px;\n    font-weight: 600;\n    display: inline-flex;\n    background: none;\n    border: 0px solid #000;\n    border-radius: 0px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    &:hover,\n    &:focus {\n      outline: none;\n    }\n    option {\n      font-weight: normal;\n    }\n  }\n  &::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    border-left: 3px solid var(--fg-color);\n    border-bottom: 3px solid var(--fg-color);\n    height: 7px;\n    width: 7px;\n    right: 13px;\n    top: 11px;\n    transform: rotate(-45deg);\n  }\n  &::-ms-expand {\n    display: none;\n  }\n  &:hover {\n    overflow: visible;\n    label {\n      transform: translateY(-15px) scaleY(1);\n      opacity: 1;\n    }\n  }\n`\n","import { css } from '@emotion/core'\n\nexport const cssGroup = css`\ndisplay: grid;\n`\n","import { css } from '@emotion/core'\n\nexport const resistClickCSS = css`\n&:hover,\n&.focus,\n&:focus,\n&:focus-within {\n  &:active { // does not apply to .active\n    transform: scale(1.02); // stay at expanded size\n    &.disabled,\n    &:disabled {\n      transform: scale(1);\n    }\n  }\n}\n`\n","import { css } from '@emotion/core'\nimport { buttonCSS } from './button'\nimport { cssInteractiveLabel } from './interactive-label'\nimport { cssInteractiveTransform } from './interactive-transform'\nimport { panelCSS } from './panel'\nimport { resistClickCSS } from './resist-click'\n\nexport const sliderCSS = css`\n  ${panelCSS};\n  ${cssInteractiveLabel}\n  ${cssInteractiveTransform};\n  ${resistClickCSS};\n  display: inline-flex;\n  &:hover,\n  &.focus,\n  &:focus,\n  &:focus-within { .range-wrapper {\n    .range .track {\n      opacity: 1;\n      .thumb { \n      background: none;\n    }\n  }\n    input[type=range] {\n      &::-webkit-slider-thumb {\n          opacity: 1;\n          transform: scaleY(1.01);\n        }\n      &::-moz-range-thumb {\n        border: none;\n        opacity: 1;\n        transform: scaleY(1.01);\n      }\n    }\n  }}\n  &.disabled,\n  &:disabled {\n    background-color: var(--bg-color);\n    &:hover,\n    &.focus,\n    &:focus,\n    &:focus-within { \n      .range-wrapper .range .track .thumb { \n        background: var(--mg-color); \n//        .label {opacity: 1;}\n      }\n      .range-wrapper input[type=range] {\n        &::-webkit-slider-thumb { opacity: 0; }\n        &::-moz-range-thumb { opacity: 0; }\n      } \n    }\n    input[type=number] { \n      opacity: 80%;\n    }\n    .range-wrapper  .range .track, \n    input[type=number] { \n      background: #00000000; \n    }\n    .range-wrapper input[type=range],\n    input[type=number] { \n      cursor: not-allowed; \n      &::-webkit-slider-thumb {  cursor: not-allowed; }\n      &::-moz-range-thumb { cursor: not-allowed; }\n      &:hover,\n      &.focus,\n      &:focus,\n      &:focus-within {\n        &::-webkit-slider-thumb { background: var(--mg-color); }\n        &::-moz-range-thumb { background: var(--mg-color); }\n      }\n    }\n  }\n  .range-wrapper {\n    flex-grow: 1;\n    display: grid;\n    grid-template: \n      [row1-start] \"content\" auto [row1-end]\n      /             auto;    \n    input[type=range] {\n      cursor: pointer;\n      z-index: 10;\n      grid-area: content;\n      margin: 0px;\n      appearance: none;\n      outline: none;\n      border-radius: 0;\n      background: #00000000;\n      // opacity: .2;\n      &::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        cursor: grab;\n        appearance: none;\n        opacity: 0;\n        border: none;\n        width: 20px;\n        background: var(--mg-color);\n      }\n      &::-moz-range-thumb {\n        cursor: grab;\n        border-radius: 0px;\n        opacity: 0;\n        width: 20px;\n        background: var(--mg-color);\n      }\n      &:hover,\n      &.focus,\n      &:focus,\n      &:focus-within {\n        &::-webkit-slider-thumb { background: var(--fg-color); }\n        &::-moz-range-thumb { background: var(--fg-color); }\n      }\n    }\n    .range {\n      cursor: not-allowed;\n      width: 100%;\n      grid-area: content;\n      .track {\n        pointer-events: none;\n        overflow-x: visible;\n        transition: all 0.33s ease-out;\n        background-color: var(--ex-bg-color);\n        opacity: .75;\n        // box-shadow: 0 0px 0px 1px var(--fg-color);\n        .thumb { \n          background: var(--mg-color);\n          overflow: visible;\n          transition: margin 0.33s ease-out;\n          opacity: 1;\n        }\n      }\n    }\n  }\n  input[type=number] {\n    border: none;\n    border-radius: 0;\n    color: var(--ex-fg-color);\n    background-color: var(--ex-bg-color);\n    font-weight: 500;\n    font-size: 15px;\n    margin: 3px;\n    margin-left: 0;\n    padding: 0;\n    padding-left: 7px;\n    &:hover,\n    &.focus,\n    &:focus,\n    &:focus-within {\n      box-shadow: 0 0 0 0;\n      outline: none;\n    }\n  }\n  button {\n    ${buttonCSS}\n    margin: 3px;\n    &:disabled {\n      color: var(--fg-color);\n    }\n    .icon { \n      font-size: 13.5px; \n      font-variation-settings: 'wght' 300;\n    }\n  }\n`\n","import { css } from '@emotion/core'\nimport { cssInteractiveLabel } from './interactive-label'\nimport { panelCSS } from './panel'\n\nexport const switchCSS = css`\n  ${panelCSS}\n  ${cssInteractiveLabel}\n  grid-area: switch;\n  display: grid;\n  align-items: center;\n  justify-items: center;\n  * { cursor: pointer; }\n  input[type=checkbox] {\n    -webkit-appearance: none;\n    grid-area: switch;\n    opacity: 0;\n    border: none;\n    margin: none;\n    &:checked ~ .switch { \n      background-color: var(--fg-color);\n    }\n  }\n  input[type=range] {\n    -webkit-appearance: none;\n    grid-area: switch;\n    margin: 0px;\n    appearance: none;\n    outline: none;\n    border-radius: 0;\n    &:disabled {\n      display: none;\n      pointer-events: none;\n    }\n    &::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      appearance: none;\n      border: none;\n      transition: transform 0.05s;\n      opacity: 0;\n    }\n    &::-moz-range-thumb {\n      border-radius: 0px;\n      transition: transform 0.05s;\n      opacity: 0;\n    }\n  }\n  .switch {\n    pointer-events: none;\n    grid-area: switch;\n    overflow: hidden;\n    background-color: var(--mg-color);\n    .thumb {\n      background: var(--ex-bg-color);\n      margin: 2px;\n      transition-property: all;\n      transition-duration: 0.1s;\n      transition-timing-function: ease-out;\n    }\n  }\n  &.disabled {\n    div input[type=range] { \n      display: none; \n      pointer-events: none;\n    }\n  }\n`\n","import { css } from '@emotion/core'\nimport { buttonCSS } from './button'\nimport { cssInteractiveLabel } from './interactive-label'\nimport { cssInteractiveTransform } from './interactive-transform'\nimport { panelCSS } from './panel'\nimport { resistClickCSS } from './resist-click'\n\nexport const textFieldCSS = css`\n  ${panelCSS};\n  ${cssInteractiveTransform};\n  ${cssInteractiveLabel}\n  ${resistClickCSS}\n  display: flex;\n  justify-content: left;\n  overflow: visible;\n  input[type=text] {\n    width: 10px;\n    color: var(--fg-color);\n    display: flex;\n    flex-grow: 1;\n    flex-shrink: 1;\n    background: none;\n    font-size: 20px;\n    border: none;\n    padding: 0px;\n    padding-left: 10px;\n    box-shadow: 0 0 0 0px;\n    outline: none;\n    &::-moz-selection {\n      color: var(--mg-color);\n      background: var(--fg-color);\n    }\n    &::selection {\n      color: var(--mg-color);\n      background: var(--fg-color);\n    }\n    > div { height: 30px; }\n  }\n  .front-matter {\n    display: flex;\n    font-size: 20px;\n    border: none;\n    padding-left: 10px;\n    align-items: center;\n    cursor: default;\n  }\n  .buttons {\n    display: inline-flex;\n    width: auto;\n    flex-grow: 0;\n    flex-basis: content;\n    min-width: 0px;\n    justify-content: flex-end;\n    button { \n      ${buttonCSS} \n      display: inline;\n      margin: 3px;\n      overflow: hidden;\n      margin-right: 0px;\n    }\n  }\n`\n","/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\nimport { cssGroup } from './css/group'\n\nexport default function ControlGroup({\n  children,\n  gap,\n  gridTemplate,\n}) {\n  const gapContent = typeof gap === 'object'\n    ? css`\n        column-gap: ${gap[0]}px;\n        row-gap: ${gap[1]}px;\n      `\n    : css`\n        gap: ${gap}px;\n      `\n\n  return (\n    <div\n      css={css`\n        ${cssGroup};\n        ${gapContent};\n        grid-template: ${gridTemplate};\n      `}\n    >\n      {children}\n    </div>\n  )\n}\n","import { css } from '@emotion/core'\n\nexport const iconCSS = css`\ndisplay: inline-flex;\nfont-family: Icon;\nfont-variation-settings: 'wght' 200;\nfont-size: 18px;\nline-height: 30px;\nalign-items: center;\njustify-content: center;\n`\n","/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\nimport { iconCSS } from './css'\n\nconst iconLetter = {\n  auto: 's',\n  check: 'c',\n  close: 'x',\n  divot: 'v',\n  go: 'l',\n  minus: '-',\n  plus: '+',\n  redo: 'r',\n  reset: 'u',\n  right: 'r',\n  undo: 'u',\n}\n\nexport default function Icon({ value, gridArea = value }) {\n  const letter = iconLetter[value]\n  return (\n    <div\n      className={`icon ${value}`}\n      css={css`\n        ${iconCSS};\n        grid-area: ${gridArea};\n      `}\n    >{letter}</div>\n  )\n}\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nexport default function Label({\n  text,\n  place,\n}) {\n  return (\n    <div className={`\n      label-wrap\n      ${place || ''}\n    `}\n    >\n      <label>\n        {text}\n      </label>\n    </div>\n  )\n}\n","import { useEffect, useState } from 'react'\n/** @jsx jsx */\nimport { css, jsx } from '@emotion/core' // eslint-disable-line\nimport { wrapAround } from 'luum'\nimport { dropdownCSS } from './css'\nimport { Icon } from './Icon'\nimport Label from './Label'\n\nconst defaultDimensions =\n{ height: 36,\n  width: null }\n\nexport default function Dropdown({\n  label = 'Label',\n  handler = console.log(`no setter passed to colorPicker ${label}`),\n  options,\n  disabled = options.length === 0,\n  valueProvided,\n  dimensions,\n  cssExtra,\n}) {\n  const indexOfValue = (value, options) => {\n    const option = options.find(option => option.value === value)\n    return options.indexOf(option)\n  }\n  const indexOfValueProvided = indexOfValue(valueProvided, options)\n\n  const { height, width } = { ...defaultDimensions, ...dimensions }\n  const autoWidth = width ? `${width}px` : 'auto'\n  const [focused, setFocused] = useState({ value: valueProvided, index: indexOfValueProvided })\n  const [isOpen, setIsOpen] = useState(false)\n  const [enterIsHeld, setEnterIsHeld] = useState(false)\n\n  useEffect(() => {\n    const index = indexOfValueProvided\n    setFocused({ value: valueProvided, index })\n  }, [valueProvided, indexOfValueProvided, options])\n\n  const handleClick = idx => {\n    const { value } = options[idx]\n    handler(value)\n  }\n\n  const incrementFocused = increment => {\n    const newIndex = focused.index + increment\n    const indexWrapped = wrapAround(newIndex, [0, options.length])\n    const { value } = options[indexWrapped]\n    setFocused({ value, index: indexWrapped })\n  }\n  const handleKeyDown = e => {\n    switch(e.keyCode) {\n      case 9:\n      case 27: if(isOpen) setIsOpen(false); break\n      case 40: e.preventDefault(); incrementFocused(1); break\n      case 38: e.preventDefault(); incrementFocused(-1); break\n      case 32: e.preventDefault(); setEnterIsHeld(true); break\n      case 13: setEnterIsHeld(true); break\n      default:\n    }\n  }\n  const handleKeyUp = e => {\n    switch(e.keyCode) {\n      case 38:\n      case 40:\n        e.preventDefault()\n        if(!isOpen) handler(focused.value)\n        break\n      case 13:\n      case 32:\n        setEnterIsHeld(false)\n        if(isOpen) handler(focused.value)\n        setIsOpen(!isOpen)\n        break\n      default:\n    }\n  }\n\n  return (\n    <div\n      className={`\n        interactive\n        ${disabled ? 'disabled' : ''}\n      `}\n      css={css`\n        ${dropdownCSS}\n        ${cssExtra}\n        .icon { \n          height: ${height}px;\n          width:  ${height}px;\n          opacity: ${isOpen ? 0 : 1};\n        }\n        > .blocker {\n          ${!isOpen && `pointer-events: none`}\n        }\n        > .spaceholder {\n          width: ${width ? `${width - 46}px` : 'auto'};\n          height: ${height}px;\n        }\n        > .select {\n          width: ${autoWidth};\n          z-index: ${isOpen ? 1000 : 0};\n          height: auto;\n          margin-top: -${isOpen ? height * focused.index : 0}px;\n          > .option-list-window {\n            height: ${isOpen ? height * options.length : height}px;\n            min-height: ${height}px;\n            width:  ${autoWidth};\n            > .option-list {\n              height: auto;\n              width:  ${autoWidth};\n              top: -${isOpen ? 0 : height * focused.index}px;\n              > .option {\n                width: ${width ? `${width - 46}px` : 'auto'};\n                min-height: ${height}px;\n                pointer-events: ${isOpen ? 'auto' : 'none'};\n              }\n            }\n          }\n        }\n      `}\n    >\n      <div className='spaceholder'>\n        {(\n          options[0] ? options : [{ label: '--' }]\n        ).map((option, idx) =>\n          <div key={`spaceholder${idx}`}>{option.label}</div>\n        )\n      }\n      </div>\n      <div\n        className='blocker'\n        onClick={disabled ? null : () => setIsOpen(!isOpen)}\n        onTouchEnd={disabled ? null : () => setIsOpen(!isOpen)}\n      />\n      <div\n        tabIndex={disabled ? '-1' : '0'}\n        onKeyDown={handleKeyDown}\n        onKeyUp={handleKeyUp}\n        className={`\n          select\n          ${disabled ? 'disabled' : ''}\n          ${enterIsHeld ? 'active' : ''}\n        `}\n        onClick={disabled ? null : () => setIsOpen(!isOpen)}\n      >\n        <Icon value='divot' />\n        {label && <Label\n          text={label.text || label}\n          place={label.place || 'above'}\n        />}\n        <div className='option-list-window'>\n          <div className='option-list'>\n            {(\n              options[0] ? options : [{ label: '--' }]\n            ).map((option, idx) =>\n              <div\n                className={isOpen && idx === focused.index ? 'option focus' : 'option'}\n                key={idx}\n                value={idx}\n                onClick={() => handleClick(idx)}\n              >{option.label}</div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\n/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\nimport { Icon } from './Icon'\nimport Label from './Label'\nimport { textFieldCSS } from './css'\n\nconst noHandlerMessage = value => console.log('no handler: \"', value, '\" was dropped on the floor')\n\nconst defaultDimensions =\n{ height: 36,\n  width: 180 }\n\nexport default function TextField({\n  valueProvided,\n  validate = {},\n  handler = noHandlerMessage,\n  label = 'Label',\n  frontMatter,\n  gridArea = 'field',\n  dimensions,\n  cssExtra,\n  undoButton,\n  goButton,\n  disabled,\n}) {\n  const [value, setValue] = useState(valueProvided)\n  const [valueIsReady, setValueIsReady] = useState(false)\n  const [enterIsHeld, setEnterIsHeld] = useState(false)\n\n  const { height, width } = { ...defaultDimensions, ...dimensions }\n\n  useEffect(() => { setValue(valueProvided) }, [valueProvided])\n\n  const validateDraft = value => {\n    const valueIsValidDraft = validate.draft\n      ? validate.draft(value)\n      : true\n    const attemptIsEmpty = value.length === 0\n    return (valueIsValidDraft || attemptIsEmpty)\n  }\n  const validateFinal = value => validate.final\n    ? validate.final(value)\n    : true\n\n  const handleSetValue = e => {\n    const attempt = e.target.value\n    const attemptIsValid = validateDraft(attempt)\n    if(attemptIsValid) setValue(e.target.value)\n    const newValue = attemptIsValid ? attempt : value\n    const newValueIsReady = validateFinal(newValue)\n    setValueIsReady(newValueIsReady)\n  }\n  const handleKeyDown = e => {\n    if(e.keyCode === 13) setEnterIsHeld(true)\n  }\n  const handleKeyUp = e => {\n    if(e.keyCode === 13) {\n      console.log(e.target.value)\n      if(valueIsReady) handler(e.target.value)\n      setEnterIsHeld(false)\n    }\n  }\n  const handleButtonPress = () => { if(valueIsReady) handler(value) }\n\n  return (\n    <div\n      className={`\n        interactive\n        ${enterIsHeld ? 'active' : ''}\n        ${disabled ? 'disabled' : ''}\n      `}\n      css={css`\n        ${textFieldCSS}\n        ${cssExtra}\n        grid-area: ${gridArea};\n        height: ${height}px;\n        width: ${width}px;\n        input[type=text] {\n          flex-grow: 1;\n        }\n        .buttons {\n          button { \n            height: ${height - 6}px;\n            width: ${height - 6}px;\n            &:last-of-type { margin-right: 3px }\n            &.cancel { width: ${value === valueProvided ? 0 : height - 6}px }\n            &:disabled {\n              background: none;\n            }\n          }\n        }\n      `}\n    >\n      {frontMatter && <div className='front-matter'>\n        {frontMatter}\n      </div>}\n      {label && <Label\n        text={label.text || label}\n        place={label.place || 'above-left'}\n      />}\n      <input\n        type=\"text\"\n        value={value}\n        onChange={handleSetValue}\n        onKeyDown={handleKeyDown}\n        onKeyUp={handleKeyUp}\n        disabled={disabled}\n      />\n      <div className='buttons'>\n        {undoButton && <button\n          type='button'\n          className='button cancel'\n          onClick={() => setValue(valueProvided)}\n          disabled={disabled}\n        ><Icon value='undo' />\n        </button>}\n        {goButton && <button\n          type='button'\n          onClick={handleButtonPress}\n          disabled={disabled}\n        ><Icon value='go' />\n        </button>}\n      </div>\n    </div>\n  )\n}\n","/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\nimport { getCssGridTemplate } from '../controlStyles'\nimport { checkCSS } from '../css'\nimport { Icon } from '../Icon'\n\nconst defaultDimensions =\n{ height: 36,\n  width: null,\n  innerPad: 20 }\n\nexport default function Button({\n  id,\n  label = 'Label',\n  toggleStateProvided,\n  handler,\n  layout,\n  dimensions,\n  cssExtra,\n}) {\n  const { height, width, innerPad } = { ...defaultDimensions, ...dimensions }\n  const autoWidth = width ? `${width}px` : 'auto'\n  const innerHeight = height - innerPad\n  const cssGridTemplate = getCssGridTemplate(layout, `${height}px`)\n\n  return (\n    <label\n      htmlFor={id}\n      className='interactive'\n      css={css`\n        ${checkCSS};\n        ${cssExtra};\n        ${cssGridTemplate};\n        height: ${height}px;\n        width:  ${autoWidth};\n        &:hover > .box, \n        &:focus > .box { \n          border-width: 2px \n        }\n        input[type=checkbox] {\n          height: ${height}px;\n          width:  ${height}px;\n          &.active,\n          &:active, \n          &:checked { ~ .box {\n            // fill the box:\n            border-width: ${(innerHeight) / 2}px;\n          }}\n        }\n        .title {\n          height: ${height}px;\n          width:  ${autoWidth};\n        }\n        .box {\n          height: ${innerHeight}px;\n          width:  ${innerHeight}px;\n        }\n        .icon {\n          height: ${innerHeight}px;\n          width:  ${innerHeight}px;\n          font-size: ${(innerHeight) * 0.75}px;\n          font-variation-settings: 'wght' 500;\n          color: var(--bg-color)\n        }\n      `}\n    >\n      <input\n        id={id}\n        type=\"checkbox\"\n        checked={toggleStateProvided}\n        onChange={handler}\n      />\n      <div className='title'>{label}</div>\n      <div className='box' />\n      <Icon value='check' />\n    </label>\n  )\n}\n","import { css } from '@emotion/core'\n\nexport const getCssGridTemplate = (templateName, y, x, z) => {\n  switch(templateName) {\n    case 'slider': return css`grid-template:\n      [row1-start] \"minus     slider    plus      \" ${y} [row1-end]\n      /             ${y}      ${x}      ${y}\n      `\n    case 'numeric-slider': return css`grid-template:\n      [row1-start] \"minus     slider    plus      number      \" ${y} [row1-end]\n      /             ${y}      ${x}      ${y}      ${z}  \n      `\n    case 'icon-card': return css`grid-template:\n      [row1-start] \"magnitude   title       close       \" 76px [row1-end]\n      [row2-start] \"magnitude   traits      traits      \" 24px [row1-end]\n      [row3-start] \"left        right       right       \" auto [row2-end]\n      /             120px       auto        45px;\n      `\n    case 'title-left': return css`grid-template:\n      [row1-start] \"null      label     status    \" ${y} [row1-end]\n      /             10px      auto      ${y}  \n      `\n    case 'title-right':\n    default: return css`grid-template:\n      [row1-start] \"status    label     null      \" ${y} [row1-end]\n      /             ${y}      auto      10px\n      `\n  }\n}\n","/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\nimport { checkCSS } from '../css'\nimport { cssInteractiveLabel } from '../css/interactive-label'\nimport { Icon } from '../Icon'\nimport Label from '../Label'\n\nconst defaultDimensions =\n{ height: 36 }\n\nexport default function Key({\n  id,\n  icon,\n  label = 'Label',\n  toggleStateProvided,\n  handler,\n  disabled,\n  dimensions,\n  gridArea = 'key',\n  cssExtra,\n}) {\n  const { height } = { ...defaultDimensions, ...dimensions }\n\n  return (\n    <label\n      htmlFor={id}\n      className={`\n        interactive\n        ${disabled ? 'disabled' : ''}\n      `}\n      css={css`\n        ${checkCSS};\n        ${cssExtra};\n        ${cssInteractiveLabel}\n        grid-area: ${gridArea};\n        height: ${height}px;\n        input[type=checkbox] {\n          height: ${height}px;\n          width:  ${height}px;\n          &.active,\n          &:active, \n          &:checked { \n            ~ .box { // fill the box:\n            border-width: ${(height) / 2}px;\n            }\n          }\n        }\n        .box {\n          height: ${height}px;\n          width:  ${height}px;\n        }\n        .icon {\n          font-size: ${(height) * 0.5}px;\n          font-variation-settings: 'wght' 200;\n          color: var(--fg-color)\n        }\n      `}\n    >\n      <input\n        id={id}\n        type=\"checkbox\"\n        checked={toggleStateProvided}\n        onChange={handler}\n        disabled={disabled}\n      />\n      <div className='box' />\n      <Icon value={icon} />\n      {label && <Label\n        text={label.text || label}\n        place={label.place || 'above'}\n      />}\n    </label>\n  )\n}\n","/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\nimport { useEffect, useState } from 'react'\nimport { switchCSS } from '../css'\nimport Label from '../Label'\n\nconst defaultDimensions =\n{ height: 24,\n  innerPad: 3,\n  trackWidth: 36 }\n\nconst defaultLabel = {\n  place: 'above',\n  text: 'Label',\n  optionA: 'OFF',\n  optionB: 'ON',\n}\n\nexport default function ToggleFlip({\n  id,\n  text,\n  label,\n  toggleStateProvided,\n  handler,\n  cssExtra,\n  dimensions,\n  gridArea = 'switch',\n  disabled,\n}) {\n  const [checked, setChecked] = useState(toggleStateProvided)\n  const [initialSwitchPosition, setInitialSwitchPosition] = useState(toggleStateProvided ? 100 : 0)\n  const [switchPosition, setSwitchPosition] = useState(toggleStateProvided ? 100 : 0)\n  const [actionIsDrag, setActionIsDrag] = useState(false)\n\n  const {\n    height,\n    innerPad,\n    trackWidth,\n    thumbWidth,\n  } = { ...defaultDimensions, ...dimensions }\n  const {\n    text: labelText,\n    place: labelPlace,\n    optionA: labelA,\n    optionB: labelB,\n  } = { ...defaultLabel, ...label }\n  const innerHeight = height - innerPad * 2\n  const thumbDisplace = innerPad + (trackWidth - height) * (switchPosition / 100)\n\n  useEffect(() => {\n    setSwitchPosition(toggleStateProvided ? 100 : 0)\n    setChecked(toggleStateProvided)\n  }, [toggleStateProvided])\n\n  const handleSetInitialSwitchPosition = () => {\n    setInitialSwitchPosition(switchPosition)\n  }\n  const handleSetSwitchPosition = e => {\n    const newPosition = e.target.value\n    if(newPosition !== initialSwitchPosition && !actionIsDrag) setActionIsDrag(true)\n    setSwitchPosition(newPosition)\n  }\n  const resolveEvent = e => {\n    const resolvedSwitchPosition = actionIsDrag\n      ? switchPosition > 50 ? 100 : 0\n      : initialSwitchPosition > 50 ? 0 : 100\n    setSwitchPosition(resolvedSwitchPosition)\n    if(initialSwitchPosition !== resolvedSwitchPosition) handler(e)\n    setActionIsDrag(false)\n  }\n\n  return (\n    <div\n      className={`\n        interactive\n        ${disabled ? 'disabled' : ''}\n      `}\n      css={css`\n        grid-area: ${gridArea};\n        display: grid;\n        align-items: center;\n        justify-items: center;\n        grid-template:\n          [row1-start] \"label     switch           \" ${height}px [row1-end]\n          /             auto      ${trackWidth}px;\n        label {\n          cursor: pointer;\n          user-select: none;\n          padding: 0 5px;\n        }\n      `}\n    >\n      {text && <label htmlFor={id}>\n        {text}\n      </label>\n      }\n      <div\n        tabIndex='0'\n        onMouseDown={disabled ? null : handleSetInitialSwitchPosition}\n        onTouchStart={disabled ? null : handleSetInitialSwitchPosition}\n        onMouseUp={disabled ? null : resolveEvent}\n        onTouchEnd={disabled ? null : resolveEvent}\n        css={css`\n          ${switchCSS}\n          ${cssExtra}\n          grid-template:\n            [row1-start] \"switch           \" ${height}px [row1-end]\n            /             ${trackWidth}px;\n          input[type=checkbox] {\n            height: ${height}px;\n            width:  ${trackWidth}px;\n          }\n          input[type=range] {\n            height: ${innerHeight}px;\n            width:  ${trackWidth}px;\n            &::-webkit-slider-thumb {\n              height: ${innerHeight}px;\n              width:  ${thumbWidth || innerHeight}px;\n            }\n            &::-moz-range-thumb {\n              height: ${innerHeight}px;\n              width:  ${thumbWidth || innerHeight}px;\n            }\n          }\n          .switch {\n            height: ${height}px;\n            width:  ${trackWidth}px;\n            .thumb {\n              width:  ${thumbWidth || innerHeight}px;\n              height: ${innerHeight}px;\n              margin: ${innerPad}px 0;\n              margin-left: ${thumbDisplace}px;\n            }\n          }\n        `}\n      >\n        {label && <Label\n          text={labelText || label}\n          place={labelPlace || 'above'}\n        />}\n        <Label\n          text={checked ? labelB : labelA}\n          place={checked ? 'right' : 'left'}\n        />\n        <input\n          type=\"checkbox\"\n          tabIndex='-1'\n          id={id}\n          checked={checked}\n          onChange={handler}\n          disabled={disabled}\n        />\n        <input\n          tabIndex='-1'\n          type=\"range\"\n          value={switchPosition}\n          onChange={handleSetSwitchPosition}\n          min={0}\n          max={100}\n          disabled={disabled}\n        />\n        <div className='switch'>\n          <div className='thumb' />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport Button from './Button'\nimport Key from './Key'\nimport Switch from './Switch'\n\nexport default function Toggle({\n  type,\n  id = Math.random(),\n  icon,\n  disabled,\n  label,\n  toggleStateProvided,\n  handler,\n  dimensions,\n  layout,\n  gridArea,\n  cssExtra,\n}) {\n  switch(type) {\n    case 'key': return (\n      <Key\n        id={id}\n        icon={icon}\n        disabled={disabled}\n        label={label}\n        toggleStateProvided={toggleStateProvided}\n        handler={handler}\n        dimensions={dimensions}\n        layout={layout}\n        gridArea={gridArea}\n        cssExtra={cssExtra}\n      />\n    )\n    case 'switch': return (\n      <Switch\n        id={id}\n        disabled={disabled}\n        label={label}\n        toggleStateProvided={toggleStateProvided}\n        handler={handler}\n        dimensions={dimensions}\n        layout={layout}\n        gridArea={gridArea}\n        cssExtra={cssExtra}\n      />\n    )\n    default: return (\n      <Button\n        id={id}\n        disabled={disabled}\n        label={label}\n        toggleStateProvided={toggleStateProvided}\n        handler={handler}\n        dimensions={dimensions}\n        layout={layout}\n        gridArea={gridArea}\n        cssExtra={cssExtra}\n      />\n    )\n  }\n}\n","/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\nimport { panelCSS } from './css'\nimport { cssInteractiveLabel } from './css/interactive-label'\nimport { cssInteractiveTransform } from './css/interactive-transform'\nimport Label from './Label'\n\nconst defaultDimensions =\n{ height: 100,\n  width: null }\n\nexport default function Panel({\n  children,\n  handler,\n  text,\n  label,\n  cssExtra,\n  gridArea,\n  dimensions,\n  disabled,\n}) {\n  const { height, width } = { ...defaultDimensions, ...dimensions }\n  const autoWidth = width ? `${width}px` : 'auto'\n\n  return (\n    <button\n      type='button'\n      className='interactive'\n      onClick={handler}\n      disabled={disabled}\n      css={css`\n        ${panelCSS};\n        ${cssInteractiveTransform};\n        ${cssInteractiveLabel};\n        ${cssExtra};\n        grid-area: ${gridArea};\n        height: ${height}px;\n        width: ${autoWidth};\n        align-items: center;\n        align-content: center;\n        justify-content: center;\n        text-align: center;\n        .icon { \n          height: ${height}px;\n          width:  ${height}px;\n        }\n      `}\n    >\n      {children}\n      {text && <div className='text'>{label}</div>}\n      {label &&\n        <Label\n          text={label.text || label}\n          place={label.place || 'above'}\n        />}\n    </button>\n  )\n}\n","/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\nimport { useState, useEffect, useRef } from 'react'\nimport { funnel } from 'luum'\nimport Label from './Label'\nimport { getCssGridTemplate } from './controlStyles'\nimport { sliderCSS } from './css'\nimport { Icon } from './Icon'\n\nconst defaultDimensions =\n{ height: 36,\n  innerPad: 3,\n  rangeWidth: null,\n  thumbWidth: 20,\n  numInputWidth: 50 }\n\nconst numberIfString = value => {\n  if(typeof value === 'string') return Number(value)\n  return value\n}\n\nexport default function Slider({\n  label,\n  valueProvided,\n  disabled,\n  handler,\n  step = 1,\n  shiftStep = step * 10,\n  range,\n  limit = range,\n  dimensions,\n  gridArea = 'slider',\n  cssExtra,\n  numeric,\n  liveUpdate,\n}) {\n  const [value, setValue] = useState(funnel(valueProvided, limit))\n  const [enterIsHeld, setEnterIsHeld] = useState(false)\n  const [shiftIsHeld, setShiftIsHeld] = useState(false)\n\n  const {\n    height,\n    innerPad,\n    rangeWidth,\n    thumbWidth,\n    numInputWidth,\n  } = { ...defaultDimensions, ...dimensions }\n  const autoRangeWidth = rangeWidth ? `${rangeWidth}px` : 'auto'\n  const rangeRef = useRef(null)\n  const trueRangeWidth = rangeRef.current?.offsetWidth\n  const [rangeWidthState, setRangeWidthState] = useState(trueRangeWidth)\n\n  const rangeTotal = range[1] - range[0]\n  const limitTotal = limit[1] - limit[0]\n  const limitWithinRange = limitTotal / rangeTotal\n  const innerHeight = height - innerPad * 2\n  const slidableSpace = rangeWidthState - thumbWidth\n  const trackWidth = thumbWidth + slidableSpace * limitWithinRange\n  const trackProgress = limit[0] / rangeTotal\n  const trackDisplace = rangeWidthState * trackProgress\n  const thumbProgress = (value - limit[0]) / (limitTotal || 1)\n  const thumbDisplace = thumbProgress * slidableSpace * limitWithinRange\n\n  useEffect(\n    () => { setValue(funnel(valueProvided, limit)) },\n    [valueProvided, limit]\n  )\n\n  useEffect(\n    () => setRangeWidthState(rangeRef.current?.offsetWidth),\n    [trueRangeWidth]\n  )\n\n  const handleSetValue = e => {\n    setValue(e.target.value)\n    if(liveUpdate) handler(Number(e.target.value))\n  }\n  const handleKeyDown = e => {\n    switch(e.keyCode) {\n      case 13: setEnterIsHeld(true); break\n      case 16: setShiftIsHeld(true); break\n      case 37:\n      case 40:\n        setValue(numberIfString(value) - (shiftIsHeld ? shiftStep : step))\n        e.preventDefault()\n        break\n      case 38:\n      case 39:\n        setValue(numberIfString(value) + (shiftIsHeld ? shiftStep : step))\n        e.preventDefault()\n        break\n      default:\n    }\n  }\n  const handleKeyUp = e => {\n    switch(e.keyCode) {\n      case 13: setEnterIsHeld(false); handler(numberIfString(value)); break\n      case 16: setShiftIsHeld(false); break\n      default:\n    }\n  }\n  /*\n  const layoutCSS = numeric\n    ? getCssGridTemplate('numeric-slider', `${height}px`, autoRangeWidth, `${numInputWidth + 10}px`)\n    : getCssGridTemplate('slider', `${height}px`, autoRangeWidth, `${numInputWidth + 10}px`)\n  */\n  return (\n    <div\n      onMouseUp={() => !disabled && handler(numberIfString(value))}\n      onTouchEnd={() => !disabled && handler(numberIfString(value))}\n      css={css`\n        ${sliderCSS}\n        ${cssExtra}\n        --thumb-width: ${thumbWidth}px;\n        grid-area: ${gridArea};\n        flex-grow: ${rangeWidth ? 0 : 1};\n        .range-wrapper {\n          --slidable-space: calc(100% - var(--thumb-width));\n          --track-width: calc(var(--thumb-width) + var(--slidable-space) * ${limitWithinRange});\n          --track-displace: ${trackProgress * 100}%;\n          --thumb-displace: calc(${thumbProgress} * var(--slidable-space) * ${limitWithinRange});\n          input[type=range] {\n            width:  ${trackWidth}px;\n            margin-left: ${trackDisplace}px;\n            height: ${height}px;\n            &::-webkit-slider-thumb { \n              height: ${height}px;\n              width:  ${thumbWidth}px;\n            }\n            &::-moz-range-thumb { \n              height: ${height}px;\n              width:  var(--thumb-width);\n            }\n          }\n          .range {\n            width:  ${autoRangeWidth};\n            height: ${innerHeight}px;\n            margin: ${innerPad}px 0;\n            .track {\n              width:  ${trackWidth}px;\n              margin-left: ${trackDisplace}px;\n              height: ${innerHeight}px;\n              .thumb {\n                width:  ${thumbWidth}px;\n                height: ${innerHeight}px;\n                margin-left: ${thumbDisplace}px;\n                .label-wrap {              \n                  width:  ${thumbWidth}px;\n                }\n              }\n            }\n          }\n        }\n        input[type=number] {\n          grid-area: number;\n          width:  ${numInputWidth}px;\n          height: ${innerHeight}px;\n        }\n        button {\n          height: ${innerHeight}px;\n          width:  ${innerHeight}px;\n        }\n      `}\n      className={`\n        interactive\n        ${enterIsHeld ? 'active' : ''}\n        ${disabled ? 'disabled' : ''}\n      `}\n    >\n      <button\n        type='button'\n        tabIndex='-1'\n        disabled={value === limit[0] || disabled}\n        onClick={() => handler(numberIfString(value) - shiftStep)}\n      >\n        <Icon value='minus' />\n      </button>\n      <div className='range-wrapper'>\n        <div className='range' ref={rangeRef}>\n          <div className='track'>\n            <div className='thumb'>\n              {label && <Label\n                text={label.text || label}\n                place={label.place || 'above'}\n              />}\n            </div>\n          </div>\n        </div>\n        <input\n          type=\"range\"\n          tabIndex={-1}\n          value={value}\n          disabled={disabled}\n          onChange={handleSetValue}\n          onKeyDown={handleKeyDown}\n          onKeyUp={handleKeyUp}\n          min={Math.round(limit[0])}\n          max={Math.round(limit[1])}\n          step={step}\n        />\n      </div>\n      <button\n        type='button'\n        tabIndex='-1'\n        disabled={value === limit[1] || disabled}\n        onClick={() => handler(numberIfString(value) + shiftStep)}\n      >\n        <Icon value='plus' />\n      </button>\n      {numeric &&\n        <input\n          type=\"number\"\n          inputMode=\"numeric\"\n          disabled={disabled}\n          value={Math.round(numberIfString(value))}\n          onChange={handleSetValue}\n          onKeyDown={handleKeyDown}\n          onKeyUp={handleKeyUp}\n        />}\n    </div>\n  )\n}\n","/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\n\nexport default ({\n  hex,\n  importHexColor,\n}) => (\n  <div\n    onClick={() => importHexColor(hex)}\n    css={css`\n      display: inline-flex;\n      flex-grow: 1;\n      height: 100px;\n      background: ${hex};\n      transition-property: all;\n      transition-duration: .2s;\n      transition-timing-function: initial;\n      align-items: center;\n      justify-content: center;\n    `}\n  >{hex}</div>\n)\n","import React, { useState, useEffect } from 'react'\nimport { css } from '@emotion/core'\n// luum\nimport {\n  hexToSpec,\n  specToHex,\n  gradientsToHexArrays,\n  validateHex,\n  scheme,\n  schemes,\n  specToHexFixLimit,\n} from 'luum'\n// Controls\nimport {\n  Toggle,\n  Slider,\n  TextField,\n  Panel,\n  Dropdown,\n  Icon,\n  ControlGroup,\n} from '../Controls'\n// Structure\nimport {\n  GradientRow,\n  ControlCluster,\n} from '../StyleDefinitions'\n// Children\nimport Swatch from './Swatch'\n\nexport default function PaletteModule({\n  hues,\n  tuner,\n  color,\n  colorIdx,\n  deleteColor,\n  changeColor,\n  undoChange,\n  redoChange,\n}) {\n  const { hue, sat, lum, prefer, hueIsLinked, linkedToHue } = color\n  const preview = specToHexFixLimit({ ...color, tuner })\n  const hex = specToHex({ ...color, tuner })\n  const [inputHex, setInputHex] = useState(hex.substr(1, 6))\n\n  useEffect(() => {\n    setInputHex(specToHex({ ...color, tuner }).substr(1, 6))\n  }, [color, tuner])\n\n  const saveThisColor = content => changeColor({ targetIdx: colorIdx, content })\n\n  const importHex = value => {\n    const hex = validateHex.process(`#${value}`)\n    const { hue, sat, lum } = hexToSpec(hex)\n    saveThisColor({ hue, sat, lum, hueIsLinked: false })\n  }\n\n  const adjustColorSpec = (output, attribute) => {\n    let value = output\n    if(typeof value !== 'number') value = parseInt(output, 10)\n    if(attribute === 'lum') value /= 100\n    const content = {}\n    content[attribute] = value\n    console.log(colorIdx, content)\n    saveThisColor({ ...content })\n  }\n\n  const togglePrefer = () => {\n    const newPrefer = prefer === 'sat' ? 'lum' : 'sat'\n    saveThisColor({ prefer: newPrefer })\n  }\n\n  const toggleHueIsLinked = () => saveThisColor({ hueIsLinked: !hueIsLinked })\n\n  const selectHueToLink = value => saveThisColor({ linkedToHue: value })\n\n  const controlPalette = css`${scheme({\n    hexes: [hex],\n    scheme: schemes.trifactory,\n    tuner,\n  }).Control}`\n\n  const sliderDimensions = {\n    height: 36,\n  }\n\n  return (\n    <>\n      <ControlGroup\n        gap={2}\n        gridTemplate='\n          [row1-start] \"undo redo .    close\" auto [row1-end]\n          /             0fr  0fr  1fr  0fr'\n      >\n        <Panel\n          handler={(() => undoChange(colorIdx))}\n          disabled={color.history.marker === color.history.timeline.length}\n          gridArea='undo'\n          cssExtra={controlPalette}\n          dimensions={{ height: 36, width: 36 }}\n        ><Icon value='undo' /></Panel>\n        <Panel\n          handler={(() => redoChange(colorIdx))}\n          disabled={color.history.marker === 0}\n          gridArea='redo'\n          cssExtra={controlPalette}\n          dimensions={{ height: 36, width: 36 }}\n        ><Icon value='redo' /></Panel>\n        <Panel\n          handler={() => deleteColor(colorIdx)}\n          dimensions={{ height: 36, width: 36 }}\n          gridArea='close'\n          cssExtra={controlPalette}\n        ><Icon value='close' /></Panel>\n      </ControlGroup>\n      <TextField\n        valueProvided={inputHex}\n        validate={validateHex}\n        handler={importHex}\n        frontMatter='#'\n        dimensions={{ fieldWidth: 100 }}\n        cssExtra={controlPalette}\n        goButton\n        undoButton\n      />\n      <ControlGroup\n        gap={[2, 10]}\n        gridTemplate='\n          [row1-start] \"linked hue\" auto [row1-end]\n          [row2-start] \"switch sat\" auto [row2-end]\n          [row3-start] \"switch lum\" auto [row3-end]\n          /             0fr   1fr\n          '\n      >\n        <Slider\n          label=\"Hue\"\n          handler={value => adjustColorSpec(value, 'hue')}\n          valueProvided={hue}\n          disabled={hueIsLinked}\n          range={[0, 360]}\n          dimensions={sliderDimensions}\n          gridArea='hue'\n          cssExtra={controlPalette}\n          numeric\n        />\n        <ControlCluster gridArea='linked'>\n          <Dropdown\n            label='Source'\n            valueProvided={linkedToHue}\n            handler={selectHueToLink}\n            dimensions={{ width: 100 }}\n            options={[\n              { value: null, label: '--' },\n              ...hues.map(hue =>\n                ({ value: hue.name, label: hue.name })\n              )]}\n            cssExtra={controlPalette}\n          />\n          <Toggle\n            type='key'\n            icon='auto'\n            dimensions={{ height: 36, trackWidth: 48 }}\n            handler={toggleHueIsLinked}\n            disabled={linkedToHue === null}\n            toggleStateProvided={hueIsLinked}\n            cssExtra={controlPalette}\n          />\n        </ControlCluster>\n        <Slider\n          numeric\n          label=\"Saturation\"\n          handler={value => adjustColorSpec(value, 'sat')}\n          valueProvided={sat}\n          range={[0, 255]}\n          limit={preview.limit.sat}\n          dimensions={sliderDimensions}\n          gridArea='sat'\n          cssExtra={controlPalette}\n        />\n        <Toggle\n          id={`prefer-color-${colorIdx}-flip`}\n          type='switch'\n          label={{ text: 'Prefer', optionA: 'Saturation', optionB: 'Luminosity' }}\n          dimensions={{ height: 36, trackWidth: 48 }}\n          handler={togglePrefer}\n          toggleStateProvided={prefer === 'lum'}\n          cssExtra={controlPalette}\n        />\n        <Slider\n          label=\"Luminosity\"\n          handler={value => adjustColorSpec(value, 'lum')}\n          valueProvided={(lum * 100)}\n          range={[0, 100]}\n          limit={preview.limit.lum.map(lum => lum * 100)}\n          dimensions={sliderDimensions}\n          gridArea='lum'\n          cssExtra={controlPalette}\n          numeric\n        />\n      </ControlGroup>\n      {gradientsToHexArrays(color, tuner).map((hexArray, hexArrayIdx) =>\n        <GradientRow\n          key={`Color-${colorIdx}-hexGroup-${hexArrayIdx}`}\n          shadeRange={colorIdx === 2}\n        >\n          {hexArray.map((hex, hexIdx) =>\n            <Swatch\n              hex={hex}\n              importHexColor={importHex}\n              key={`Color-${colorIdx}-Row-${hexArrayIdx}-Swa-${hexIdx}`}\n            />\n          )}\n        </GradientRow>\n      )}\n    </>\n  )\n}\n","/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\nimport { specToHex } from 'luum'\nimport { panelCSS } from '../Controls/css'\nimport PaletteModuleActive from './PaletteModule'\n\nexport default function PaletteModule({\n  hues,\n  tuner,\n  color,\n  colorIdx,\n  addColor,\n  deleteColor,\n  changeColor,\n  undoChange,\n  redoChange,\n}) {\n  // console.log('color of palette module', colorIdx, color)\n  const hex = color ? specToHex({ ...color, tuner }) : null\n  return (\n    <section\n      onClick={color ? null : () => addColor(hues[0])}\n      className=\"PaletteModule\"\n      css={css`\n        ${color ? '' : panelCSS}\n        ${color ? '' : `\n          --bg-color: #333;\n          --fg-color: #aaa;\n        `}\n        display: block;\n        background: ${hex};\n        transition-property: ${'all'};\n        transition-duration: .3s;\n        transition-timing-function: initial;\n        max-height: ${color ? 100000 : 100}px;\n      `}\n    >\n      {color === undefined\n        ? ('add color')\n        : (\n          <PaletteModuleActive\n            hues={hues}\n            tuner={tuner}\n            color={color}\n            colorIdx={colorIdx}\n            deleteColor={deleteColor}\n            changeColor={changeColor}\n            undoChange={undoChange}\n            redoChange={redoChange}\n          />\n        )\n    }\n    </section>\n  )\n}\n","const tenths = [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]\nconst dynamicRange = [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.85, 0.9, 0.94, 0.97]\n\nconst hueRange = (a, z) => ({\n  axes: [\n    {\n      attribute: 'hue',\n      from: a,\n      to: z,\n    },\n    {\n      attribute: 'sat',\n      from: 255,\n      to: 255,\n    },\n  ],\n  steps: tenths,\n  prefer: 'sat',\n})\nconst shadeRange = hue => ({\n  axes: [\n    {\n      attribute: 'hue',\n      from: hue,\n      to: hue,\n    },\n    {\n      attribute: 'sat',\n      from: 255,\n      to: 255,\n    },\n    {\n      attribute: 'lum',\n      from: 0,\n      to: 1,\n    },\n  ],\n  steps: dynamicRange,\n  prefer: 'lum',\n})\n\nexport default {\n  default: {\n    hues: [\n      { id: 0.2,\n        name: 'indigo',\n        angle: 240,\n        nameIsDerived: false,\n        hueIsDerived: false,\n        deriveHue: null },\n      { id: 0.5,\n        name: 'lime',\n        angle: 90,\n        nameIsDerived: false,\n        hueIsDerived: true,\n        deriveHue: {\n          from: 'indigo',\n          via: 'split',\n          to: 0,\n        } },\n    ],\n    colors: [\n      { id: 333,\n        hueIsLinked: true,\n        linkedToHue: 'indigo',\n        hue: 240,\n        sat: 255,\n        lum: 0.50,\n        prefer: 'sat',\n        history: {\n          marker: 0,\n          timeline: [],\n        },\n        gradients: [\n          { steps: tenths,\n            prefer: 'sat',\n            axes: [\n              { attribute: 'hue',\n                relative: true,\n                from: -20,\n                to: 20 },\n            ] },\n          { steps: tenths,\n            prefer: 'lum',\n            axes: [\n              { attribute: 'hue',\n                relative: true,\n                from: -20,\n                to: 20 },\n            ] },\n          { steps: tenths,\n            prefer: 'lum',\n            axes: [\n              { attribute: 'lum',\n                from: 0,\n                to: 1 },\n            ] },\n          { steps: tenths,\n            prefer: 'sat',\n            axes: [\n              { attribute: 'sat',\n                to: 255,\n                from: 0 },\n            ] },\n        ] },\n      { id: 334,\n        hueIsLinked: false,\n        linkedToHue: null,\n        hue: 215,\n        sat: 0,\n        lum: 0,\n        history: {\n          marker: 0,\n          timeline: [],\n        },\n        gradients: [\n          hueRange(0, 60),\n          hueRange(30, 90),\n          hueRange(60, 120),\n          hueRange(90, 150),\n          hueRange(120, 180),\n          hueRange(150, 210),\n          hueRange(180, 240),\n          hueRange(210, 270),\n          hueRange(240, 300),\n          hueRange(270, 330),\n          hueRange(300, 360),\n          hueRange(330, 390),\n        ] },\n      { id: 335,\n        hueIsLinked: false,\n        linkedToHue: null,\n        hue: 0,\n        sat: 0,\n        lum: 0,\n        history: {\n          marker: 0,\n          timeline: [],\n        },\n        gradients: [\n          shadeRange(10),\n          shadeRange(20),\n          shadeRange(50),\n          shadeRange(80),\n          shadeRange(110),\n          shadeRange(140),\n          shadeRange(170),\n          shadeRange(200),\n          shadeRange(230),\n          shadeRange(260),\n          shadeRange(290),\n          shadeRange(320),\n        ] },\n    ],\n  },\n}\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { specToHex } from 'luum'\n\nexport default function ChromaticDiagram({ hues, tuner }) {\n  return (\n    <div\n      css={css`\n        display: flex;\n        height: 144px;\n        width: 100%;\n        justify-content: center;\n        margin-bottom: 20px;\n      `}\n    >\n      {hues.map(hue =>\n        <div\n          css={css`\n            border-radius:100%;\n            display: flex;\n            height: 144px;\n            width: 144px;\n            position: absolute;\n            justify-content: flex-end;\n            align-items: center;\n            transform: rotate(-${hue.angle}deg);\n            transition: all 0.5s ease;\n            &:first-of-type { \n              background-color: #393939;\n            }\n            > .dot {\n              z-index: 100;\n              position: absolute;\n              right: -6px;\n              border-radius:100%;\n              height: 12px;\n              width: 12px;\n              background-color: ${specToHex({ hue: hue.angle, sat: 255, lum: 1, prefer: 'sat', tuner })};\n            }\n          `}\n          key={`hueball-for-${hue.id}-${hue.hueIsDerived}`}\n        >\n          <div className='dot' />\n        </div>\n      ) }\n    </div>\n  )\n}\n","import React from 'react' // eslint-disable-line\n/** @jsx jsx */\n/** @jsxFrag React.Fragment */\nimport { css, jsx } from '@emotion/core'\nimport { HUE_STRUCTURES, specToHex, wrapAround } from 'luum'\nimport { Dropdown, Panel, Slider, TextField, Toggle, Icon, ControlGroup } from '../Controls'\nimport { ControlCluster } from '../StyleDefinitions'\n\nexport default function HueControls({\n  hue,\n  hues,\n  hueIdx,\n  changeHue,\n  addHue,\n  deleteHue,\n  tuner,\n}) {\n  const { name, angle, deriveHue, hueIsDerived, nameIsDerived } = hue\n  const linkHueOptions = [...hues].slice(0, hueIdx)\n\n  const validate = {\n    final: attempt =>\n      !(hues.some(hue => hue.name === attempt))\n      &&\n      attempt.length !== 0,\n  }\n  const saveThisHue = content => changeHue({ targetIdx: hueIdx, content })\n\n  const toggleHueIsDerived = () => {\n    let newDeriveHue = { ...deriveHue }\n    if(deriveHue === null) {\n      newDeriveHue = {\n        from: hues[0].name,\n        via: Object.keys(HUE_STRUCTURES)[1],\n        to: 0,\n      }\n    }\n    saveThisHue({\n      hueIsDerived: !hueIsDerived,\n      deriveHue: newDeriveHue,\n    })\n  }\n  const toggleNameIsDerived = () => {\n    saveThisHue({ nameIsDerived: !hue.nameIsDerived })\n  }\n\n  const adjustDeriveHue = content => {\n    const newDeriveHue = { ...deriveHue, ...content }\n    saveThisHue({ deriveHue: newDeriveHue })\n  }\n\n  return (\n    <ControlGroup\n      gap={2}\n      gridTemplate='\n          [row1-start] \"view  tdn  field drops tdh  slider action\" auto [row1-end]\n          /             0fr   0fr  0fr   0fr   0fr   1fr   0fr'\n    >\n      {name\n        ? (\n          <>\n            <div\n              key={`hue-${hueIdx}`}\n              css={css`\n                  grid-area: view;\n                  width: 36px;\n                  height: 36px;\n                  background: ${specToHex(\n                { hue: angle, sat: 255, lum: 1, prefer: 'sat', tuner })};\n                `}\n            />\n            <Toggle\n              handler={toggleNameIsDerived}\n              toggleStateProvided={nameIsDerived}\n              gridArea='tdn'\n              type='key'\n              icon='auto'\n              label='autoname ON'\n            />\n            <TextField\n              label='Name'\n              valueProvided={name}\n              validate={validate}\n              handler={name => saveThisHue({ name })}\n              disabled={nameIsDerived}\n              goButton\n              undoButton\n            />\n            <Toggle\n              disabled={hueIdx === 0}\n              type='key'\n              label={{ text: 'Derive Hue' }}\n              dimensions={{ height: 36, trackWidth: 48 }}\n              gridArea='tdh'\n              handler={toggleHueIsDerived}\n              toggleStateProvided={hueIsDerived}\n              icon='auto'\n            />\n            <ControlCluster gridArea='drops'>\n              <Dropdown\n                label='Derive From'\n                valueProvided={hue.deriveHue?.from}\n                dimensions={{ width: 100 }}\n                handler={from => adjustDeriveHue({ from })}\n                disabled={!hueIsDerived}\n                options={linkHueOptions.map(hue =>\n                  ({ value: hue.name, label: hue.name })\n                )}\n              />\n              <Dropdown\n                label='Derive Via'\n                valueProvided={hue.deriveHue?.via}\n                dimensions={{ width: 100 }}\n                handler={via => adjustDeriveHue({ via })}\n                disabled={!hueIsDerived}\n                options={hue.deriveHue?.from\n                  ? Object.keys(HUE_STRUCTURES).slice(1).map(structure => (\n                    { value: structure, label: structure }\n                  ))\n                  : []\n              }\n              />\n              <Dropdown\n                label='Derive To'\n                valueProvided={hue.deriveHue?.to}\n                dimensions={{ width: 100 }}\n                handler={to => adjustDeriveHue({ to })}\n                disabled={!hueIsDerived}\n                options={hue.deriveHue?.via\n                  ? HUE_STRUCTURES[hue.deriveHue?.via].map((structure, idx) => (\n                    { value: idx, label: (`+ ${structure}°`) }\n                  ))\n                  : []\n              }\n              />\n            </ControlCluster>\n            <Slider\n              label=\"Hue\"\n              handler={angle => saveThisHue({ angle })}\n              disabled={hueIsDerived}\n              valueProvided={wrapAround(angle, [0, 360])}\n              range={[0, 360]}\n              numeric\n            />\n            <Panel\n              handler={(() => deleteHue(hueIdx))}\n              dimensions={{ height: 36, width: 36 }}\n              gridArea='action'\n              label='Delete Hue'\n            ><Icon value='close' /></Panel>\n          </>\n        ) : ( // no hue name\n          <Panel\n            handler={addHue}\n            dimensions={{ height: 36 }}\n            gridArea='action'\n            label={{ text: 'Add Hue', place: 'left' }}\n          >\n            <Icon value='plus' />\n          </Panel>\n        )\n      }\n    </ControlGroup>\n  )\n}\n","import React from 'react' // eslint-disable-line\n/** @jsx jsx */\n/** @jsxFrag React.Fragment */\nimport { css, jsx } from '@emotion/core'\nimport ChromaticDiagram from './ChromaticDiagram'\nimport HueControls from './HueControls'\n\nexport default function HuesModule({\n  hues,\n  changeHue,\n  addHue,\n  deleteHue,\n  tuner,\n}) {\n  return (\n    <section\n      css={css`\n        --ex-bg-color: #444;\n        --bg-color: #222;\n        --mg-color: #000;\n        --fg-color: #aaa;\n        background: var(--ex-bg-color);\n        .interactive {\n          &:hover,\n          &.focus,\n          &:focus {\n            --bg-color: #333;\n            --mg-color: #000;\n            --fg-color: #fff;\n          }\n          &:active,\n          &.active {\n            --bg-color: #111;\n            --mg-color: #000;\n            --fg-color: #fff;\n          }\n          &:disabled,\n          &.disabled {\n            --bg-color: #3a3a3a;\n            --mg-color: #000;\n            --fg-color: #999;\n          }\n        }\n      `}\n    >\n      <ChromaticDiagram hues={hues} tuner={tuner} />\n      {[...hues, {}].map((hue, hueIdx) =>\n        // console.log(hue?.name, [...hues].slice(0, hueIdx))\n        <HueControls\n          key={`controls-for-${hue?.name}`}\n          hue={hue}\n          hues={hues}\n          hueIdx={hueIdx}\n          changeHue={changeHue}\n          addHue={addHue}\n          deleteHue={deleteHue}\n          tuner={tuner}\n        />\n      )}\n    </section>\n  )\n}\n","import React from \"react\"\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link,\n} from \"react-router-dom\"\n// luum\nimport { builtInTunerKit } from \"luum\"\n// logic\nimport manageHues from \"./logic/manageHues\"\nimport manageColors from \"./logic/manageColors\"\n// Structure\nimport { DemoSelect, ColorLogicDemo } from \"./StyleDefinitions\"\nimport { TilesDemo } from \"./Tiles\"\n// Children\nimport PaletteModule from \"./PaletteModule\"\n// temporary\nimport calibrationSheets from \"./preconfig/calibrationSheets\"\nimport useLocalStorageState from \"./util/useLocalStorageState\"\nimport HueModule from \"./HuesModule\"\n\n// localStorage.clear()\n\nexport default function Application() {\n  const tuner = builtInTunerKit.simulateCMYK\n  const [hues, setHues] = useLocalStorageState(\n    \"hues\",\n    calibrationSheets.default.hues\n  )\n  const [colors, setColors] = useLocalStorageState(\n    \"colors\",\n    calibrationSheets.default.colors\n  )\n\n  const [\n    changeColor,\n    applyChangesToColors,\n    undoChange,\n    redoChange,\n    addColor,\n    deleteColor,\n  ] = manageColors(colors, setColors, tuner, hues)\n\n  const [changeHue, applyChangesToHues, addHue, deleteHue] = manageHues(\n    hues,\n    setHues,\n    colors,\n    applyChangesToColors\n  )\n\n  return (\n    <Router basename={`/${process.env.PUBLIC_URL}`}>\n      <DemoSelect>\n        <ul>\n          <li>\n            <Link to=\"\">Tiles</Link>\n          </li>\n          <li>\n            <Link to=\"/logic\">Logic</Link>\n          </li>\n        </ul>\n      </DemoSelect>\n      <Switch>\n        <Route exact path=\"\">\n          <TilesDemo colors={colors} setColors={setColors} tuner={tuner} />\n        </Route>\n        <Route path=\"/logic\">\n          <ColorLogicDemo>\n            <HueModule\n              hues={hues}\n              changeHue={changeHue}\n              addHue={addHue}\n              deleteHue={deleteHue}\n              applyChangesToHues={applyChangesToHues}\n              tuner={tuner}\n            />\n            {[...colors, undefined].map((color, colorIdx) => (\n              <PaletteModule\n                key={`color-${colorIdx}`}\n                hues={hues}\n                tuner={tuner}\n                color={color}\n                colorIdx={colorIdx}\n                addColor={addColor}\n                deleteColor={deleteColor}\n                changeColor={changeColor}\n                undoChange={undoChange}\n                redoChange={redoChange}\n              />\n            ))}\n          </ColorLogicDemo>\n        </Route>\n      </Switch>\n    </Router>\n  )\n}\n// ${color ? color.hue : 0}-${color ? color.sat : 0}-${color ? color.lum : 0}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\nexport function register(config) {\n  if(process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if(publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n      if(isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if(installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if(installingWorker.state === 'installed') {\n            if(navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if(config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if(config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if(\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport \"./fonts/font-face.css\"\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}